{"items":[{"tags":["csv","docker","neo4j","neo4j-driver"],"answers":[{"tags":[],"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"last_editor":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523556174,"last_edit_date":1523556174,"creation_date":1523553296,"answer_id":49802466,"question_id":49802437,"share_link":"https://stackoverflow.com/a/49802466","body_markdown":"You will need to copy it into the docker container or into a directory that is mapped into it; Neo4J by default only supports loading CSV from its `import` directory, and all LOAD CSV paths will be relative to that.\r\n\r\nThis is with the out-of-the-box options; by modifying the `dbms.directories.import` variable in the config file, this can be changed, but it is explicitly not recommended by Neo4J documentation.","link":"https://stackoverflow.com/questions/49802437/loading-a-csv-file-into-neo4j-running-in-docker/49802466#49802466","title":"Loading a CSV file into Neo4J running in Docker"}],"owner":{"reputation":13808,"user_id":19856,"user_type":"registered","accept_rate":93,"profile_image":"https://i.stack.imgur.com/INXtX.jpg?s=128&g=1","display_name":"Traveling Tech Guy","link":"https://stackoverflow.com/users/19856/traveling-tech-guy"},"last_editor":{"reputation":1714,"user_id":38210,"user_type":"registered","profile_image":"https://i.stack.imgur.com/70Cji.png?s=128&g=1","display_name":"Colwin","link":"https://stackoverflow.com/users/38210/colwin"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1523555283,"accepted_answer_id":49802466,"answer_count":1,"score":0,"last_activity_date":1523556174,"creation_date":1523553188,"last_edit_date":1523553707,"question_id":49802437,"share_link":"https://stackoverflow.com/q/49802437","body_markdown":"I have Neo4J running in Docker (Windows 10). I want to import a large CSV file into it, using Node and `neo4j-driver`.\r\n\r\nMy query is (limited to 5 rows, for testing purposes):\r\n\r\n    let csvPath = &#39;file:///C:/Users/Test/largefile.csv&#39;;\r\n    \r\n    let query = `\r\n      USING PERIODIC COMMIT\r\n      LOAD CSV FROM &#39;${csvPath}&#39; AS line\r\n      WITH line LIMIT 5\r\n      MERGE (:Person {name: line[1]})-[:connected_to]-&gt;(:Person {name: line[2]})\r\n    `;\r\n\r\nNo matter what I try to put in the path, the driver keeps looking for `file:/var/lib/neo4j/import/C:/Users/Test/largefile.csv`. \r\n\r\nI tried with/without drive letter; tried local file and using `./`; tried diffrent paths - the driver always looks for the file at `/var/lib/neo4j/import` even though I have no such folder on my machine.\r\n\r\nIs it possible to import the file from my host machine, or will I need to copy it into the Docker container, into that folder structure?","link":"https://stackoverflow.com/questions/49802437/loading-a-csv-file-into-neo4j-running-in-docker","closed_reason":"duplicate","title":"Loading a CSV file into Neo4J running in Docker"},{"tags":["neo4j"],"comments":[{"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"edited":false,"score":0,"creation_date":1523546353,"post_id":49797550,"comment_id":86615244,"link":"https://stackoverflow.com/questions/49797550/neo-databaseerror-general-unknownerror-idallocation-state-is-probably-corrupted#comment86615244_49797550"},{"owner":{"reputation":6,"user_id":9636309,"user_type":"registered","profile_image":"https://graph.facebook.com/461318547617927/picture?type=large","display_name":"Alex","link":"https://stackoverflow.com/users/9636309/alex"},"reply_to_user":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"edited":false,"score":0,"creation_date":1523549830,"post_id":49797550,"comment_id":86617552,"link":"https://stackoverflow.com/questions/49797550/neo-databaseerror-general-unknownerror-idallocation-state-is-probably-corrupted#comment86617552_49797550"},{"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"edited":false,"score":0,"creation_date":1523554903,"post_id":49797550,"comment_id":86620227,"link":"https://stackoverflow.com/questions/49797550/neo-databaseerror-general-unknownerror-idallocation-state-is-probably-corrupted#comment86620227_49797550"}],"owner":{"reputation":6,"user_id":9636309,"user_type":"registered","profile_image":"https://graph.facebook.com/461318547617927/picture?type=large","display_name":"Alex","link":"https://stackoverflow.com/users/9636309/alex"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1523538806,"creation_date":1523538806,"question_id":49797550,"share_link":"https://stackoverflow.com/q/49797550","body_markdown":"I try to create node in the graph.db and get this error:\r\n\r\n    Neo.DatabaseError.General.UnknownError: IdAllocation state is probably corrupted or out of sync with the cluster. Local highId is 573057 and allocation range is IdRange[32768-33791, defrag []]\r\n\r\nMy DB was migrated from Neo4j Community Edition (neo4j-community-3.0.6) to Enterprise (neo4j-enterprise-3.2.3) by copying binaries and upgrading it.  Then I configured Causal Cluster.\r\n\r\nHere is log from debug.log:\r\n\r\n    2018-04-12 07:11:43.870+0000 ERROR [o.n.b.v.r.ErrorReporter] Client triggered an unexpected error [UnknownError]: IdAllocation state is probably corrupted or out of sync with the cluster. Local highId is 573057 and allocation range is IdRange[15360-16383, defrag []], reference 2ca1aca3-3a60-441c-9fe1-dbd431ae400a. IdAllocation state is probably corrupted or out of sync with the cluster. Local highId is 573057 and allocation range is IdRange[15360-16383, defrag []]\r\n    java.lang.IllegalStateException: IdAllocation state is probably corrupted or out of sync with the cluster. Local highId is 573057 and allocation range is IdRange[15360-16383, defrag []]\r\n            at org.neo4j.causalclustering.core.state.machines.id.ReplicatedIdGenerator.respectingHighId(ReplicatedIdGenerator.java:210)\r\n            at org.neo4j.causalclustering.core.state.machines.id.ReplicatedIdGenerator.storeLocally(ReplicatedIdGenerator.java:194)\r\n            at org.neo4j.causalclustering.core.state.machines.id.ReplicatedIdGenerator.nextId(ReplicatedIdGenerator.java:126)\r\n            at org.neo4j.kernel.impl.store.id.IdGenerator$Delegate.nextId(IdGenerator.java:62)\r\n            at org.neo4j.kernel.impl.store.CommonAbstractStore.nextId(CommonAbstractStore.java:571)\r\n            at org.neo4j.kernel.impl.transaction.state.PropertyCreator.primitiveSetProperty(PropertyCreator.java:140)\r\n            at org.neo4j.kernel.impl.transaction.state.TransactionRecordState.nodeAddProperty(TransactionRecordState.java:418)\r\n            at org.neo4j.kernel.impl.storageengine.impl.recordstorage.TransactionToRecordStateVisitor.visitNodePropertyChanges(TransactionToRecordStateVisitor.java:123)\r\n            at org.neo4j.storageengine.api.txstate.TxStateVisitor$Delegator.visitNodePropertyChanges(TxStateVisitor.java:205)\r\n            at org.neo4j.kernel.impl.api.state.TxState$14.visitPropertyChanges(TxState.java:405)\r\n            at org.neo4j.kernel.impl.api.state.PropertyContainerStateImpl.accept(PropertyContainerStateImpl.java:214)\r\n            at org.neo4j.kernel.impl.api.state.NodeStateImpl.accept(NodeStateImpl.java:152)\r\n            at org.neo4j.kernel.impl.api.state.TxState.accept(TxState.java:245)\r\n            at org.neo4j.kernel.impl.storageengine.impl.recordstorage.RecordStorageEngine.createCommands(RecordStorageEngine.java:303)\r\n            at org.neo4j.kernel.impl.api.KernelTransactionImplementation.commit(KernelTransactionImplementation.java:553)\r\n\r\nHow can I fix this error?\r\n\r\nThanks.","link":"https://stackoverflow.com/questions/49797550/neo-databaseerror-general-unknownerror-idallocation-state-is-probably-corrupted","title":"Neo.DatabaseError.General.UnknownError: IdAllocation state is probably corrupted or out of sync with the cluster"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"edited":false,"score":0,"creation_date":1523541976,"post_id":49797354,"comment_id":86611942,"link":"https://stackoverflow.com/questions/49797354/neo4j-finding-disconnected-nodes#comment86611942_49797354"}],"answers":[{"tags":[],"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523541784,"creation_date":1523541784,"answer_id":49798661,"question_id":49797354,"share_link":"https://stackoverflow.com/a/49798661","body_markdown":"Use [the path pattern in `where`][1]:\r\n\r\n    MATCH (a:A) WHERE NOT (a)-[:LINKS]-(:B)\r\n    RETURN a;\r\n\r\n    MATCH (b:B) WHERE NOT (b)-[:LINKS]-(:A)\r\n    RETURN b;\r\n\r\nOr combine into one query:\r\n\r\n    OPTIONAL MATCH (a:A) WHERE NOT (a)-[:LINKS]-(:B)\r\n    WITH collect(a) AS aNodes\r\n    OPTIONAL MATCH (b:B) WHERE NOT (b)-[:LINKS]-(:A)\r\n    WITH aNodes, \r\n         collect(b) AS bNodes\r\n    RETURN aNodes, bNodes\r\n\r\n\r\n  [1]: https://neo4j.com/docs/developer-manual/current/cypher/clauses/where/#query-where-patterns","link":"https://stackoverflow.com/questions/49797354/neo4j-finding-disconnected-nodes/49798661#49798661","title":"NEO4J: Finding disconnected nodes"}],"owner":{"reputation":798,"user_id":1897935,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/bakGC.jpg?s=128&g=1","display_name":"Srinath Ganesh","link":"https://stackoverflow.com/users/1897935/srinath-ganesh"},"last_editor":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1523541784,"creation_date":1523538313,"last_edit_date":1523541673,"question_id":49797354,"share_link":"https://stackoverflow.com/q/49797354","body_markdown":"I have this sample data\r\n\r\n[![Sample data][1]][1]\r\n\r\nWith the sample query\r\n\r\n    CREATE (a1:A {title: &quot;a1&quot;})\r\n    CREATE (a2:A {title: &quot;a2&quot;})\r\n    CREATE (a3:A {title: &quot;a3&quot;})\r\n    \r\n    CREATE (b1:B {title: &quot;b1&quot;})\r\n    CREATE (b2:B {title: &quot;b2&quot;})\r\n    \r\n    MATCH (a:A {title: &quot;a1&quot;}), (b:B {title: &quot;b1&quot;})\r\n    CREATE (a)-[r:LINKS]-&gt;(b)\r\n    \r\n    MATCH (a:A), (b:B) return a,b\r\n\r\n-------------------\r\n\r\nWhat I am trying to achieve:\r\n\r\n 1. Find all the node type A that are not connected to node type B (ans: a2, a3)\r\n 2. Find all the node type B that are not connected to node type A (ans: b2)\r\n 3. Both of this requirements are expected to be bi-directional, and have the same query template. \r\n\r\n--------------------\r\n\r\n**Where I have reached**\r\n\r\nGet all A not connected to B: gets me a2 and a3 as expected\r\n\r\n    MATCH path=(a:A)-[r]-(b:B)\r\n    WHERE (a)-[r]-(b)\r\n    WITH collect(a) as al\r\n    MATCH (c:A)\r\n    WHERE not c IN al\r\n    RETURN c\r\n\r\nGet all disconnected B, I get both b1 and b2 which is incorrect, and printing &quot;al&quot; revealed that the list is empty\r\n\r\n    MATCH path=(b:B)-[r]-(a:A)\r\n    WHERE (b)-[r]-(a)\r\n    WITH collect(b) as al\r\n    MATCH (c:B)\r\n    WHERE not c IN al\r\n    RETURN c\r\n\r\nsome how \r\n\r\n    WHERE (b)-[r]-(a) **!=** WHERE (a)-[r]-(b)\r\n\r\neven if I have the the direction as bi-directional (not mentioned)\r\n\r\nIf I change it to `WHERE (a)-[r]-(b)` in the second query then it works, but I want a generic bi-directional query.\r\n\r\n  [1]: https://i.stack.imgur.com/8Zt2p.png","link":"https://stackoverflow.com/questions/49797354/neo4j-finding-disconnected-nodes","title":"NEO4J: Finding disconnected nodes"},{"tags":["spring-boot","neo4j","graph-databases"],"owner":{"reputation":6,"user_id":9573488,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/--QeZWvcc0gM/AAAAAAAAAAI/AAAAAAAABVQ/cgDlZRy7yKA/photo.jpg?sz=128","display_name":"Mamatha Desireddy","link":"https://stackoverflow.com/users/9573488/mamatha-desireddy"},"last_editor":{"reputation":6,"user_id":9573488,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/--QeZWvcc0gM/AAAAAAAAAAI/AAAAAAAABVQ/cgDlZRy7yKA/photo.jpg?sz=128","display_name":"Mamatha Desireddy","link":"https://stackoverflow.com/users/9573488/mamatha-desireddy"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523538527,"creation_date":1523537027,"last_edit_date":1523538527,"question_id":49796893,"share_link":"https://stackoverflow.com/q/49796893","body_markdown":"I have a spring boot project which is backed by Neo4j database. I have a node called PROJECTS and it has several entries. PROJECTS node has status,priority,name,owner etc as properties. Now, I want to filter the PROJECTS based on the input which consists of Id and Value, which is dynamic. I does not know what property and its value going to be filtered and it differs each time based on input(which means dynamic). \r\n\r\nIn service I am forming the entire query string and trying to execute in ProjectsRepository.\r\n\r\nIn ProjectsRepository, I am calling the query like this:\r\n\r\n    @Query(&quot;0&quot;)\r\n    \r\n    \tList&lt;Projects&gt; filterProjects(String query);\r\n\r\nBut, it is not accepting the entire query string and throwing errors as below.   \r\n\r\n **2018-04-12 13:18:12 [http-nio-8883-exec-2] INFO \r\n o.n.o.d.bolt.request.BoltRequest -\r\n\t\t\t\tRequest: MATCH (p:PROJECTS) WHERE?0 with params {0=p.status=Low** **AND p.priority=High WITH SKIP 0 LIMIT 4 ORDER BY p.name DESC RETURN p}\r\nWARN  org.neo4j.ogm.session.Neo4jSession -\r\n\t\t\t\tError executing query : Neo.ClientError.Statement.SyntaxError - Invalid input &#39;0&#39;: expected &lt;init&gt; (line 1, column 1 (offset: 0))\r\n&quot;0&quot;\r\n ^. Rolling back transaction.**\r\n\r\n\r\nAny suggestions or any idea on this?","link":"https://stackoverflow.com/questions/49796893/passing-dynamic-properties-and-values-to-it-to-match-results-in-neo4j","title":"passing dynamic properties and values to it to match results in neo4j"},{"tags":["java","encoding","utf-8","neo4j"],"comments":[{"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"edited":false,"score":0,"creation_date":1523546637,"post_id":49796662,"comment_id":86615451,"link":"https://stackoverflow.com/questions/49796662/storing-special-characters-in-neo4j-database-from-java#comment86615451_49796662"}],"owner":{"reputation":16,"user_id":5985305,"user_type":"registered","profile_image":"https://graph.facebook.com/1700476236834678/picture?type=large","display_name":"Sofiane Chenna","link":"https://stackoverflow.com/users/5985305/sofiane-chenna"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1523536346,"creation_date":1523536346,"question_id":49796662,"share_link":"https://stackoverflow.com/q/49796662","body_markdown":"I&#39;m trying to store a text that contains special characters like (&#231;,&#233;,&#232;,&#224; ...) in neo4j from java using the REST api but i&#39;m getting the following error : \r\n\r\n    {&quot;results&quot;:[],\r\n    &quot;errors&quot;:[{&quot;code&quot;:&quot;Neo.ClientError.Request.InvalidFormat&quot;,&quot;message&quot;:&quot;Unable to deserialize request: Invalid UTF-8 start byte 0xfd\\n at [Source: HttpInputOverHTTP@b15eccb; line: 1, column: 1237]&quot;}]}\r\n\r\n- I already setted the charset to UTF-8 in the header of my request\r\n- I did also add the following line to the neo4j.conf  file , section JVM parameters : \r\n   \r\n\r\n&gt; dbms.jvm.additional=-Dfile.encoding=UTF8\r\n\r\nbut this still getting the same error.  \r\n\r\ndoes anyone have a solution for this ? \r\n","link":"https://stackoverflow.com/questions/49796662/storing-special-characters-in-neo4j-database-from-java","title":"storing special characters in neo4j database from java"},{"tags":["neo4j","count","sum","cypher"],"answers":[{"comments":[{"owner":{"reputation":25,"user_id":2553716,"user_type":"registered","accept_rate":20,"profile_image":"https://graph.facebook.com/506657668/picture?type=large","display_name":"Kevin Cauchi","link":"https://stackoverflow.com/users/2553716/kevin-cauchi"},"edited":false,"score":0,"creation_date":1523518639,"post_id":49787896,"comment_id":86596032,"link":"https://stackoverflow.com/questions/49787723/neo4j-get-match-sum-over-a-number-of-nodes/49787896#comment86596032_49787896"}],"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1523506473,"creation_date":1523506473,"answer_id":49787896,"question_id":49787723,"share_link":"https://stackoverflow.com/a/49787896","body_markdown":"You could solve this by taking all combinations of account balances, summing both, and comparing.\r\n\r\n[APOC Procedures][1] is a plugin for Neo4j that adds many useful procedures and functions. One of them, `apoc.coll.combinations()`, can help in this case, but due to a bug it wasn&#39;t included in 3.3.0.1 or 3.3.0.2 (the releases currently usable for Neo4j 3.3.x).\r\n\r\nIf you&#39;re using 3.2.x, or when the next release of APOC 3.3.x.x comes out, you can use the function to generate all possible combinations of list elements.\r\n\r\nHere&#39;s an example of use:\r\n\r\n    WITH [25, 2000, 43, 45, 2000, 65] as balances\r\n    WITH apoc.coll.combinations(balances, 2) as combos\r\n    RETURN [combo in combos WHERE combo[0] + combo[1] = 4000] as balancesSummingto4k\r\n\r\nIn your case, if you just want to check if a user&#39;s balances sum to a number, it may look something like this:\r\n\r\n    MATCH (:User{id:12345})-[:HAS_BALANCE]-&gt;(b:AccountBalance)\r\n    WITH apoc.coll.combinations(collect(b), 2) as combos\r\n    RETURN size([combo in combos WHERE combo[0].balance + combo[1].balance = 4000]) &lt;&gt; 0 as hasBalancesSummingTo4k\r\n\r\n  [1]: https://neo4j-contrib.github.io/neo4j-apoc-procedures/","link":"https://stackoverflow.com/questions/49787723/neo4j-get-match-sum-over-a-number-of-nodes/49787896#49787896","title":"Neo4j get match sum over a number of nodes"}],"owner":{"reputation":25,"user_id":2553716,"user_type":"registered","accept_rate":20,"profile_image":"https://graph.facebook.com/506657668/picture?type=large","display_name":"Kevin Cauchi","link":"https://stackoverflow.com/users/2553716/kevin-cauchi"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49787896,"answer_count":1,"score":0,"last_activity_date":1523506473,"creation_date":1523505119,"question_id":49787723,"share_link":"https://stackoverflow.com/q/49787723","body_markdown":"I&#39;ve got a question that I&#39;ve been struggling with.\r\n\r\nBasically what I&#39;m trying to achieve is to check if a certain sum can be found in a number of nodes.. for example.. i have account nodes with an attribute called balance. The data is as follows: 25, 2000, 43, 45, 2000, 65. \r\n\r\nI want to be able to check if this user has exactly 4000 over 2 accounts (for example.. could be more).\r\n\r\nNot sure if I explained myself well and I&#39;m new to the cypher world.\r\n\r\nI would appreciate any help.\r\n\r\nThanks","link":"https://stackoverflow.com/questions/49787723/neo4j-get-match-sum-over-a-number-of-nodes","title":"Neo4j get match sum over a number of nodes"},{"tags":["neo4j","query-optimization","nodes"],"comments":[{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523506727,"post_id":49787650,"comment_id":86590840,"link":"https://stackoverflow.com/questions/49787650/neo4j-which-is-better-to-store-element-as-a-property-of-user-or-as-a-node-re#comment86590840_49787650"},{"owner":{"reputation":13,"user_id":9455113,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Alex","link":"https://stackoverflow.com/users/9455113/alex"},"reply_to_user":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523507580,"post_id":49787650,"comment_id":86591089,"link":"https://stackoverflow.com/questions/49787650/neo4j-which-is-better-to-store-element-as-a-property-of-user-or-as-a-node-re#comment86591089_49787650"},{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523508225,"post_id":49787650,"comment_id":86591304,"link":"https://stackoverflow.com/questions/49787650/neo4j-which-is-better-to-store-element-as-a-property-of-user-or-as-a-node-re#comment86591304_49787650"},{"owner":{"reputation":13,"user_id":9455113,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Alex","link":"https://stackoverflow.com/users/9455113/alex"},"reply_to_user":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523513847,"post_id":49787650,"comment_id":86593406,"link":"https://stackoverflow.com/questions/49787650/neo4j-which-is-better-to-store-element-as-a-property-of-user-or-as-a-node-re#comment86593406_49787650"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523557684,"post_id":49787650,"comment_id":86621664,"link":"https://stackoverflow.com/questions/49787650/neo4j-which-is-better-to-store-element-as-a-property-of-user-or-as-a-node-re#comment86621664_49787650"}],"answers":[{"tags":[],"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523547656,"creation_date":1523547656,"answer_id":49800708,"question_id":49787650,"share_link":"https://stackoverflow.com/a/49800708","body_markdown":"Modeling your data as a graph is a difficult thing to pin down exactly. Typically, when it comes to NoSQL databases, the most important thing to consider is how you will be using your data, and to model it based on that.\r\n\r\nUsing the external node might run into performance problems, as Neo4J typically starts to run into issues during traversing as it approaches around 10,000 relationships in a single node. You will be well above that limit with an external &quot;Registered&quot; node; on the other hand as long as you are not anchoring your search to that node, it should be okay.\r\n\r\nNo matter which route you go, the query you described in the comments will likely anchor on (start with) the user, then traverse to who their friends are, and then for each friend, it will check whether it\r\n\r\nA. has the &quot;registered&quot; property set to &#39;true&#39;\r\nB. has a relationship to the &quot;Registered&quot; node.\r\n\r\nEach of these methods appears to have a similar execution time, and indexing on the &quot;registered&quot; property will have negligible impact because it is not being used as an anchor (presumably; you would have to `PROFILE` your query with both methods to find out for sure). So, like you mentioned, one might consider the space restraints.\r\n\r\nBesides that, there is not much difference from a performance analysis perspective between the two methods that I can see.","link":"https://stackoverflow.com/questions/49787650/neo4j-which-is-better-to-store-element-as-a-property-of-user-or-as-a-node-re/49800708#49800708","title":"Neo4J - Which is better to store element as a property of user or as a node &amp; relationship?"}],"owner":{"reputation":13,"user_id":9455113,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Alex","link":"https://stackoverflow.com/users/9455113/alex"},"comment_count":5,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1523547656,"creation_date":1523504624,"question_id":49787650,"share_link":"https://stackoverflow.com/q/49787650","body_markdown":"I got a problem when designing a graph model with million users. I need to store information that user is registered or non-register.\r\nAs I see we have 2 options:\r\n\r\n 1. Store a property &quot;**register = true/false**&quot; in each user node. So with 1 million user, we have 1 million properties &quot;**register**&quot;.\r\n 2. Store a **Registered** node then make relationship just for registered user to this node. So we have number of relationship equal exactly with the registered user.\r\n\r\nWhich option is better in performance searching also about minimum storage?\r\n\r\nThanks in advance,\r\n\r\n","link":"https://stackoverflow.com/questions/49787650/neo4j-which-is-better-to-store-element-as-a-property-of-user-or-as-a-node-re","title":"Neo4J - Which is better to store element as a property of user or as a node &amp; relationship?"},{"tags":["neo4j"],"comments":[{"owner":{"reputation":6,"user_id":9632859,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0eeb9575d8a14613872cf8e752cebe0a?s=128&d=identicon&r=PG&f=1","display_name":"Jin","link":"https://stackoverflow.com/users/9632859/jin"},"edited":false,"score":0,"creation_date":1523558179,"post_id":49784562,"comment_id":86621935,"link":"https://stackoverflow.com/questions/49784562/switch-database-file-in-runtime#comment86621935_49784562"}],"answers":[{"comments":[{"owner":{"reputation":6,"user_id":9632859,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0eeb9575d8a14613872cf8e752cebe0a?s=128&d=identicon&r=PG&f=1","display_name":"Jin","link":"https://stackoverflow.com/users/9632859/jin"},"edited":false,"score":0,"creation_date":1523557919,"post_id":49800915,"comment_id":86621779,"link":"https://stackoverflow.com/questions/49784562/switch-database-file-in-runtime/49800915#comment86621779_49800915"},{"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"reply_to_user":{"reputation":6,"user_id":9632859,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0eeb9575d8a14613872cf8e752cebe0a?s=128&d=identicon&r=PG&f=1","display_name":"Jin","link":"https://stackoverflow.com/users/9632859/jin"},"edited":false,"score":0,"creation_date":1523558068,"post_id":49800915,"comment_id":86621866,"link":"https://stackoverflow.com/questions/49784562/switch-database-file-in-runtime/49800915#comment86621866_49800915"}],"tags":[],"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523548231,"creation_date":1523548231,"answer_id":49800915,"question_id":49784562,"share_link":"https://stackoverflow.com/a/49800915","body_markdown":"Unless things with Neo4J are different, pulling the datastore files out from a running instance of any database is a very bad idea.\r\n\r\nTurn it off first, or you will interrupt the running process. Other than that, Neo4J does indeed support swapping out the graph.db directory; just be sure to bring down your instance before you start messing with its active filesystem.","link":"https://stackoverflow.com/questions/49784562/switch-database-file-in-runtime/49800915#49800915","title":"Switch database file in runtime"}],"owner":{"reputation":6,"user_id":9632859,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0eeb9575d8a14613872cf8e752cebe0a?s=128&d=identicon&r=PG&f=1","display_name":"Jin","link":"https://stackoverflow.com/users/9632859/jin"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1523548231,"creation_date":1523481199,"question_id":49784562,"share_link":"https://stackoverflow.com/q/49784562","body_markdown":"(This question is not about having multiple databases)\r\n\r\nHi,\r\n\r\nI have a use case to serve daily snapshot of our dataset through Neo4j. I am considering to build graph data daily in offline via import tool.\r\n\r\nThe reason of considering import tool is, using API or Cypher to do this will bring many problems such as long transaction, less scalable, less performant, unnecessary burden to running Neo4j instance. Also, using subgraph pattern (to load other subgraph, flip, and delete) is not desirable as it&#39;s very easy to make mistake as it&#39;s relying on good intention not good architecture.\r\n\r\nWith this &quot;build offline and push&quot; pattern, I am trying to use import tool to build graph data and switch graph file hopefully while Neo4j is running to remove downtime (Don&#39;t want to have multiple instance to achieve this as our deployment process is quite restrictive).\r\n\r\nI wonder if this case is being supported.\r\n\r\nThanks!","link":"https://stackoverflow.com/questions/49784562/switch-database-file-in-runtime","title":"Switch database file in runtime"},{"tags":["neo4j","tree","cypher"],"comments":[{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1523467770,"post_id":49779471,"comment_id":86577710,"link":"https://stackoverflow.com/questions/49779471/create-match-tree-structures-with-and-without-common-root-nodes-in-neo4j#comment86577710_49779471"}],"answers":[{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523485776,"creation_date":1523485776,"answer_id":49785308,"question_id":49779471,"share_link":"https://stackoverflow.com/a/49785308","body_markdown":"The better approach here is for each :Package node to include the full package name (in addition to its subpackage). That allows package &#39;a.b.c.d&#39; to be distinct from &#39;x.b.c.d&#39;.\r\n\r\nUnfortunately Neo4j doesn&#39;t have great support for text manipulation to break down the full packages at each level. You&#39;ll need APOC Procedures for this, and you&#39;ll need to jump through a few hoops to get here.\r\n\r\nThis query should do the trick\r\n\r\n    UNWIND [&#39;a.b.c.d&#39;, &#39;a.b.c.e&#39;,&#39;x.b.c.d&#39;] as pkg \r\n    WITH pkg, split(pkg, &#39;.&#39;) as packages\r\n    UNWIND range(1,size(packages)) as index\r\n    WITH packages[index - 1] as subpackage, apoc.text.join(packages[..index], &#39;.&#39;) as myPkg, apoc.text.join(packages[..index - 1], &#39;.&#39;) as parentPackage\r\n    WITH subpackage, myPkg, parentPackage\r\n    MERGE (package:Package{name:myPkg, subpackage:subpackage})\r\n    WITH package, parentPackage\r\n    WHERE parentPackage &lt;&gt; &#39;&#39;\r\n    MERGE (parent:Package{name:parentPackage})\r\n    MERGE (parent)&lt;-[:IN_PACKAGE]-(package)","link":"https://stackoverflow.com/questions/49779471/create-match-tree-structures-with-and-without-common-root-nodes-in-neo4j/49785308#49785308","title":"create/match tree structures with and without common root nodes in neo4j"}],"owner":{"reputation":14,"user_id":3822450,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9f8d1e60912737e03b2796bc98a43d34?s=128&d=identicon&r=PG","display_name":"jopek","link":"https://stackoverflow.com/users/3822450/jopek"},"comment_count":1,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1523485776,"creation_date":1523461852,"question_id":49779471,"share_link":"https://stackoverflow.com/q/49779471","body_markdown":"I am trying to recreate a tree structure (java packages in this case but could also be directory hierarchies or anything else) matching common starting nodes and diverging where the paths differ. Obviously same named  leaf nodes are not the same nodes.\r\n\r\nFor example: `a.b.c.d` will turn into `(a)-(b)-(c)-(d)`. also, `a.b.c` will turn into `(a)-(b)-(c)`: same base, therefore part of the path.\r\n\r\nI tried the following:\r\n\r\n    unwind [&#39;a.b.c.d&#39;, &#39;x.a.b.c&#39;] as pkg \r\n    with split(pkg, &#39;.&#39;) as packages \r\n    foreach (idx in range(0, size(packages) - 2) | \r\n      merge (pkg1:Package{name: packages[idx]}) \r\n      merge (pkg2:Package{name: packages[idx+1]}) \r\n      merge (pkg1)&lt;-[:IN_PACKAGE]-(pkg2) \r\n    ) \r\n\r\nthat works quite well so far until I add some structure such as `x.a.b` then its `a.b` nodes are matched with the `a.b` nodes of `a.b.c.d`. The result is currently: `(x)-(a)-(b)-(c)-(d)` while it should be two distinct paths: `(a)-(b)-(c)-(d)` and `(x)-(a)-(b)`. I see the problem, that is that each package is matched separately, not in context starting from the first node.\r\n\r\na path such as `(a)-(b)-(c)-(e)` and `(a)-(b)-(c)-(d)` should result in \r\n\r\n    (a)-(b)-(c)-(d)\r\n              \\-(e)\r\n\r\nso how does one match common starting nodes?","link":"https://stackoverflow.com/questions/49779471/create-match-tree-structures-with-and-without-common-root-nodes-in-neo4j","title":"create/match tree structures with and without common root nodes in neo4j"},{"tags":["javascript","d3.js","neo4j","d3-force-directed"],"owner":{"reputation":1,"user_id":8689473,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6eea10a6f26167bb39a3c5f1854f5b14?s=128&d=identicon&r=PG&f=1","display_name":"KASHI HIREMATH","link":"https://stackoverflow.com/users/8689473/kashi-hiremath"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":1,"down_vote_count":6,"up_vote_count":0,"closed_date":1523516049,"answer_count":0,"score":-6,"last_activity_date":1523458987,"creation_date":1523453416,"question_id":49776473,"share_link":"https://stackoverflow.com/q/49776473","body_markdown":"I am using JavaScript to render neo4j query result and stored in result variable. I want to store it in json file so that can use it for d3 J&#39;s for visualization with nodes and links.","link":"https://stackoverflow.com/questions/49776473/render-neo4j-result-into-json-file-using-javascript","closed_reason":"unclear what you&#39;re asking","title":"Render neo4j result into json file using JavaScript"},{"tags":["java","graph","neo4j","artificial-intelligence","heuristics"],"owner":{"reputation":1,"user_id":5483138,"user_type":"registered","profile_image":"https://graph.facebook.com/10206842583096926/picture?type=large","display_name":"Tommaso Fazio","link":"https://stackoverflow.com/users/5483138/tommaso-fazio"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1523474341,"answer_count":0,"score":-4,"last_activity_date":1523451493,"creation_date":1523451493,"question_id":49775806,"share_link":"https://stackoverflow.com/q/49775806","body_markdown":"I need some suggestion in order to explore a social network graph, in detail:\r\n\r\nMy software is connected to a social network graph (somethin linke linkedln, there are users connected with their working company, friends, events, school...) when a user_name is inserted in the app I have to produce a summarization of this user based on graph exploration.\r\nI was thinking to use some kind of heuristic function to decide which node to explore (using a limit in the maximum number of nodes that could be visited), \r\nfor example if the person to summarize is a Programmer I want to explore first connections like (has_developed, is_working_for, produce,...),\r\nwhile if the user is a Researcher  I have to explore first connections like (has_published, collaborate_with, studied,... ).\r\n\r\nCould someone suggest me someway to implement the heuristic function?\r\n\r\nFor example when a username is inserted first I could retrieve his job, based on this how could choose which node to explore first?\r\n\r\nIf it could be useful at present arch of this graph are not weighted.\r\nThe Web App is written in Java and the graph is saved in Neo4j.\r\n\r\nThanks for the support.","link":"https://stackoverflow.com/questions/49775806/which-heuristic-function-could-i-use-for-social-network-graph-exploration","closed_reason":"too broad","title":"Which heuristic function could I use for social network graph exploration?"},{"tags":["database-design","neo4j","graph-databases"],"comments":[{"owner":{"reputation":340,"user_id":526507,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c6ff7b71f769b33f154c9d2f3bc747a8?s=128&d=identicon&r=PG","display_name":"Rebecca Nelson","link":"https://stackoverflow.com/users/526507/rebecca-nelson"},"edited":false,"score":1,"creation_date":1523474006,"post_id":49775137,"comment_id":86580900,"link":"https://stackoverflow.com/questions/49775137/how-do-i-query-the-graph-database-to-retrieve-the-original-hierarchy#comment86580900_49775137"}],"owner":{"reputation":302,"user_id":2742218,"user_type":"registered","profile_image":"https://i.stack.imgur.com/X0NZ5.jpg?s=128&g=1","display_name":"Martin &#197;hlin","link":"https://stackoverflow.com/users/2742218/martin-%c3%85hlin"},"last_editor":{"reputation":302,"user_id":2742218,"user_type":"registered","profile_image":"https://i.stack.imgur.com/X0NZ5.jpg?s=128&g=1","display_name":"Martin &#197;hlin","link":"https://stackoverflow.com/users/2742218/martin-%c3%85hlin"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523522175,"creation_date":1523449599,"last_edit_date":1523522175,"question_id":49775137,"share_link":"https://stackoverflow.com/q/49775137","body_markdown":"I&#39;m trying to migrate from RDBMS to Neo4J, partly because of the many JOINs. The db consists of a &quot;Question&quot; that can have many &quot;Answers&quot;, everything can then be commented, upvoted, flagged or subscribed to (yes - it&#39;s much like SO).\r\n\r\nMigrating the data was pretty straight forward. Retrieving it back and parsing it into the original hierarchical structure seems to be a different story though. Here&#39;s the old RDBMS structure:\r\n\r\n    var questions = _context.Questions\r\n        .Include(q =&gt; q.Answers).ThenInclude(a =&gt; a.AnswerTags).ThenInclude(at =&gt; at.Tag)\r\n        .Include(q =&gt; q.Answers).ThenInclude(a =&gt; a.AnswerComments).ThenInclude(ac =&gt; ac.AnswerCommentFlags)\r\n        .Include(q =&gt; q.Answers).ThenInclude(a =&gt; a.AnswerFlags) //Only from current User\r\n        .Include(q =&gt; q.Answers).ThenInclude(a =&gt; a.AnswerUpvotes) //Only from current User\r\n        .Include(q =&gt; q.QuestionComments).ThenInclude(qc =&gt; qc.QuestionCommentFlags)\r\n        .Include(q =&gt; q.QuestionFlags) //Only from current User\r\n        .Include(q =&gt; q.QuestionUpvotes) //Only from current User\r\n        .Include(q =&gt; q.QuestionSubscriptions) //Only from current User\r\n        .ToList();\r\n\r\nAnd here&#39;s the graph from one of the questions:\r\nQuestion = purple, Answer = red, Comment = yellow, Tag = grey, User = pink\r\n[![Graph from RDBMS][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6nxIL.png\r\n\r\nIn the response to the frontend, I need all of this data (nodes and relations), neatly serialized into the original hierarchical object with the question at the root, preferable in a single query - or whatever is the fastest.\r\n\r\nIn particular I find it difficult to merge the data from the relations into the resulting structure, glueing it all together and avoiding cartesian products.\r\n\r\nWhat strategy should I use here?\r\n\r\n**UPDATE:**\r\n\r\nPerhaps it&#39;s best to split the data in two databases.\r\n\r\n 1. A document database with the hierarchical data, excluding user-actions. This will perform very quickly, and since most hits are from non-logged-in users, the user-actions will not be needed anyways.\r\n 2. A graph database with the user-actions. This will reflect the data-nodes and relations to users. Only the id of the data-nodes will be copied to this database to minimise redundancy. It will show any previous upvote-actions from the user in any of the nodes of the hierarchical data. It will also show interactions between users, since the site has a social network as well, on the side.\r\n\r\nIn the case when both databases must be accessed, they can execute the read in parallell, since both user-id and root-object-id are known from start. The backend then performs a simple merge, based on node ids from the two result sets.\r\n\r\nThis setup should also be easier to shard and scale.\r\n\r\nWhat would be the caveats be of this setup?","link":"https://stackoverflow.com/questions/49775137/how-do-i-query-the-graph-database-to-retrieve-the-original-hierarchy","title":"How do I query the graph database to retrieve the original hierarchy?"},{"tags":["csv","neo4j","nodes","labels","recommendation-engine"],"comments":[{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"edited":false,"score":0,"creation_date":1523449161,"post_id":49773553,"comment_id":86564651,"link":"https://stackoverflow.com/questions/49773553/how-to-combine-the-nodes-in-neo4j-database-which-have-same-name-and-same-labels#comment86564651_49773553"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1523477840,"post_id":49773553,"comment_id":86582956,"link":"https://stackoverflow.com/questions/49773553/how-to-combine-the-nodes-in-neo4j-database-which-have-same-name-and-same-labels#comment86582956_49773553"}],"owner":{"reputation":1,"user_id":9630008,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0e58d7b7634258a5c72f439f734d96a9?s=128&d=identicon&r=PG&f=1","display_name":"Rishabh U","link":"https://stackoverflow.com/users/9630008/rishabh-u"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523444976,"creation_date":1523444976,"question_id":49773553,"share_link":"https://stackoverflow.com/q/49773553","body_markdown":"As I&#39;m making a recommendation engine which has 2 nodes Drug and Disease. Drug node has various drug elements loaded through a CSV and i want to combine those drugs which have same name and same labels and then mapped to the disease node. so can anyone let me know how to combine the elements of a node having same name. ","link":"https://stackoverflow.com/questions/49773553/how-to-combine-the-nodes-in-neo4j-database-which-have-same-name-and-same-labels","title":"How to combine the nodes in neo4j database which have same name and same labels?"},{"tags":["powershell","neo4j"],"owner":{"reputation":394,"user_id":3940979,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/f6104efe52619e157ea5bc08cfb095eb?s=128&d=identicon&r=PG","display_name":"TsTeaTime","link":"https://stackoverflow.com/users/3940979/tsteatime"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523435891,"creation_date":1523435891,"question_id":49770374,"share_link":"https://stackoverflow.com/q/49770374","body_markdown":"I am attempting to start the Neo4J service but I am receiving the following error. I have identified that the error is coming from the &quot;Start-Neo4jServer.ps1&quot; file. I am using the Neo4j version 3.3.3 on a Windows 2012 server. I am not sure how to debug the start-service or how to identify what is causing this error.\r\n\r\n    Get-Service neo4j\r\n    \r\n    $result = Start-Service -Name neo4j -PassThru -ErrorAction Stop\r\n    $result\r\n    \r\n    \r\n    Status   Name               DisplayName                           \r\n    ------   ----               -----------                           \r\n    Stopped  neo4j              Neo4j Graph Database - neo4j          \r\n    Start-Service : Failed to start service &#39;Neo4j Graph Database - neo4j (neo4j)&#39;.\r\n    At line:4 char:11\r\n    + $result = Start-Service -Name neo4j -PassThru -ErrorAction Stop\r\n    +           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n        + CategoryInfo          : OpenError: (System.ServiceProcess.ServiceController:ServiceController) [Start-Service], ServiceCommandException\r\n        + FullyQualifiedErrorId : StartServiceFailed,Microsoft.PowerShell.Commands.StartServiceCommand\r\n\r\nIf i attempt to start neo4j through the console option then i have no issue:\r\n\r\n    cd /d D:/neo4j\r\n    bin\\neo4j console\r\n\r\n","link":"https://stackoverflow.com/questions/49770374/neo4j-windows-start-service-error-failed-to-start-service-neo4j-graph-database","title":"Neo4J Windows Start-Service Error Failed to start service &#39;Neo4j Graph Database - neo4j (neo4j)&#39;"},{"tags":["java","neo4j"],"answers":[{"tags":[],"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"last_editor":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523390818,"last_edit_date":1523390818,"creation_date":1523385766,"answer_id":49760868,"question_id":49758091,"share_link":"https://stackoverflow.com/a/49760868","body_markdown":"With `GraphDatabaseFactory` you can only create an embedded database. Because it&#39;s an embedded mode, you have access to the JAVA API of Neo4j, but this one can only used on the server side ... not remotely.\r\n\r\nIf you want to connect to a remote database, you should use the java bolt driver, and so to rewrite your query in Cypher (it&#39;s the good way to do now).\r\n\r\nIf you have some use-cases that really need  the Neo4j Java API (like the traversal API), you can create a Cypher procedures, and call it in a cypher query.","link":"https://stackoverflow.com/questions/49758091/connect-neo4j-server-through-java-neo4j-api-using-ip-address/49760868#49760868","title":"Connect neo4j server through java neo4j api using ip address"}],"owner":{"reputation":11,"user_id":7116176,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/66a189d955a6cf761caace93e20a4c4c?s=128&d=identicon&r=PG&f=1","display_name":"TechBomb","link":"https://stackoverflow.com/users/7116176/techbomb"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1523390818,"creation_date":1523375823,"question_id":49758091,"share_link":"https://stackoverflow.com/q/49758091","body_markdown":"I am using java neo4j api for connecting to neo4j and perform operation on it using.\r\n\r\nGraphDatabaseFactory gdf=new GraphDatabaseFactory();        \r\nGraphDatabaseService gds = gdf.newEmbeddedDatabase(new File(&quot;__path for neo4j databases__/graph.db&quot;));\r\n\r\nI am able to do all kind of operation but now i want to connect through IP address i.e. instead of filepath i want to connect neo4j on different network but i am unable to see any option regarding this.\r\n\r\nEvery search reult shows use of graphdatabase and driver for connecting to network but for that exection query format is changed i.e. i have to write in cypher language.\r\nBut I have already written a code which is working fine in my system using GraphDatabaseService object and org.neo4j.graphdb i.e. neo4j java rest api.\r\n\r\nAny how can I connect to ip address through GraphDatabaseService. If no then how can i connect such that in the end, i get GraphDatabaseService object as I have written complete code for my project and there is no time to change it.\r\n\r\nI have already hosted neo4j server on another network and enabled all the listening port.\r\n\r\n","link":"https://stackoverflow.com/questions/49758091/connect-neo4j-server-through-java-neo4j-api-using-ip-address","title":"Connect neo4j server through java neo4j api using ip address"},{"tags":["php","neo4j","neo4j-ogm"],"comments":[{"owner":{"reputation":13979,"user_id":2662355,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=128&d=identicon&r=PG","display_name":"Christophe Willemsen","link":"https://stackoverflow.com/users/2662355/christophe-willemsen"},"edited":false,"score":0,"creation_date":1523393373,"post_id":49758019,"comment_id":86540796,"link":"https://stackoverflow.com/questions/49758019/connection-refuse-on-neo4j-silex#comment86540796_49758019"},{"owner":{"reputation":1,"user_id":9301998,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oPf4N.jpg?s=128&g=1","display_name":"Jaime Roman","link":"https://stackoverflow.com/users/9301998/jaime-roman"},"reply_to_user":{"reputation":13979,"user_id":2662355,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6ea0a9d988f145b0e666dfdd96374736?s=128&d=identicon&r=PG","display_name":"Christophe Willemsen","link":"https://stackoverflow.com/users/2662355/christophe-willemsen"},"edited":false,"score":0,"creation_date":1523478676,"post_id":49758019,"comment_id":86583403,"link":"https://stackoverflow.com/questions/49758019/connection-refuse-on-neo4j-silex#comment86583403_49758019"}],"answers":[{"tags":[],"owner":{"reputation":1,"user_id":9301998,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oPf4N.jpg?s=128&g=1","display_name":"Jaime Roman","link":"https://stackoverflow.com/users/9301998/jaime-roman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523549280,"creation_date":1523549280,"answer_id":49801255,"question_id":49758019,"share_link":"https://stackoverflow.com/a/49801255","body_markdown":"I forgot a detail that is crucial, my php code was running from a Docker container, therefore, the address to consume the Neo4j server could not be **localhost**, it had to be, **172.17.0.1**, now it works well, I leave this here for someone else to use it. :)","link":"https://stackoverflow.com/questions/49758019/connection-refuse-on-neo4j-silex/49801255#49801255","title":"connection refuse on neo4j-silex"}],"owner":{"reputation":1,"user_id":9301998,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oPf4N.jpg?s=128&g=1","display_name":"Jaime Roman","link":"https://stackoverflow.com/users/9301998/jaime-roman"},"last_editor":{"reputation":4643,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1523549280,"creation_date":1523375556,"last_edit_date":1523378262,"question_id":49758019,"share_link":"https://stackoverflow.com/q/49758019","body_markdown":"I&#39;m using neo4j, 3.3.4, is newly installed with the default configuration, I can access from my browser, when I try to access from my application silex returns: **cURL error 7: Failed to connect to localhost port 7474: Connection refused**. I have this in my composer file: \r\n\r\n    &quot;graphaware/neo4j-php-client&quot;: &quot;^4.8&quot;,\r\n    &quot;kbrabrand/silex-neo4j&quot;: &quot;^2.0&quot;\r\n\r\nIn the AppServiceProvider file\r\n\r\n    $app-&gt;register(new Neo4jServiceProvider(), array(\r\n        &#39;neo4j.transport&#39; =&gt; &#39;localhost&#39;, // Hostname as string, or Everyman\\Neo4j\\Transport object\r\n        &#39;neo4j.port&#39;      =&gt; 7474,        // Port number, ignored if transport is not a string\r\n    ));\r\n  }\r\n\r\nThis is the Controller code:\r\n\r\n    $client = ClientBuilder::create()\r\n                -&gt;addConnection(&#39;default&#39;, &#39;http://neo4j:1234567@localhost:7474&#39;)// Example for HTTP connection configuration (port is optional)\r\n                -&gt;build();\r\n            $query = &#39;MATCH (n:Person) RETURN n&#39;;\r\n            $result = $client-&gt;run($query);\r\n        var_dump($result);\r\n","link":"https://stackoverflow.com/questions/49758019/connection-refuse-on-neo4j-silex","title":"connection refuse on neo4j-silex"},{"tags":["neo4j","spring-data-neo4j"],"owner":{"reputation":6,"user_id":9156592,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b700f356e67ecbe912c0facba1609b40?s=128&d=identicon&r=PG&f=1","display_name":"Daniel Lavric","link":"https://stackoverflow.com/users/9156592/daniel-lavric"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1523374742,"creation_date":1523374742,"question_id":49757781,"share_link":"https://stackoverflow.com/q/49757781","body_markdown":"I&#39;m using spring and spring-neo4j-data and i try to fetch with the entity also the relations.\r\n\r\nI have File Entity\r\n\r\n    @NodeEntity(label=&quot;File&quot;)\r\n    @NoArgsConstructor\r\n    public class FileNeo4jEntity {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Getter\r\n    @Setter\r\n    private Long id;\r\n\r\n    @Getter\r\n    @Setter\r\n    private String name;\r\n\r\n    @Getter\r\n    @Setter\r\n    private String path;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Relationship(type = &quot;HAS_PROPERTY&quot;,direction = Relationship.INCOMING)\r\n    private List&lt;HasPropertyNeo4jRelationEntity&gt; properties;\r\n\r\n    public void addProperty(HasPropertyNeo4jRelationEntity relation) {\r\n        if (this.properties == null) {\r\n            this.properties = new ArrayList&lt;&gt;();\r\n        }\r\n        this.properties.add(relation);\r\n    }\r\n\r\nThe Relation entity\r\n\r\n    @RelationshipEntity(type=&quot;HAS_PROPERTY&quot;)\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor(access = AccessLevel.PACKAGE)\r\n    public class HasPropertyNeo4jRelationEntity {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long relationshipId;\r\n\r\n    @Getter\r\n    @Setter\r\n    @StartNode\r\n    private FileNeo4jEntity file;\r\n\r\n    @Getter\r\n    @Setter\r\n    @EndNode\r\n    private PropertyNeo4jEntity property;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Property\r\n    int value;\r\n    }\r\n\r\nAnd the Property Entity\r\n\r\n    @AllArgsConstructor(access = AccessLevel.PACKAGE)\r\n    @NoArgsConstructor\r\n    @NodeEntity(label = &quot;Property&quot;)\r\n    public class PropertyNeo4jEntity{\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Getter\r\n    @Setter\r\n    private Long id;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Relationship(type = &quot;HAS_PROPERTY&quot;)\r\n    List&lt;FileNeo4jEntity&gt; files;\r\n\r\n    @Getter\r\n    @Setter\r\n    private String categoryName;\r\n\r\n    }\r\n\r\nWhen i fetch from repository a property by categoryName i also get the files List populated.\r\nWhen i fetch from repository a file by Name (doesn&#39;t really matter by what) the properties list is always null. I even treid something like this but no effect \r\n\r\n    @Query(&quot;MATCH (f:File {name: {0} })&lt;-[r:HAS_PROPERTY]-(p) RETURN f,r,p&quot;)\r\n    FileNeo4jEntity findByNameWithRelations(String name);\r\n\r\nHow could i get also the properties list also populated when i fetch a file entity?","link":"https://stackoverflow.com/questions/49757781/getting-rich-relation-list-populated-when-fetching-entity-neo4j-spring","title":"Getting rich relation list populated when fetching entity neo4j spring"},{"tags":["database","neo4j","cypher"],"comments":[{"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523369799,"post_id":49755668,"comment_id":86526836,"link":"https://stackoverflow.com/questions/49755668/limiting-amount-of-common-nodes-in-a-relationship-neo4j#comment86526836_49755668"},{"owner":{"reputation":69,"user_id":1449109,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/fd297c00f72f11df1f6002f9cf8e3346?s=128&d=identicon&r=PG","display_name":"user1449109","link":"https://stackoverflow.com/users/1449109/user1449109"},"reply_to_user":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523375059,"post_id":49755668,"comment_id":86530634,"link":"https://stackoverflow.com/questions/49755668/limiting-amount-of-common-nodes-in-a-relationship-neo4j#comment86530634_49755668"}],"answers":[{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1523385552,"creation_date":1523385552,"answer_id":49760804,"question_id":49755668,"share_link":"https://stackoverflow.com/a/49760804","body_markdown":"This knowledge base article goes over different ways to [limit match results per row][1].\r\n\r\nFor a non-APOC approach you can get the slice of the collection of people who liked the movie:\r\n\r\n    MATCH (p:Person)-[:LIKES]-&gt;(m:Movie)\r\n    WHERE\r\n    p.age &lt; 30\r\n    p.gender = &quot;Male&quot;\r\n    RETURN m, collect(p)[..2] as peopleWhoLiked\r\n\r\nIf you want a separate row per person, then UNWIND the `peopleWhoLiked` list before the return.\r\n\r\nFor the second approach, you&#39;ll need APOC Procedures.\r\n\r\nIn order to use LIMIT, you&#39;ll need to first match on all movies, then perform the limited match to :Person nodes using `apoc.cypher.run()`.\r\n\r\n  [1]: https://neo4j.com/developer/kb/limiting-match-results-per-row/","link":"https://stackoverflow.com/questions/49755668/limiting-amount-of-common-nodes-in-a-relationship-neo4j/49760804#49760804","title":"Limiting amount of common nodes in a relationship - Neo4j"},{"comments":[{"owner":{"reputation":69,"user_id":1449109,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/fd297c00f72f11df1f6002f9cf8e3346?s=128&d=identicon&r=PG","display_name":"user1449109","link":"https://stackoverflow.com/users/1449109/user1449109"},"edited":false,"score":0,"creation_date":1523445027,"post_id":49763374,"comment_id":86561859,"link":"https://stackoverflow.com/questions/49755668/limiting-amount-of-common-nodes-in-a-relationship-neo4j/49763374#comment86561859_49763374"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523397120,"creation_date":1523397120,"answer_id":49763374,"question_id":49755668,"share_link":"https://stackoverflow.com/a/49763374","body_markdown":"To get all movies that have exactly two (under-30 male) likers:\r\n\r\n    MATCH (p:Person)-[:LIKES]-&gt;(m:Movie)\r\n    WHERE\r\n      p.age &lt; 30 AND\r\n      p.gender = &quot;Male&quot;\r\n    WITH m, COLLECT(p) AS likers\r\n    WHERE SIZE(likers) = 2\r\n    RETURN m, likers;\r\n\r\n","link":"https://stackoverflow.com/questions/49755668/limiting-amount-of-common-nodes-in-a-relationship-neo4j/49763374#49763374","title":"Limiting amount of common nodes in a relationship - Neo4j"}],"owner":{"reputation":69,"user_id":1449109,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/fd297c00f72f11df1f6002f9cf8e3346?s=128&d=identicon&r=PG","display_name":"user1449109","link":"https://stackoverflow.com/users/1449109/user1449109"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49760804,"answer_count":2,"score":0,"last_activity_date":1523397120,"creation_date":1523368940,"question_id":49755668,"share_link":"https://stackoverflow.com/q/49755668","body_markdown":"Say I have a nodes person and movie with a relation of [likes]. I am trying to be able to limit the amount of persons that like the same movie without limiting my results to only include 1 movie.\r\n\r\nFor example:\r\n\r\n        MATCH (p:Person)-[LIKES]-&gt;(m:Movie)\r\n        WHERE\r\n        p.age &lt; 30\r\n        p.gender = &quot;Male&quot;\r\n        RETURN p,m\r\n\r\nSo in the query above I would like to get all the results but filter them so that only 2 Persons will like the same movie.\r\n\r\nIs this possible?","link":"https://stackoverflow.com/questions/49755668/limiting-amount-of-common-nodes-in-a-relationship-neo4j","title":"Limiting amount of common nodes in a relationship - Neo4j"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":8,"user_id":8289519,"user_type":"registered","profile_image":"https://graph.facebook.com/138260016756528/picture?type=large","display_name":"Slavko Rihtarič","link":"https://stackoverflow.com/users/8289519/slavko-rihtari%c4%8d"},"edited":false,"score":0,"creation_date":1523444175,"post_id":49755852,"comment_id":86561287,"link":"https://stackoverflow.com/questions/49755307/neo4j-cypher-query-not-working-as-expected/49755852#comment86561287_49755852"}],"tags":[],"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523369458,"creation_date":1523369458,"answer_id":49755852,"question_id":49755307,"share_link":"https://stackoverflow.com/a/49755852","body_markdown":"Can you try this query :\r\n\r\n    MATCH \r\n         (:Year{value:2018})-[:CONTAINS]-&gt;(:Month {value:10})-[:CONTAINS]-&gt;(day:Day {value:10}),\r\n    \t(employee:Employee)-[:OCCUPIES]-&gt;(o:Occupancy),\r\n        (o)-[:OCCUPIES]-&gt;(project:Project{uuid:&quot;ed409308-3202-495f-b834-ef1e8d5039d6&quot;}),\r\n    \t(o)-[:START]-&gt;(start:Day),\r\n        p=shortestpath((start)-[:NEXT*]-&gt;(day))\r\n    WHERE all(day IN NODES(p) WHERE NOT (o)-[:END]-&gt;(day))\r\n    RETURN employee\r\n\r\nThe trick here is that I search the shortestpath between the starting day, and the day you give to the query. For each node on this path, I&#39;m checking that is there is no `END` relationship to the `Occupation`.\r\n\r\nSo normally, you should only have `Occupation` nodes you are searching.","link":"https://stackoverflow.com/questions/49755307/neo4j-cypher-query-not-working-as-expected/49755852#49755852","title":"Neo4j Cypher query not working as expected"},{"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523392378,"last_edit_date":1523392378,"creation_date":1523391895,"answer_id":49762317,"question_id":49755307,"share_link":"https://stackoverflow.com/a/49762317","body_markdown":"1. The following clause matches all occupancies that started *up to a year before* the desired start date (including the desired start date). This is probably why all employees were returned.\r\n\r\n        MATCH (o)-[:START]-(start:Day)-[:NEXT*0..365]-&gt;(day)\r\n\r\n  If you wanted to find occupancies that started on a specific `day`, you should have used this:\r\n\r\n        MATCH (o)-[:START]-(day)\r\n\r\n  Or, if you actually wanted to find occupancies that started on a specific `day` or within a year *after* that date, you should have used the following (I will assume this is what you wanted):\r\n\r\n        MATCH (o)-[:START]-(start:Day)&lt;-[:NEXT*0..365]-(day)\r\n\r\n2. Your `OPTIONAL MATCH` clauses currently have no effect at all on whether an `employee` is returned. (Also, those clauses only match `end` dates that are within 300 days after the start `day` -- I will assume this is a requirement of your use case even though it is not stated in your question.)\r\n\r\nThe following query tries to address both issues, and may work for you:\r\n\r\n\tMATCH (employee:Employee)-[:OCCUPIES]-&gt;(o:Occupancy)-[:OCCUPIES]-&gt;(project:Project{uuid:&quot;ed409308-3202-495f-b834-ef1e8d5039d6&quot;})\r\n\tMATCH (:Year{value:2018})-[:CONTAINS]-&gt;(:Month {value:10})-[:CONTAINS]-&gt;(day:Day {value:10})\r\n    MATCH (o)-[:START]-(start:Day)&lt;-[:NEXT*0..365]-(day)\r\n\tOPTIONAL MATCH (o)-[:END]-(end:Day)\r\n\tOPTIONAL MATCH p=(day)-[:NEXT*0..300]-&gt;(end)\r\n\tRETURN CASE WHEN p IS NULL THEN employee ELSE NULL END AS employee;\r\n\r\nNote: All the `NEXT` relationship hops needed, per candidate employee, to satisfy this query (up to 665) seem expensive. You may want to come up with a more efficient data model (but if you need help with that, it would require a new question).","link":"https://stackoverflow.com/questions/49755307/neo4j-cypher-query-not-working-as-expected/49762317#49762317","title":"Neo4j Cypher query not working as expected"},{"tags":[],"owner":{"reputation":8,"user_id":8289519,"user_type":"registered","profile_image":"https://graph.facebook.com/138260016756528/picture?type=large","display_name":"Slavko Rihtarič","link":"https://stackoverflow.com/users/8289519/slavko-rihtari%c4%8d"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523444020,"creation_date":1523444020,"answer_id":49773197,"question_id":49755307,"share_link":"https://stackoverflow.com/a/49773197","body_markdown":"Thank for your answers. It helped me allot. The query that i wrote based on your help:\r\n\r\n    match(:Year{value:{y}})-[:CONTAINS]-&gt;(:Month {value:{m}})-[:CONTAINS]-&gt;(day:Day {value:{d}})\r\n                with day\r\n                match (employee:Employee)-[:OCCUPIES]-&gt;(o:Occupancy)-[:OCCUPIES]-&gt;(project:Project{uuid:{project}})\r\n                with day, employee, project, o\r\n                match (o)-[:START]-&gt;(start:Day)\r\n                with day, employee, project, o, start\r\n                match p=shortestpath((start)-[:NEXT*0..365]-&gt;(day))\r\n                with day, employee, project, o, start, p\r\n                WHERE all(day IN NODES(p) WHERE NOT (o)-[:END]-&gt;(day))\r\n                optional match(employee)-[:WORKS]-&gt;(dayshift:Shift{shifttype:0})-[:WORKDAY]-&gt;(day)  \r\n                optional  match(dayshift)-[:WORKS]-&gt;(project)\r\n                optional match(employee)-[:WORKS]-&gt;(nightshift:Shift{shifttype:1})-[:WORKDAY]-&gt;(day)  \r\n                optional  match(nightshift)-[:WORKS]-&gt;(project)            \r\n                return employee, dayshift, nightshift\r\n\r\nBut i have one more problem. If the Occupancy starts on lets say 1.april.2018 and ends 1.april.2018 so it was one day long. for this case the query above does not work because it has a END relationship. \r\n\r\nAny suggestion how to solve that?\r\n\r\n","link":"https://stackoverflow.com/questions/49755307/neo4j-cypher-query-not-working-as-expected/49773197#49773197","title":"Neo4j Cypher query not working as expected"}],"owner":{"reputation":8,"user_id":8289519,"user_type":"registered","profile_image":"https://graph.facebook.com/138260016756528/picture?type=large","display_name":"Slavko Rihtarič","link":"https://stackoverflow.com/users/8289519/slavko-rihtari%c4%8d"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1523444020,"creation_date":1523367933,"question_id":49755307,"share_link":"https://stackoverflow.com/q/49755307","body_markdown":"I need a bit of help. I have a [graph][1]. It&#39;s for project management app\r\n\r\nThe Day node is represented as [follows][2].\r\nThe Occupancy node has a START and an optional END relationship to the Day node and the Employee node has the OCCUPIES relationship to the Occupancy node. the Occupancy node has the OCCUPIES relationship to the Project node.\r\n\r\nSo my question is: get all the employees that occupied the project on a specific date.\r\n\r\nThe query that i have so far:\r\n\r\n    match (employee:Employee)-[:OCCUPIES]-&gt;(o:Occupancy)-[:OCCUPIES]-&gt;(project:Project{uuid:&quot;ed409308-3202-495f-b834-ef1e8d5039d6&quot;})\r\n    with employee, o\r\n    match(:Year{value:2018})-[:CONTAINS]-&gt;(:Month {value:10})-[:CONTAINS]-&gt;(day:Day {value:10})\r\n    with day, employee, o\r\n    match(o)-[:START]-(start:Day)-[:NEXT*0..365]-&gt;(day)\r\n    optional match(o)-[:END]-(end:Day)\r\n    optional match(day)-[:NEXT*0..300]-&gt;(end)\r\n    return employee\r\n\r\nBut that does not work. It gives me all the employees regardless if theirs occupancy ended before the date. Example in the graph above all the occupancies start on the 10.april.2018, half of them end on 1.june.2018. In the query i got the date 10.october.2018. \r\n\r\nCan somebody help me with this?\r\n\r\nregards Slavko\r\n\r\n  [1]: https://i.stack.imgur.com/5zUjX.png\r\n  [2]: https://i.stack.imgur.com/E9jtK.png","link":"https://stackoverflow.com/questions/49755307/neo4j-cypher-query-not-working-as-expected","title":"Neo4j Cypher query not working as expected"},{"tags":["json","neo4j","f#","json.net","neo4jclient"],"comments":[{"owner":{"reputation":4643,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"edited":false,"score":0,"creation_date":1523435037,"post_id":49748842,"comment_id":86554990,"link":"https://stackoverflow.com/questions/49748842/how-to-implement-where-criteria-with-neo4jclient-f#comment86554990_49748842"},{"owner":{"reputation":4643,"user_id":2266,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/aa64f5e61bb8cbcc9d10372256580364?s=128&d=identicon&r=PG","display_name":"Chris Skardon","link":"https://stackoverflow.com/users/2266/chris-skardon"},"edited":false,"score":2,"creation_date":1523442831,"post_id":49748842,"comment_id":86560397,"link":"https://stackoverflow.com/questions/49748842/how-to-implement-where-criteria-with-neo4jclient-f#comment86560397_49748842"}],"owner":{"reputation":33,"user_id":3999621,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5f78368d0489d1c2811a8d7c20c6da7e?s=128&d=identicon&r=PG&f=1","display_name":"AnotherNewbie","link":"https://stackoverflow.com/users/3999621/anothernewbie"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1523348819,"creation_date":1523348819,"question_id":49748842,"share_link":"https://stackoverflow.com/q/49748842","body_markdown":"I try to query count related nodes of a specific one with Neo4jClient in F#. But keep receiving the following error:\r\n\r\nSystem.MissingMethodException: Method not found: &#39;System.Type Newtonsoft.Json.JsonContainerAttribute.get_NamingStrategyType()&#39;.\r\n\r\nI just cannot find the answer in documentation of the packages. Filtering with the lambda function works in the &quot;select&quot; stage but not in &quot;where&quot;.\r\n\r\n\r\n\r\n    [&lt;CLIMutable&gt;]\r\n    type User = { id : int; followers : int }\r\n\r\n    let tweetsCounted = \r\n      client.Cypher\r\n        .Match(&quot;(u:User)-[:POSTED]-&gt;(t:Tweet)&quot;)\r\n        .Where(fun u -&gt; u.followers = 1000)\r\n        .Return(fun (u : Cypher.ICypherResultItem) (t : Cypher.ICypherResultItem) -&gt; u.As&lt;User&gt;(), t.Count())\r\n        .Results\r\n        .Select(fun (x, y) -&gt; x.id, y)","link":"https://stackoverflow.com/questions/49748842/how-to-implement-where-criteria-with-neo4jclient-f","title":"How to implement where criteria with Neo4jClient F#?"},{"tags":["neo4j"],"owner":{"reputation":1,"user_id":9623069,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Sachin Ambone","link":"https://stackoverflow.com/users/9623069/sachin-ambone"},"last_editor":{"reputation":6793,"user_id":6296561,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/TD1jl.jpg?s=128&g=1","display_name":"Zoe","link":"https://stackoverflow.com/users/6296561/zoe"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1523347168,"answer_count":0,"score":0,"last_activity_date":1523342011,"creation_date":1523340764,"last_edit_date":1523342011,"question_id":49746533,"share_link":"https://stackoverflow.com/q/49746533","body_markdown":"The problem is my Neo4j desktop showing offline and I&#39;m unable to log in.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KZnwt.png","link":"https://stackoverflow.com/questions/49746533/unable-to-login-in-neo4j-desktop","closed_reason":"off-topic","title":"Unable to login In Neo4j Desktop"},{"tags":["neo4j"],"comments":[{"owner":{"reputation":97,"user_id":4465537,"user_type":"registered","profile_image":"https://graph.facebook.com/1109919281/picture?type=large","display_name":"Mark Davydov","link":"https://stackoverflow.com/users/4465537/mark-davydov"},"edited":false,"score":1,"creation_date":1523342383,"post_id":49746285,"comment_id":86508142,"link":"https://stackoverflow.com/questions/49746285/neo4j-copied-database-files-without-permissions-and-now-cant-use-them#comment86508142_49746285"},{"owner":{"reputation":423,"user_id":3204413,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/39dab087db256754ba1e5040a0ef67c6?s=128&d=identicon&r=PG&f=1","display_name":"nortoon","link":"https://stackoverflow.com/users/3204413/nortoon"},"edited":false,"score":0,"creation_date":1523372522,"post_id":49746285,"comment_id":86528907,"link":"https://stackoverflow.com/questions/49746285/neo4j-copied-database-files-without-permissions-and-now-cant-use-them#comment86528907_49746285"},{"owner":{"reputation":1,"user_id":7412939,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uv2TVrsCd30/AAAAAAAAAAI/AAAAAAAALTM/lyg2bLk4sBA/photo.jpg?sz=128","display_name":"Doug Lapsley","link":"https://stackoverflow.com/users/7412939/doug-lapsley"},"edited":false,"score":0,"creation_date":1523374720,"post_id":49746285,"comment_id":86530410,"link":"https://stackoverflow.com/questions/49746285/neo4j-copied-database-files-without-permissions-and-now-cant-use-them#comment86530410_49746285"}],"owner":{"reputation":1,"user_id":7412939,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-uv2TVrsCd30/AAAAAAAAAAI/AAAAAAAALTM/lyg2bLk4sBA/photo.jpg?sz=128","display_name":"Doug Lapsley","link":"https://stackoverflow.com/users/7412939/doug-lapsley"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523339702,"creation_date":1523339702,"question_id":49746285,"share_link":"https://stackoverflow.com/q/49746285","body_markdown":"I have a Neo4J database (Version: 3.3.1) running on Ubuntu 16.04.\r\n\r\nI backed up the database files by copying and pasting the folder that contains them.\r\n\r\nI then screwed up the original database and went to restore the backup by deleting the screwed up one and copying the backup to the same location as the original one.\r\n\r\nRunning the DB fails and I can only think that this is because the original &quot;databases&quot; and &quot;dbms&quot; folders belong to permissions group &quot;neo4j&quot;.  The copies I made don&#39;t carry these permissions because I stupidly copied the folder with a copy paste rather than using &quot;sudo cp -rp&quot; which would have carried their permissions and therefore worked (I tested that).\r\n\r\nI tried &quot;chown :neo4j databases&quot; and &quot;chown :neo4j dbms&quot; to change the group for these folders to &quot;neo4j&quot; as per the original but it didn&#39;t work.  \r\n\r\nI don&#39;t seem to get an error in the error log at &quot;/var/log/neo4j/debug.log&quot; either.\r\n\r\nAny idea what I need to do to my backup folder to get it working please?\r\n\r\nThanks very much!","link":"https://stackoverflow.com/questions/49746285/neo4j-copied-database-files-without-permissions-and-now-cant-use-them","title":"Neo4j copied database files without permissions and now can&#39;t use them"},{"tags":["spring-boot","neo4j","neo4j-ogm"],"owner":{"reputation":1,"user_id":5417965,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-DcBNsQJawZY/AAAAAAAAAAI/AAAAAAAAABw/Qi-E06xIqxY/photo.jpg?sz=128","display_name":"Sunil Muttepawar","link":"https://stackoverflow.com/users/5417965/sunil-muttepawar"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523338719,"creation_date":1523338719,"question_id":49746068,"share_link":"https://stackoverflow.com/q/49746068","body_markdown":"In my Spring-Boot application using Neo4j database and connecting it with org.neo4j.ogm.drivers.bolt.driver.BoltDriver\r\n\r\nI have mocked the data in test cases and its working properly when connected to database. But test cases getting failed when offline or Neo4j server is down, showing following exception.\r\n\r\n\r\n\r\n    springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.transaction.CannotCreateTransactionException: Could not open Neo4j Session for transaction; nested exception is org.neo4j.driver.v1.exceptions.ServiceUnavailableException: Unable to process request: Network is unreachable\r\n\tat sun.nio.ch.Net.connect0(Native Method)\r\n\tat sun.nio.ch.Net.connect(Net.java:454)\r\n\tat sun.nio.ch.Net.connect(Net.java:446)\r\n\tat sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:648)\r\n\tat sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:102)\r\n\tat org.neo4j.driver.internal.net.ChannelFactory.connect(ChannelFactory.java:64)\r\n\tat org.neo4j.driver.internal.net.ChannelFactory.create(ChannelFactory.java:41)\r\n\tat org.neo4j.driver.internal.net.SocketClient.start(SocketClient.java:124)\r\n\tat org.neo4j.driver.internal.net.SocketConnection.startSocketClient(SocketConnection.java:92)\r\n\tat org.neo4j.driver.internal.net.SocketConnection.&lt;init&gt;(SocketConnection.java:67)\r\n\tat org.neo4j.driver.internal.net.SocketConnector.createConnection(SocketConnector.java:77)\r\n\tat org.neo4j.driver.internal.net.SocketConnector.connect(SocketConnector.java:50)\r\n\tat org.neo4j.driver.internal.net.pooling.SocketConnectionPool$ConnectionSupplier.get(SocketConnectionPool.java:204)\r\n\tat org.neo4j.driver.internal.net.pooling.SocketConnectionPool$ConnectionSupplier.get(SocketConnectionPool.java:186)\r\n\tat org.neo4j.driver.internal.net.pooling.BlockingPooledConnectionQueue.acquire(BlockingPooledConnectionQueue.java:96)\r\n\tat org.neo4j.driver.internal.net.pooling.SocketConnectionPool.acquireConnection(SocketConnectionPool.java:137)\r\n\tat org.neo4j.driver.internal.net.pooling.SocketConnectionPool.acquire(SocketConnectionPool.java:76)\r\n\tat org.neo4j.driver.internal.DirectConnectionProvider.acquireConnection(DirectConnectionProvider.java:45)\r\n\tat org.neo4j.driver.internal.NetworkSession.acquireConnection(NetworkSession.java:340)\r\n\tat org.neo4j.driver.internal.NetworkSession.beginTransaction(NetworkSession.java:288)\r\n\tat org.neo4j.driver.internal.NetworkSession.beginTransaction(NetworkSession.java:175)\r\n\tat org.neo4j.ogm.drivers.bolt.driver.BoltDriver.nativeTransaction(BoltDriver.java:159)\r\n\tat org.neo4j.ogm.drivers.bolt.driver.BoltDriver.newTransaction(BoltDriver.java:113)\r\n\tat org.neo4j.ogm.session.transaction.DefaultTransactionManager.openTransaction(DefaultTransactionManager.java:71)\r\n\tat org.neo4j.ogm.session.transaction.DefaultTransactionManager.openTransaction(DefaultTransactionManager.java:57)\r\n\tat org.neo4j.ogm.session.delegates.TransactionsDelegate.beginTransaction(TransactionsDelegate.java:36)\r\n\tat org.neo4j.ogm.session.Neo4jSession.beginTransaction(Neo4jSession.java:463)\r\n\tat org.springframework.data.neo4j.transaction.Neo4jTransactionManager.doBegin(Neo4jTransactionManager.java:176)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:461)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:277)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\r\n\tat io.marchex.api.service.FeatureService$$EnhancerBySpringCGLIB$$3008b8d0.getTagFeaturesByAccountId(&lt;generated&gt;)\r\n\tat io.marchex.api.resource.FeatureResource.getTagFeaturesByAccountId(FeatureResource.java:46)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:97)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:967)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:901)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:635)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:65)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\r\n\tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:160)\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:127)\r\n\tat org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:155)\r\n\tat io.marchex.FeatureResourceTest.testGetTagFeaturesByAccountId_AccounNotExists(FeatureResourceTest.java:85)\r\n\r\n \r\nAny help would be greatly appreciated, thanks in advance.","link":"https://stackoverflow.com/questions/49746068/unable-to-run-spring-boot-test-cases-with-neo4j-database-when-offline-or-neo4j-s","title":"Unable to run spring boot test cases with Neo4j database when offline or neo4j server is down"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":43,"user_id":9386129,"user_type":"registered","accept_rate":88,"profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"sranga","link":"https://stackoverflow.com/users/9386129/sranga"},"edited":false,"score":0,"creation_date":1523364152,"post_id":49746058,"comment_id":86522479,"link":"https://stackoverflow.com/questions/49746058/neo4j-import-runtime-issue#comment86522479_49746058"}],"owner":{"reputation":43,"user_id":9386129,"user_type":"registered","accept_rate":88,"profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"sranga","link":"https://stackoverflow.com/users/9386129/sranga"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":1,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1523338635,"creation_date":1523338635,"question_id":49746058,"share_link":"https://stackoverflow.com/q/49746058","body_markdown":"I am trying to import a design with 230M Nodes, 300M relationships and 1.5B properties overall.\r\nIt takes nearly 5.5 hours to import the design. Wondering  how to improve the runtime.\r\n\r\nIf i analyze the messages from Neo4j import, it takes quite a bit of time in relationship -&gt; relationship. Not sure as what it does here.\r\n\r\nAny suggestion to improve the load time:\r\n\r\n\r\nMy run command is :\r\n/home/neo4j-enterprise-3.3.2/bin/neo4j-admin import --nodes &quot;./instances.*&quot; --relationships:SIGN_OF &quot;./sign.*&quot; --relationships:RIN_OF &quot;./rin.* --id-type=INTEGER --database graph.db;\r\n\r\nMy heap initial and max size is set to 32G\r\n\r\nInstance header:\r\nNodeId:ID,:IGNORE,:Label,Din:int,LGit:int,RGit:int,Signed:int,Cens,Type,:IGNORE,Val:Float\r\n\r\nSignal Header:\r\n:IGNORE,:IGNORE,LGit:int,RGit:int,Signed:int,:IGNORE,:START_ID,:END_ID\r\n      \r\nRin header\r\n:START_ID,:END_ID,:IGNORE\r\n\r\nNeo4j import output \r\n \r\n\r\n       Available resources:\r\n          Total machine memory: 504.70 GB\r\n          Free machine memory: 88.71 GB\r\n          Max heap memory : 26.67 GB\r\n          Processors: 16\r\n          Configured max memory: 55.84 GB\r\n    Nodes, started 2018-04-09 17:52:36.028+0000\r\n    [&gt;:|NODE:1.75 GB--------------|PROPERTIES(3)=====|LABEL |*v:87.95 MB/s(4)=====================] 234M ∆ 819K\r\n    Done in 4m 13s 984ms\r\n\r\n    Prepare node index, started 2018-04-09 17:56:50.351+0000\r\n    [*DETECT:2.62 GB------------------------------------------------------------------------------] 234M ∆71.2M30000\r\n    Done in 33s 546ms\r\n\r\n    Relationships, started 2018-04-09 17:57:23.935+0000\r\n    [&gt;||PREPARE-----------------------------------|||*v:20.96 MB/s(16)============================] 303M ∆ 256K\r\n    Done in 7m 7s 922ms\r\n\r\n    Node Degrees, started 2018-04-09 18:04:37.914+0000\r\n    [*&gt;(16)=============================================================================|CALCULATE] 303M ∆1.97M\r\n    Done in 1m 30s 566ms\r\n\r\n    Relationship --&gt; Relationship  1-2/2, started 2018-04-09 18:06:08.951+0000\r\n        [*&gt;------------------------------------------------------------------------------------------|] 303M ∆ 144K\r\n        Done in 2h 8m 4s 36ms\r\n\r\n    RelationshipGroup 1-2/2, started 2018-04-09 20:14:13.059+0000\r\n        [&gt;:4.44 MB/s----------|*v:2.22 MB/s(2)========================================================] 186K ∆9.81K\r\n        Done in 2s 105ms\r\n\r\n    Node --&gt; Relationship, started 2018-04-09 20:14:15.178+0000\r\n    [*&gt;------------------------------------------------------------------------------------------|] 234M ∆76.4K\r\n    Done in 27m 53s 408ms\r\n\r\n    Relationship --&gt; Relationship 1-2/2, started 2018-04-09 20:42:08.654+0000\r\n    [*&gt;------------------------------------------------------------------------------------------|] 303M ∆36.0K\r\n    Done in 2h 33m 24s 201ms\r\n\r\n    Count groups, started 2018-04-09 23:15:33.152+0000\r\n    [*&gt;(16)=======================================================================================] 186K ∆59.8K\r\n    Done in 3s 898ms\r\n\r\n    Gather, started 2018-04-09 23:15:41.513+0000\r\n    [&gt;(6)===|*CACHE-------------------------------------------------------------------------------] 186K ∆ 186K\r\n    Done in 322ms\r\n\r\n    Write, started 2018-04-09 23:15:41.859+0000\r\n    [&gt;:1.30 |*v:1.11 MB/s(16)=====================================================================] 186K ∆21.2K\r\n    Done in 4s 161ms\r\n\r\n    Node --&gt; Group, started 2018-04-09 23:15:46.117+0000\r\n    [*FIRST---------------------------------------------------------------------------------------] 148K ∆1.09K\r\n    Done in 4m 8s 747ms\r\n\r\n    Node counts, started 2018-04-09 23:19:55.032+0000\r\n    [*&gt;(16)===========================================================|COUNT:1.79 GB--------------] 234M ∆4.63M\r\n    Done in 3m 33s 201ms\r\n\r\n    Relationship counts, started 2018-04-09 23:23:28.254+0000\r\n    [*&gt;(16)===================================================================|COUNT--------------] 303M ∆ 450K\r\n    Done in 1m 29s 457ms\r\n    \r\n    IMPORT DONE in 5h 32m 23s 509ms.\r\n    Imported:\r\n      234425118 nodes\r\n      303627293 relationships\r\n      1496022710 properties\r\n    Peak memory usage: 2.69 GB\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/49746058/neo4j-import-runtime-issue","title":"Neo4j import runtime issue"},{"tags":["neo4j","shortest-path"],"comments":[{"owner":{"reputation":71543,"user_id":3001761,"user_type":"registered","profile_image":"https://i.stack.imgur.com/feZwC.jpg?s=128&g=1","display_name":"jonrsharpe","link":"https://stackoverflow.com/users/3001761/jonrsharpe"},"edited":false,"score":0,"creation_date":1523306972,"post_id":49741385,"comment_id":86497503,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86497503_49741385"},{"owner":{"reputation":1,"user_id":2502478,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85a2116993c42b48c4383d1442b3e80?s=128&d=identicon&r=PG","display_name":"Yiğit Ağca","link":"https://stackoverflow.com/users/2502478/yi%c4%9fit-a%c4%9fca"},"reply_to_user":{"reputation":71543,"user_id":3001761,"user_type":"registered","profile_image":"https://i.stack.imgur.com/feZwC.jpg?s=128&g=1","display_name":"jonrsharpe","link":"https://stackoverflow.com/users/3001761/jonrsharpe"},"edited":false,"score":0,"creation_date":1523307908,"post_id":49741385,"comment_id":86497906,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86497906_49741385"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1523310219,"post_id":49741385,"comment_id":86498906,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86498906_49741385"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523320021,"post_id":49741385,"comment_id":86501848,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86501848_49741385"},{"owner":{"reputation":1,"user_id":2502478,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85a2116993c42b48c4383d1442b3e80?s=128&d=identicon&r=PG","display_name":"Yiğit Ağca","link":"https://stackoverflow.com/users/2502478/yi%c4%9fit-a%c4%9fca"},"reply_to_user":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1523350478,"post_id":49741385,"comment_id":86513136,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86513136_49741385"},{"owner":{"reputation":1,"user_id":2502478,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85a2116993c42b48c4383d1442b3e80?s=128&d=identicon&r=PG","display_name":"Yiğit Ağca","link":"https://stackoverflow.com/users/2502478/yi%c4%9fit-a%c4%9fca"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523361980,"post_id":49741385,"comment_id":86520914,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86520914_49741385"},{"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523370181,"post_id":49741385,"comment_id":86527119,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86527119_49741385"},{"owner":{"reputation":1,"user_id":2502478,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85a2116993c42b48c4383d1442b3e80?s=128&d=identicon&r=PG","display_name":"Yiğit Ağca","link":"https://stackoverflow.com/users/2502478/yi%c4%9fit-a%c4%9fca"},"reply_to_user":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523382422,"post_id":49741385,"comment_id":86535001,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86535001_49741385"},{"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523385240,"post_id":49741385,"comment_id":86536596,"link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j#comment86536596_49741385"}],"owner":{"reputation":1,"user_id":2502478,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85a2116993c42b48c4383d1442b3e80?s=128&d=identicon&r=PG","display_name":"Yiğit Ağca","link":"https://stackoverflow.com/users/2502478/yi%c4%9fit-a%c4%9fca"},"last_editor":{"reputation":1,"user_id":2502478,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85a2116993c42b48c4383d1442b3e80?s=128&d=identicon&r=PG","display_name":"Yiğit Ağca","link":"https://stackoverflow.com/users/2502478/yi%c4%9fit-a%c4%9fca"},"comment_count":9,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523307009,"creation_date":1523306462,"last_edit_date":1523307009,"question_id":49741385,"share_link":"https://stackoverflow.com/q/49741385","body_markdown":"I have been developing an app for finding a path would cost under the given price among international flights with neo4j database. The response time of the query exists below took about 8 min. The database approximately comprises 17 nodes and 200 relationships between them. Why does it take much longer than usual?\r\n\r\n    MATCH (strt:Airport {code:&#39;ATH&#39;}) WITH strt as s\r\n    MATCH nodes = (s:Airport)-[rs:Leg *]-&gt;(other:Airport)-[:Leg]-&gt;(s:Airport)\r\n    WHERE not other = s and 200 &gt; reduce(totalPrice = 0, r IN rs | totalPrice + r.price) and ALL(idx in range(0, size(rs)-2) WHERE (rs[0]).date = 201800408210000 and (rs[idx]).date = (rs[idx+1]).date +3000000 )\r\n    WITH *, reduce(totalPrice = 0, r IN rs | totalPrice + r.price) as tp\r\n    RETURN collect(distinct nodes), tp\r\n    ORDER BY tp DESC\r\n","link":"https://stackoverflow.com/questions/49741385/finding-given-price-way-on-neo4j","title":"Finding given price way on neo4j"},{"tags":["java","neo4j","neo4j-ogm"],"owner":{"reputation":1,"user_id":9615361,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8b820e832048f5805273fa003351029b?s=128&d=identicon&r=PG&f=1","display_name":"Lynx","link":"https://stackoverflow.com/users/9615361/lynx"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523301196,"creation_date":1523301196,"question_id":49740083,"share_link":"https://stackoverflow.com/q/49740083","body_markdown":"When I try to set a export relation between two NodeEntities (BundleImpl and PackageFragmentImpl) I get the error message, that a start or end node is missing.\r\nI appreciate any help. Thank you !\r\n\r\n\r\n    @NodeEntity\r\n    public class BundleImpl{\r\n\r\n    protected List&lt;PackageFragmentImpl&gt; exports;\r\n\t\r\n\t@Relationship(type = &quot;EXPORT&quot;, direction = &quot;OUTGOING&quot;)\r\n\tprivate Export exportRelation = new Export();\r\n\t\r\n\tpublic Export getExport(){\r\n\t\treturn exportRelation;\r\n\t}\r\n\t\r\n\tpublic void setExport(Export exportRelation){\r\n\t\tthis.exportRelation = exportRelation;\r\n\t}\r\n\r\n\r\n    @NodeEntity\r\n    public class PackageFragmentImpl {\r\n\r\n    protected BundleImpl bundle;\r\n\t\r\n\t@Relationship(type = &quot;EXPORT&quot;)\r\n\tprivate Export exportRelation = new Export();\r\n\t\r\n\tpublic Export getExport(){\r\n\t\treturn exportRelation;\r\n\t}\r\n\t\r\n\tpublic void setExport(Export exportRelation){\r\n\t\tthis.exportRelation = exportRelation;\r\n\t}\r\n\r\n\r\n\r\n    @RelationshipEntity(type=&quot;EXPORT&quot;)\r\n    public class Export {\r\n\t\r\n\t@GraphId \r\n\tLong id;\r\n\t\r\n\t@StartNode\r\n\tBundleImpl startBundle;\r\n\t\r\n\t@EndNode\r\n\tPackageFragmentImpl endPackageFrag;\r\n\t\r\n\t\r\n\tpublic long timestamp;\r\n\t\r\n\tpublic Export(){\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic Export(BundleImpl startBundle, PackageFragmentImpl endPackageFrag, \r\n    long timestamp){\r\n\t    this.startBundle = startBundle;\r\n\t    this.endPackageFrag = endPackageFrag;\r\n\t    this.timestamp = timestamp;\r\n\t}\r\n    // Getter &amp; Setter\r\n\r\nIn the following part of my main method I set the relation between two nodes and check if they actually exist:\r\n\r\n    Export exportRelation = new Export(bundle, fragment, date);\r\n    bundle.setExport(exportRelation);\r\n    fragment.setExport(exportRelation);\r\n\r\n\r\nThe detailed error info I get after running the program is:\r\n\r\n    Exception in thread &quot;main&quot; org.neo4j.ogm.exception.MappingException: \r\n    Relationship entity OSGiApplicationModel.impl.Export@1c491240 cannot have \r\n    a missing start or end node\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.haveRelationEndsChanged(EntityGraphMapper.java:520)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.getRelationshipBuilder(EntityGraphMapper.java:484)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.link(EntityGraphMapper.java:447)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntityReferences(EntityGraphMapper.java:390)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntity(EntityGraphMapper.java:222)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapRelatedEntity(EntityGraphMapper.java:717)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.link(EntityGraphMapper.java:457)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntityReferences(EntityGraphMapper.java:378)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntity(EntityGraphMapper.java:222)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapRelatedEntity(EntityGraphMapper.java:717)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.link(EntityGraphMapper.java:457)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntityReferences(EntityGraphMapper.java:390)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntity(EntityGraphMapper.java:222)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapRelatedEntity(EntityGraphMapper.java:717)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.link(EntityGraphMapper.java:457)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntityReferences(EntityGraphMapper.java:378)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntity(EntityGraphMapper.java:222)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapRelatedEntity(EntityGraphMapper.java:717)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.link(EntityGraphMapper.java:457)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntityReferences(EntityGraphMapper.java:390)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntity(EntityGraphMapper.java:222)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapRelatedEntity(EntityGraphMapper.java:717)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.link(EntityGraphMapper.java:457)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntityReferences(EntityGraphMapper.java:378)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.mapEntity(EntityGraphMapper.java:222)\r\n\tat org.neo4j.ogm.context.EntityGraphMapper.map(EntityGraphMapper.java:135)\r\n\tat org.neo4j.ogm.session.delegates.SaveDelegate.save(SaveDelegate.java:83)\r\n\tat org.neo4j.ogm.session.Neo4jSession.save(Neo4jSession.java:452)\r\n\tat analysis.ModelStorage.saveModel(ModelStorage.java:42)\r\n\tat analysis.Main.main(Main.java:100)","link":"https://stackoverflow.com/questions/49740083/neo4j-ogm-relationshipentity-is-missing-start-or-end-node","title":"Neo4j OGM RelationshipEntity is missing start or end node"},{"tags":["neo4j","py2neo"],"answers":[{"tags":[],"owner":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"last_editor":{"reputation":54,"user_id":5526835,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/8XtFN.jpg?s=128&g=1","display_name":"feynmanium","link":"https://stackoverflow.com/users/5526835/feynmanium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1523293564,"last_edit_date":1523293564,"creation_date":1523292189,"answer_id":49737776,"question_id":49737399,"share_link":"https://stackoverflow.com/a/49737776","body_markdown":"You are returning the matched path so what you see in py2neo is the representation of the path object. In the neo4j console it does a little extra looking up for you and presents the path as a set of nodes and relationships and it labels them according to what you have configured in the console.\r\n\r\nIf you want to see the names in your py2neo output you could use the `reduce` function on the returned path `p` to produce a string with the node names and relationship types. Something like this should get you started. \r\n\r\n    MATCH (p1:DATASET_NAME { name:&#39;test1.dat&#39; }),(p3:DATASET_NAME { name:&#39;test32.txt&#39; }), p = ((p1)-[:READS|:WRITES*1..8]-&gt;(p3))\r\n    RETURN head(nodes(p)).name + &#39; - &#39; + reduce(path_str = &quot;&quot;, r in relationships(p) | path_str + type(r) + &#39; - &#39; + endnode(r).name)\r\n\r\nIn py2neo [Note the escape characters added in order to avoid cypher error. @ `...reduce(path_str = \\&quot;\\&quot;...` ]:\r\n\r\n    graph.run(&quot;MATCH (p1:DATASET_NAME { name:&#39;/projects/bkrpty_vfcn/bkrpty_vfcn_vendr/data/serial/temp/yyyymmdd_yyyymmddhhmiss_bk_mrk_stat_init.dat&#39; }),(p3:DATASET_NAME { name:&#39;/projects/bkrpty_vfcn/bkrpty_vfcn_vendr/tables/onevgb1/ai_bkrpty_case&#39; }), p = ((p1)-[:READS|:WRITES*1..8]-&gt;(p3)) RETURN head(nodes(p)).name + &#39; - &#39; + reduce(path_str = \\&quot;\\&quot;, r in relationships(p) | path_str + type(r) + &#39; - &#39; + endnode(r).name)&quot;).dump()\r\n\r\n","link":"https://stackoverflow.com/questions/49737399/getting-alphanumeric-reference-of-nodes-in-py2neo-when-looking-for-paths/49737776#49737776","title":"Getting alphanumeric reference of nodes in py2neo, when looking for paths"}],"owner":{"reputation":54,"user_id":5526835,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/8XtFN.jpg?s=128&g=1","display_name":"feynmanium","link":"https://stackoverflow.com/users/5526835/feynmanium"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49737776,"answer_count":1,"score":1,"last_activity_date":1523293564,"creation_date":1523290822,"question_id":49737399,"share_link":"https://stackoverflow.com/q/49737399","body_markdown":"I have a graph that consists of DATASET and GRAPH nodes. With the following relationships:\r\n\r\n`DATASET-&gt;READS-&gt;GRAPH` \r\n\r\n`GRAPH-&gt;WRITES-&gt;DATASET`\r\n\r\nWhen I run the following : `MATCH (p1:DATASET_NAME { name:&#39;test1.dat&#39; }),(p3:DATASET_NAME { name:&#39;test32.txt&#39; }), p = ((p1)-[:READS|:WRITES*1..8]-&gt;(p3))\r\nRETURN p`\r\n\r\nIn Neo4J Desktop I get a result that is correct, where node names are present. But when I run it in py2neo:\r\n\r\n    graph.run(&quot;MATCH (p1:DATASET_NAME { \r\n    name:&#39;test1.dat&#39; }),(p3:DATASET_NAME { name:&#39;test32.txt&#39; }), p = ((p1)-[:READS|:WRITES*1..8]-&gt;(p3)) RETURN p&quot;).dump()\r\n\r\nI get a result in the following format:\r\n\r\n`(f3ff862)-[:READS]-&gt;(c539bdc)-[:WRITES]-&gt;(b217f5a)-[:READS]-&gt;(ebf9c4f)-[:WRITES]-&gt;(f9ddd22)-[:READS]-&gt;(fcca016)-[:WRITES]-&gt;(a9c241a)                                          \r\n (f3ff862)-[:READS]-&gt;(c539bdc)-[:WRITES]-&gt;(b217f5a)-[:READS]-&gt;(ebf9c4f)-[:WRITES]-&gt;(f9ddd22)-[:READS]-&gt;(fcca016)-[:WRITES]-&gt;(e152f69)-[:READS]-&gt;(fcca016)-[:WRITES]-&gt;(a9c241a) \r\n (f3ff862)-[:READS]-&gt;(c539bdc)-[:WRITES]-&gt;(b217f5a)-[:READS]-&gt;(ebf9c4f)-[:WRITES]-&gt;(cbc5d42)-[:READS]-&gt;(fcca016)-[:WRITES]-&gt;(a9c241a)`\r\n\r\nI am assuming that these are some sort of references. Is there a way where I can get the string value for `name` from these references? ","link":"https://stackoverflow.com/questions/49737399/getting-alphanumeric-reference-of-nodes-in-py2neo-when-looking-for-paths","title":"Getting alphanumeric reference of nodes in py2neo, when looking for paths"},{"tags":["spring","neo4j","cassandra"],"comments":[{"owner":{"reputation":21228,"user_id":18627,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG","display_name":"Alex Ott","link":"https://stackoverflow.com/users/18627/alex-ott"},"edited":false,"score":0,"creation_date":1523289073,"post_id":49734832,"comment_id":86488063,"link":"https://stackoverflow.com/questions/49734832/while-starting-a-spring-container-with-cassandra-configuration-and-neo4j-configu#comment86488063_49734832"},{"owner":{"reputation":1,"user_id":9569151,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6c786a4597cda83f2b55b3982bca2298?s=128&d=identicon&r=PG&f=1","display_name":"grajmanu","link":"https://stackoverflow.com/users/9569151/grajmanu"},"reply_to_user":{"reputation":21228,"user_id":18627,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9b31b9d123bff80f00317a1df0dd00e2?s=128&d=identicon&r=PG","display_name":"Alex Ott","link":"https://stackoverflow.com/users/18627/alex-ott"},"edited":false,"score":0,"creation_date":1523340420,"post_id":49734832,"comment_id":86507143,"link":"https://stackoverflow.com/questions/49734832/while-starting-a-spring-container-with-cassandra-configuration-and-neo4j-configu#comment86507143_49734832"}],"owner":{"reputation":1,"user_id":9569151,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6c786a4597cda83f2b55b3982bca2298?s=128&d=identicon&r=PG&f=1","display_name":"grajmanu","link":"https://stackoverflow.com/users/9569151/grajmanu"},"last_editor":{"reputation":1,"user_id":9569151,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6c786a4597cda83f2b55b3982bca2298?s=128&d=identicon&r=PG&f=1","display_name":"grajmanu","link":"https://stackoverflow.com/users/9569151/grajmanu"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523429051,"creation_date":1523282476,"last_edit_date":1523429051,"question_id":49734832,"share_link":"https://stackoverflow.com/q/49734832","body_markdown":"    I started up a spring container with both cassandra configuration and spring data neo4j configuration, but while starting up, following exception is noticed:\r\n    \r\n        Could not convert argument value of type [org.springframework.data.cassandra.core.cql.session.DefaultSessionFactory] to required type [org.neo4j.ogm.session.SessionFactory] exception\r\n    \r\n    Any idea about why does this error occur?\r\n    \r\n    \r\n\r\n&gt; *I am simply trying to save a set of entities to Cassandra and Neo4j using the same spring container. The required configurations are\r\n&gt; mentioned below. The bean name were qualified and in some case,\r\n&gt; certain methods were overridden in Cassandra Configuration to no\r\n&gt; avail. It was also seen that Neo4j is hard-coded to take the bean as\r\n&gt; getSessionFactory.*\r\n\r\n    \r\n    \r\n    *Following are my configurations:*\r\n    \r\n**Neo4j Configurations:**\r\n-------------------------\r\n    \r\n    @Configuration\r\n    @EnableTransactionManagement\r\n    @EnableNeo4jRepositories(basePackages = { &quot;com.*.repo&quot;})\r\n    public class Neo4jConfig {\r\n    \t\r\n    \t@Resource\r\n    \tEnvironment environment;\r\n    \r\n    \t\r\n    \t@Bean(name=&quot;getSessionFactory&quot;)\r\n    \t@Lazy\r\n    \tpublic SessionFactory getSessionFactory(@Qualifier(value=&quot;neo4jConfigurationBean&quot;) \r\n    \torg.neo4j.ogm.config.Configuration configuration) throws ConfigurationReadManagerFailureException {\r\n    \t\tString[] packages = { &quot;com.entity.store.reflection.state&quot;,\r\n    \t\t\t\t&quot;com.entity.store.reflection.base&quot; };\r\n    \t\tSessionFactory neo4jSessionFactory = new SessionFactory(configuration, packages);\r\n    \t\tneo4jSessionFactory.setLoadStrategy(LoadStrategy.SCHEMA_LOAD_STRATEGY);\r\n    \t\treturn neo4jSessionFactory;\r\n    \t}\r\n    \r\n    \t@Bean(name=&quot;neo4jTransactionManager&quot;)\r\n    \t@Lazy\r\n    \tpublic Neo4jTransactionManager getTransactionManager(@Qualifier(value=&quot;getSessionFactory&quot;)SessionFactory sessionFactory) \r\n    \t\t\tthrows ConfigurationReadManagerFailureException {\r\n    \t\treturn new Neo4jTransactionManager(sessionFactory);\r\n    \t}\r\n    \t\r\n    \t@Primary\r\n    \t@Bean(name=&quot;getSession&quot;)\r\n    \t@Lazy\r\n    \tpublic Session getSession(@Qualifier(value=&quot;neo4jTransactionManager&quot;) Neo4jTransactionManager txManager) \r\n    \t\t\tthrows ConfigurationReadManagerFailureException {\r\n    \t\treturn txManager.getSessionFactory().openSession();\r\n    \t}\r\n    \r\n    \t@Bean(name=&quot;neo4jConfigurationBean&quot;)\r\n    \t@Lazy\r\n    \tpublic org.neo4j.ogm.config.Configuration getConfiguration() throws ConfigurationReadManagerFailureException {\r\n    \t\tConfigurationSource config = new Neo4jConfigurationSource();\r\n    \t\torg.neo4j.ogm.config.Configuration configuration = new org.neo4j.ogm.config.Configuration.Builder(config)\r\n    \t\t\t\t.build();\r\n    \t\treturn configuration;\r\n    \t}\r\n    \r\n    }\r\n    \r\n    \r\n **Cassandra Configurations:**\r\n -------------------------\r\n    \r\n    @Configuration\r\n    @EnableCassandraRepositories(basePackages = {&quot;com.*.repo&quot;})\r\n    public class CassandraConfig extends AbstractCassandraConfiguration {\r\n    \r\n    \t@Resource\r\n    \tpublic Environment environment;\r\n    \r\n    \t@Override\r\n    \tprotected String getKeyspaceName() {\r\n    \t\treturn environment.getProperty(&quot;cassandra.keyspace&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \t@Bean\r\n    \t@Lazy\r\n    \tpublic CassandraClusterFactoryBean cluster() {\r\n    \t\t\r\n    \t\t\r\n    \t\tfinal CassandraClusterFactoryBean cluster = new CassandraClusterFactoryBean();\r\n    \t\tcluster.setContactPoints(environment.getProperty(&quot;cassandra.contactpoints&quot;));\r\n    \t\tcluster.setPort(Integer.parseInt(environment.getProperty(&quot;cassandra.port&quot;)));\r\n    \t\tcluster.setSocketOptions( new SocketOptions()\r\n    \t    .setConnectTimeoutMillis(60000)\r\n    \t    .setReadTimeoutMillis(60000));\r\n    \t    cluster.setRetryPolicy(new CustomRetryPolicy(10, 10, 10));\r\n    \t\treturn cluster;\r\n    \t}\r\n    \r\n    \r\n    \t@Bean\r\n    \t@Lazy\r\n    \tpublic CassandraMappingContext mappingContext() throws ClassNotFoundException {\r\n    \t\tCassandraMappingContext mappingContext = new CassandraMappingContext();\r\n    \t\tList&lt;String&gt; entityBasePackages=new ArrayList&lt;String&gt;();\r\n    \t\tentityBasePackages.add(environment.getProperty(&quot;cassandra.package.entity&quot;));\r\n    \t\tmappingContext.setInitialEntitySet(CassandraEntityClassScanner.scan(entityBasePackages));\r\n    \t    mappingContext.setUserTypeResolver(new SimpleUserTypeResolver(cluster().getObject(),getKeyspaceName()));\r\n            return mappingContext;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \t@Lazy\r\n    \tpublic CassandraConverter converter() throws ClassNotFoundException  {\r\n    \r\n    \t\t\r\n    \t\treturn new MappingCassandraConverter(mappingContext());\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \t@Lazy\r\n    \tpublic CassandraSessionFactoryBean session()  {\t\r\n    \t\tCassandraSessionFactoryBean session = new CassandraSessionFactoryBean();\r\n    \t\tsession.setCluster(cluster().getObject());\r\n    \t\tsession.setKeyspaceName(getKeyspaceName());\r\n    \t\ttry {\r\n    \t\t\tsession.setConverter(converter());\r\n    \t\t} catch (ClassNotFoundException e) {\r\n    \t\t\t\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\tsession.setSchemaAction(SchemaAction.CREATE_IF_NOT_EXISTS);\r\n    \t\treturn session;\r\n    \t}\r\n    \r\n    \r\n    \r\n    \t@Bean(name=&quot;cassandraTemplate&quot;)\r\n    \t@Lazy\r\n    \tpublic CassandraTemplate getCassandraTemplate() throws Exception {\r\n    \r\n    \t\tCassandraTemplate cop= new CassandraTemplate(session().getObject());\r\n    \t\tCassandraMappingContext mappingContext = new CassandraMappingContext();\r\n    \t    mappingContext=(CassandraMappingContext) cop.getConverter().getMappingContext();\r\n    \t    mappingContext.setUserTypeResolver(new SimpleUserTypeResolver(cluster().getObject(),getKeyspaceName()));\r\n    \t\treturn cop;\r\n    \t}\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/49734832/while-starting-a-spring-container-with-cassandra-configuration-and-neo4j-configu","title":"While starting a spring container with Cassandra configuration and Neo4j configuration, beans are getting mixed up for container"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":1,"user_id":9619830,"user_type":"registered","profile_image":"https://i.stack.imgur.com/MOhOm.jpg?s=128&g=1","display_name":"DJEatch","link":"https://stackoverflow.com/users/9619830/djeatch"},"edited":false,"score":0,"creation_date":1523282580,"post_id":49734754,"comment_id":86483540,"link":"https://stackoverflow.com/questions/49734754/neo4j-browser-alter-da-node-attribute-display#comment86483540_49734754"}],"owner":{"reputation":49,"user_id":6604980,"user_type":"registered","accept_rate":0,"profile_image":"https://graph.facebook.com/1106176576116535/picture?type=large","display_name":"Lui Neumann","link":"https://stackoverflow.com/users/6604980/lui-neumann"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1523300056,"answer_count":0,"score":0,"last_activity_date":1523282238,"creation_date":1523282238,"question_id":49734754,"share_link":"https://stackoverflow.com/q/49734754","body_markdown":"I have a cypher query in the Neo4j Browser with the shortestpath. It works perfectly, but it randomly displays an attribute of any of the nodes of the result. Can I change the displayed node attribute?\r\n\r\nThe code is\r\n\r\n        MATCH p = shortestPath( (from:Pesquisador{psq_nome:&#39;Bruno V. Castilho&#39;}) - [r1:pesquisadorTOpedido|:pedidoTOpesquisador*] -&gt; (to:Pesquisador{psq_nome:&#39;Eder Martioli&#39;}) ) WHERE ALL(x IN r1 WHERE ( (x.ppq_ordem &lt; 3) ) ) RETURN p;\r\n\r\nThe result is\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vvNNs.jpg\r\n\r\nNote that the Pesquisador node (green node) has the Status attribute displayed. Is it possible to configure the query so that the displayed attribute is the &quot;name attribute&quot;?","link":"https://stackoverflow.com/questions/49734754/neo4j-browser-alter-da-node-attribute-display","closed_reason":"duplicate","title":"Neo4j Browser - Alter da Node Attribute Display"},{"tags":["neo4j","spring-data-neo4j","neo4j-apoc"],"comments":[{"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523371077,"post_id":49734553,"comment_id":86527819,"link":"https://stackoverflow.com/questions/49734553/neo4j-pass-variable-to-apoc-cypher-runfile-call#comment86527819_49734553"},{"owner":{"reputation":97,"user_id":4465537,"user_type":"registered","profile_image":"https://graph.facebook.com/1109919281/picture?type=large","display_name":"Mark Davydov","link":"https://stackoverflow.com/users/4465537/mark-davydov"},"reply_to_user":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523427128,"post_id":49734553,"comment_id":86550639,"link":"https://stackoverflow.com/questions/49734553/neo4j-pass-variable-to-apoc-cypher-runfile-call#comment86550639_49734553"},{"owner":{"reputation":97,"user_id":4465537,"user_type":"registered","profile_image":"https://graph.facebook.com/1109919281/picture?type=large","display_name":"Mark Davydov","link":"https://stackoverflow.com/users/4465537/mark-davydov"},"reply_to_user":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523427237,"post_id":49734553,"comment_id":86550691,"link":"https://stackoverflow.com/questions/49734553/neo4j-pass-variable-to-apoc-cypher-runfile-call#comment86550691_49734553"},{"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523477573,"post_id":49734553,"comment_id":86582830,"link":"https://stackoverflow.com/questions/49734553/neo4j-pass-variable-to-apoc-cypher-runfile-call#comment86582830_49734553"}],"owner":{"reputation":97,"user_id":4465537,"user_type":"registered","profile_image":"https://graph.facebook.com/1109919281/picture?type=large","display_name":"Mark Davydov","link":"https://stackoverflow.com/users/4465537/mark-davydov"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523281660,"creation_date":1523281660,"question_id":49734553,"share_link":"https://stackoverflow.com/q/49734553","body_markdown":"I have a .cypher file that I want to run using jdbcOperations like this:\r\n\r\n    jdbcOperations.update(&quot;CALL apoc.cypher.runFile(\\&quot;&quot;+{CYPHER FILE HERE}+&quot;\\&quot;)&quot;);\r\n\r\n**But**,\r\n\r\nIn that cypher file I have another CALL\r\n\r\n    CALL apoc.load.json({PATH TO JSON FILE HERE}) YIELD value AS item\r\n\r\n\r\nI want that JSON File Path to be dynamic, to pass the path to it as a variable , but I have not succeed with any of my tries.\r\n\r\nHelp ? :)\r\n\r\n","link":"https://stackoverflow.com/questions/49734553/neo4j-pass-variable-to-apoc-cypher-runfile-call","title":"Neo4j - Pass Variable to apoc.cypher.runFile CALL"},{"tags":["windows","performance","neo4j","disk","san"],"comments":[{"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1523371512,"post_id":49733040,"comment_id":86528169,"link":"https://stackoverflow.com/questions/49733040/poor-disk-read-throughput-in-neo4j-when-database-is-hosted-on-san#comment86528169_49733040"}],"owner":{"reputation":71,"user_id":1133371,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7fe55beea3ee791152a0fd5e580cf097?s=128&d=identicon&r=PG","display_name":"Tom Sherman","link":"https://stackoverflow.com/users/1133371/tom-sherman"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523277081,"creation_date":1523277081,"question_id":49733040,"share_link":"https://stackoverflow.com/q/49733040","body_markdown":"I have the same graph on two different hosts. Both are running on Windows. The graph is large: hundreds of millions of nodes and billions of relationships. This is running on Neo4j 3.3.3, community edition.\r\n\r\nDatabase 1 is using a local SSD drive. In artificial tests, this SSD can read 3100 MB/sec (diskspd.exe test read of 2 GB file). When Neo4j reads from disk, I see **35 MB/sec throughput**.\r\n\r\nDatabase 2 is on our SAN (storage attached network). In artificial tests, I achieve 2300 MB/sec reads. When Neo4j reads from disk, I see **9 MB/sec throughput**.\r\n\r\nBoth hosts are Windows machines, 200 GB of RAM, running on ESX (VMware).\r\n\r\nI have examined the I/O characteristics with an experienced sysadmin at a low level. We have confirmed that the problem for Database 2 is **throughput, not latency**. We can confirm that the latency stats from esxtop are minimal. We do not see queuing or latency at either the virtualization layer or the SAN layer. We see other machines with the same config achieve much higher throughput.\r\n\r\nSo, all signs point to an application-based I/O issue. I can see in Perfmon that Database 2 simply seems to perform one-quarter the number of reads as Database 1. I do not see any signs of problems, queueing, or latency in other Perfmon counters; it simply seems that Database 2 is not asking the storage system for data very quickly.\r\n\r\nAny insights much appreciated!","link":"https://stackoverflow.com/questions/49733040/poor-disk-read-throughput-in-neo4j-when-database-is-hosted-on-san","title":"Poor disk read throughput in Neo4j when database is hosted on SAN"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523275857,"creation_date":1523275857,"answer_id":49732667,"question_id":49732607,"share_link":"https://stackoverflow.com/a/49732667","body_markdown":"The data for the app should be located at:\r\n\r\n`~/Library/Application Support/Neo4j Desktop/`","link":"https://stackoverflow.com/questions/49732607/where-does-neo4j-desktop-store-databases-on-mac-os-x/49732667#49732667","title":"Where does neo4j desktop store databases on Mac OS X?"},{"comments":[{"owner":{"reputation":3,"user_id":8082874,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/47531e00d6a4b1e4f95c5a80348a4d56?s=128&d=identicon&r=PG&f=1","display_name":"Sam","link":"https://stackoverflow.com/users/8082874/sam"},"edited":false,"score":0,"creation_date":1523363446,"post_id":49740197,"comment_id":86521938,"link":"https://stackoverflow.com/questions/49732607/where-does-neo4j-desktop-store-databases-on-mac-os-x/49740197#comment86521938_49740197"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1523302442,"last_edit_date":1523302442,"creation_date":1523301742,"answer_id":49740197,"question_id":49732607,"share_link":"https://stackoverflow.com/a/49740197","body_markdown":"If you just want to delete a Neo4j Desktop &quot;project&quot;, but not the Desktop itself, you can tell the Desktop to delete it:\r\n\r\n1. Open the `Neo4j Desktop`.\r\n2. In the `Projects` panel on the left, hover your mouse over the project to delete, and click the recycling bin icon that appears on the right.\r\n3. Confirm that you want to delete.\r\n\r\nIf you only want to know *where* the data for a specific Neo4j Desktop project is, there are several ways that the Desktop can tell you. For example (on a Mac):\r\n\r\n1. Open the `Neo4j Desktop`.\r\n2. In the `Projects` panel on the left, click on a project.\r\n3. Click on the `Manage` button for the project.\r\n4. Click on the `Open Folder` button (not the down-arrow to its right).\r\n5. A Finder window will pop up, displaying the contents of the installation folder for that project. The project&#39;s data is under the `data` subfolder.\r\n\r\nThe above technique can also be used to find out where the Desktop stores all its projects.","link":"https://stackoverflow.com/questions/49732607/where-does-neo4j-desktop-store-databases-on-mac-os-x/49740197#49740197","title":"Where does neo4j desktop store databases on Mac OS X?"}],"owner":{"reputation":3,"user_id":8082874,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/47531e00d6a4b1e4f95c5a80348a4d56?s=128&d=identicon&r=PG&f=1","display_name":"Sam","link":"https://stackoverflow.com/users/8082874/sam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49740197,"answer_count":2,"score":0,"last_activity_date":1523302442,"creation_date":1523275650,"question_id":49732607,"share_link":"https://stackoverflow.com/q/49732607","body_markdown":"I simply can&#39;t figure out where the neo4j desktop app installs data ... I wan&#39;t to remove the bugger C O M P L E T E L Y, as it&#39;s a complete nightmare connecting the sucker to a node app ... sigh!","link":"https://stackoverflow.com/questions/49732607/where-does-neo4j-desktop-store-databases-on-mac-os-x","title":"Where does neo4j desktop store databases on Mac OS X?"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1523272602,"creation_date":1523272602,"answer_id":49731667,"question_id":49731501,"share_link":"https://stackoverflow.com/a/49731667","body_markdown":"When a property key contains special characters, you&#39;ll need to surround the key name with backtick characters. So use:\r\n\r\n n.\\`@audit\\`","link":"https://stackoverflow.com/questions/49731501/neo4j-query-for-property-with-special-character-or-url/49731667#49731667","title":"neo4J query for property with special character or url"}],"owner":{"reputation":33,"user_id":4736423,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/5ca3619e4b2cf8b49d06adea26d7df63?s=128&d=identicon&r=PG&f=1","display_name":"sumit","link":"https://stackoverflow.com/users/4736423/sumit"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49731667,"answer_count":1,"score":0,"last_activity_date":1523272602,"creation_date":1523272026,"question_id":49731501,"share_link":"https://stackoverflow.com/q/49731501","body_markdown":"How to query the following in neo4j\r\n\r\nmatch (n) where n.@audit=&quot;true&quot; return n\r\n\r\nIt is complaining for &quot;@&quot;. Same is the case when property is a url as per image attached[![enter image description here][1]][1].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/l4aq8.png","link":"https://stackoverflow.com/questions/49731501/neo4j-query-for-property-with-special-character-or-url","title":"neo4J query for property with special character or url"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":1,"creation_date":1523271567,"post_id":49730927,"comment_id":86476168,"link":"https://stackoverflow.com/questions/49730927/get-child-node-not-connected-to-root-node#comment86476168_49730927"},{"owner":{"reputation":18,"user_id":4517417,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b5fc98a5fc83a18cae144aabe6402290?s=128&d=identicon&r=PG&f=1","display_name":"Mesh Manuel","link":"https://stackoverflow.com/users/4517417/mesh-manuel"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523278115,"post_id":49730927,"comment_id":86480410,"link":"https://stackoverflow.com/questions/49730927/get-child-node-not-connected-to-root-node#comment86480410_49730927"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523283545,"post_id":49730927,"comment_id":86484163,"link":"https://stackoverflow.com/questions/49730927/get-child-node-not-connected-to-root-node#comment86484163_49730927"}],"answers":[{"comments":[{"owner":{"reputation":18,"user_id":4517417,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b5fc98a5fc83a18cae144aabe6402290?s=128&d=identicon&r=PG&f=1","display_name":"Mesh Manuel","link":"https://stackoverflow.com/users/4517417/mesh-manuel"},"edited":false,"score":0,"creation_date":1523387479,"post_id":49735326,"comment_id":86537909,"link":"https://stackoverflow.com/questions/49730927/get-child-node-not-connected-to-root-node/49735326#comment86537909_49735326"}],"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523283962,"creation_date":1523283962,"answer_id":49735326,"question_id":49730927,"share_link":"https://stackoverflow.com/a/49735326","body_markdown":"Depending on the situation, it may be quicker to match on root nodes, which should never have incoming :PARENT_OF relationships:\r\n\r\n    MATCH (root:Tree{id:0})\r\n    MATCH (falseRoot:Tree)\r\n    WHERE size((falseRoot)&lt;-[:PARENT_OF]-()) = 0 and root &lt;&gt; falseRoot\r\n    RETURN falseRoot\r\n\r\nFrom there you can find the other nodes connected to the disconnected false root node.\r\n\r\nHowever, if there&#39;s a chance that your tree is broken in a way such that a loop is introduced, the above query may not detect it. This query should be able to:\r\n\r\n    MATCH (n:Tree)\r\n    WHERE (n)&lt;-[:PARENT_OF*]-(n)\r\n    RETURN n\r\n\r\nThat will only get you nodes affected by the loop, you may need to look further up in the hierarchy to find the bad relationship, in this case.","link":"https://stackoverflow.com/questions/49730927/get-child-node-not-connected-to-root-node/49735326#49735326","title":"Get Child Node Not Connected To Root Node"}],"owner":{"reputation":18,"user_id":4517417,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b5fc98a5fc83a18cae144aabe6402290?s=128&d=identicon&r=PG&f=1","display_name":"Mesh Manuel","link":"https://stackoverflow.com/users/4517417/mesh-manuel"},"last_editor":{"reputation":18,"user_id":4517417,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b5fc98a5fc83a18cae144aabe6402290?s=128&d=identicon&r=PG&f=1","display_name":"Mesh Manuel","link":"https://stackoverflow.com/users/4517417/mesh-manuel"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":1,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49735326,"answer_count":1,"score":0,"last_activity_date":1523283962,"creation_date":1523270128,"last_edit_date":1523278223,"question_id":49730927,"share_link":"https://stackoverflow.com/q/49730927","body_markdown":"[![enter image description here][1]][1]I have a binary tree that is broken and it has to be fixed by making sure all the childNodes can be traced or have their source from the rootNode. So for all childNodes, I want to get their root (which normally should be id:0) \r\n\r\nCode to fetch every nodes in the binary tree.\r\n\r\n    FOREACH nodes\r\n    CHECK RELATIONSHIP IF ROOT PARENT ID NOT 0\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8q4LZ.png\r\n\r\nID 7 is detached from the root node, how do I run a check to know that 7, 9 and 10 are disconnected from the root node.","link":"https://stackoverflow.com/questions/49730927/get-child-node-not-connected-to-root-node","title":"Get Child Node Not Connected To Root Node"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":1829,"user_id":133208,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/70d5d72a88f300b1a8cfc3203d36e5c1?s=128&d=identicon&r=PG","display_name":"Kenji Kina","link":"https://stackoverflow.com/users/133208/kenji-kina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523404372,"creation_date":1523404372,"answer_id":49764410,"question_id":49729911,"share_link":"https://stackoverflow.com/a/49764410","body_markdown":"Try deleting the file found under:\r\n\r\nC:\\Users\\\\[USERNAME]\\\\.Neo4jDesktop\\distributions\\java\r\n\r\nIt did the trick for me.","link":"https://stackoverflow.com/questions/49729911/neo4j-desktop-initialization-error-error-end-of-central-directory-record-signa/49764410#49764410","title":"Neo4J Desktop Initialization error: Error: end of central directory record signature not found"}],"owner":{"reputation":16,"user_id":9618620,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-5KTJlc95b48/AAAAAAAAAAI/AAAAAAAAA5s/s8jwtuJjkYs/photo.jpg?sz=128","display_name":"Andre Renard","link":"https://stackoverflow.com/users/9618620/andre-renard"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1523404372,"creation_date":1523266846,"question_id":49729911,"share_link":"https://stackoverflow.com/q/49729911","body_markdown":"I got this error when the setup program is &quot;Extracting Java 8&quot;. This solution (https://neo4j.com/developer/kb/extracting-java-error-during-neo4j-desktop-install/) doesn&#39;t help because %APPDATA%/Neo4j Desktop/Application/distributions/java/ was not created.\r\nThanks","link":"https://stackoverflow.com/questions/49729911/neo4j-desktop-initialization-error-error-end-of-central-directory-record-signa","title":"Neo4J Desktop Initialization error: Error: end of central directory record signature not found"},{"tags":["java","neo4j","neo4j-spatial"],"owner":{"reputation":61,"user_id":9283623,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/2212b8ac682e3d0ac8724f66342e4316?s=128&d=identicon&r=PG&f=1","display_name":"joe","link":"https://stackoverflow.com/users/9283623/joe"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523266119,"creation_date":1523266119,"question_id":49729678,"share_link":"https://stackoverflow.com/q/49729678","body_markdown":"I have been hitting my head around neo4j spatial but to no avail. \r\n\r\nI keep on getting this error.\r\n\r\nI have checked all my jars and I have `neo4j-kernel:3.2.8` present. I also have `neo4j-cypher:3.2.8` present. \r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException: No query engine installed.\r\n    \tat org.neo4j.kernel.impl.query.NoQueryEngine.noQueryEngine(NoQueryEngine.java:56)\r\n    \tat org.neo4j.kernel.impl.query.NoQueryEngine.executeQuery(NoQueryEngine.java:33)\r\n    \tat org.neo4j.kernel.impl.factory.ClassicCoreSPI.executeQuery(ClassicCoreSPI.java:78)\r\n    \tat org.neo4j.kernel.impl.factory.GraphDatabaseFacade.execute(GraphDatabaseFacade.java:430)\r\n    \tat org.neo4j.kernel.impl.factory.GraphDatabaseFacade.execute(GraphDatabaseFacade.java:413)\r\n    \tat org.neo4j.gis.spatial.utilities.ReferenceNodes.getReferenceNode(ReferenceNodes.java:32)\r\n    \tat org.neo4j.gis.spatial.SpatialDatabaseService.getSpatialRoot(SpatialDatabaseService.java:77)\r\n    \tat org.neo4j.gis.spatial.SpatialDatabaseService.getLayer(SpatialDatabaseService.java:113)\r\n    \tat org.neo4j.gis.spatial.SpatialDatabaseService.containsLayer(SpatialDatabaseService.java:277)\r\n    \tat integrations.GTFS2Neo4jImporter.execute(GTFS2Neo4jImporter.java:50)\r\n    \tat api.AdminApi.uploadGTFSFRorRegion(AdminApi.java:35)\r\n    \tat api.AdminApi.main(AdminApi.java:44)\r\n\r\n\r\n\r\n\r\nI have also checked all the related links on stackoverflow but no success achieved. They all say to add Cypher dependency which I did but then I get another error which is \r\n\r\n    Exception in thread &quot;main&quot; org.neo4j.kernel.impl.util.UnsatisfiedDependencyException: No dependency satisfies type interface org.neo4j.kernel.GraphDatabaseQueryService\r\n\r\n","link":"https://stackoverflow.com/questions/49729678/neo4j-spatial-no-query-engine-found","title":"neo4j-spatial no query engine found"},{"tags":["java","neo4j","neo4j-ogm"],"owner":{"reputation":1,"user_id":9615361,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8b820e832048f5805273fa003351029b?s=128&d=identicon&r=PG&f=1","display_name":"Lynx","link":"https://stackoverflow.com/users/9615361/lynx"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":1,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523256005,"creation_date":1523256005,"question_id":49726893,"share_link":"https://stackoverflow.com/q/49726893","body_markdown":"At the moment I&#39;m trying to set timestamps on my realtionships in neo4j. However with the enclosed code, it seems that the property timestamps are not set.I tried to add timestamps to the import relationship between BundlImpl and PackageFragmentImpl, but I assume it&#39;s not working. Though the IMPORT relations are set. \r\nI would welcome any help. Thanks a lot!\r\n\r\n    @NodeEntity\r\n    public class BundleImpl{\r\n\t\r\n\t@GraphId\r\n\tprotected Long id;\r\n\t\r\n\t@Relationship(type = &quot;IMPORT&quot;, direction = &quot;OUTGOING&quot;)\r\n\tprotected List&lt;PackageFragmentImpl&gt; imports;\r\n\r\n    public List&lt;PackageFragmentImpl&gt; getImports() {\r\n\t\tif (imports == null) {\r\n\t\t\timports = new ArrayList&lt;PackageFragmentImpl&gt;();\r\n\t\t}\r\n\t\treturn imports;\r\n\t}\r\n    }\r\n\r\nRelationshipClass:\r\n\r\n    @RelationshipEntity(type=&quot;IMPORT&quot;)\r\n    public class Import {\r\n\t\r\n\t@StartNode\r\n\tBundleImpl startBundle;\r\n\t\r\n\t@EndNode\r\n\tPackageFragmentImpl endPackageFrag;\r\n\t\r\n\tpublic Import(BundleImpl startBundle, PackageFragmentImpl                          \r\n    endPackageFrag){\r\n\t    this.startBundle = startBundle;\r\n\t    this.endPackageFrag = endPackageFrag;\r\n\t}\r\n\t\r\n\t@Property(name=&quot;timestamp&quot;)\r\n\tpublic long timestamp;\r\n\r\n\tpublic long getTimestamp() {\r\n\t\treturn timestamp;\r\n\t}\r\n\r\n\tpublic void setTimestamp(long timestamp) {\r\n\t\tthis.timestamp = timestamp; \r\n\t}\r\n    }\r\n\r\n\r\ncode snippet of my attempt to add the timestamp:\r\n\r\n    Import importRelation = new Import(manifests.getBundle(bundlePath), \r\n    importedFragment);\r\n    importRelation.setTimestamp(date);\r\n   ","link":"https://stackoverflow.com/questions/49726893/neo4j-setting-timestamps-on-relationships","title":"Neo4j setting Timestamps on Relationships"},{"tags":["java","jsp","neo4j","database-connectivity"],"comments":[{"owner":{"reputation":831,"user_id":2042827,"user_type":"registered","accept_rate":47,"profile_image":"https://i.stack.imgur.com/8Wspp.jpg?s=128&g=1","display_name":"john","link":"https://stackoverflow.com/users/2042827/john"},"edited":false,"score":0,"creation_date":1523254305,"post_id":49726499,"comment_id":86466768,"link":"https://stackoverflow.com/questions/49726499/how-to-create-a-web-application-using-neo4j-as-backend#comment86466768_49726499"}],"owner":{"reputation":1,"user_id":9617695,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Bhagya Bhat","link":"https://stackoverflow.com/users/9617695/bhagya-bhat"},"last_editor":{"reputation":1,"user_id":9617695,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Bhagya Bhat","link":"https://stackoverflow.com/users/9617695/bhagya-bhat"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1523274069,"answer_count":0,"score":-2,"last_activity_date":1523346364,"creation_date":1523253986,"last_edit_date":1523346364,"question_id":49726499,"share_link":"https://stackoverflow.com/q/49726499","body_markdown":"I m working on a **Web Application** that uses **Neo4j** as back end. I have already completed the database part.\r\n\r\nI want to know which front end suits good for my database(Neo4j) and how i can link that to my database.Please help me regarding this.\r\n\r\nI want to create a **Web Application** for digitalisation of prescription given by the doctors and to avoid the patients  to carrying the report while going for doctors.I m using the **Neo4j** to store all of these documents and I have inserted some values randomly at present. My idea is , doctor&#39;s have to type the prescription in the application itself in the respective patients  account instead of writing in the paper .\r\nFor that in need a help how to take the inputs(front end)  and how I can insert that into my database( how to connect the front end to my database).","link":"https://stackoverflow.com/questions/49726499/how-to-create-a-web-application-using-neo4j-as-backend","closed_reason":"off-topic","title":"How to create a web application using Neo4j as backend"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523255540,"post_id":49725146,"comment_id":86467295,"link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property#comment86467295_49725146"},{"owner":{"reputation":120,"user_id":5366394,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/b9a25acc60b31c2ed4c5000e39ecdaf7?s=128&d=identicon&r=PG&f=1","display_name":"WesleyHsiung","link":"https://stackoverflow.com/users/5366394/wesleyhsiung"},"reply_to_user":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523260584,"post_id":49725146,"comment_id":86469827,"link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property#comment86469827_49725146"},{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523261681,"post_id":49725146,"comment_id":86470368,"link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property#comment86470368_49725146"},{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523262081,"post_id":49725146,"comment_id":86470569,"link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property#comment86470569_49725146"},{"owner":{"reputation":120,"user_id":5366394,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/b9a25acc60b31c2ed4c5000e39ecdaf7?s=128&d=identicon&r=PG&f=1","display_name":"WesleyHsiung","link":"https://stackoverflow.com/users/5366394/wesleyhsiung"},"reply_to_user":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523262221,"post_id":49725146,"comment_id":86470641,"link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property#comment86470641_49725146"}],"answers":[{"tags":[],"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523270612,"creation_date":1523270612,"answer_id":49731091,"question_id":49725146,"share_link":"https://stackoverflow.com/a/49731091","body_markdown":"I think that this can not be solved with the help of pure cypher. You can try using the APOC library by adding a temporary property to the relation, and applying the [Dijkstra algorithm][1].\r\n\r\nInput params: \r\n\r\n    {\r\n      &quot;groupId&quot;: &quot;ag&quot;,\r\n      &quot;leadingCompany&quot;: &quot;a&quot;\r\n    }\r\n\r\nQuery:\r\n\r\n    // Search for a leading company\r\n    MATCH (lc:COMPANY {companyId: $leadingCompany, groupId: $groupId})\r\n    WITH lc, \r\n         apoc.create.uuid() as tmpProp // Temporary property name\r\n\r\n    // All relationships in the group are found. \r\n    // And the value of the temporary property is set ..\r\n    MATCH (c1:COMPANY {groupId: $groupId})-[r:INVESTMENT]-&gt;(c2:COMPANY {groupId: $groupId})\r\n    CALL apoc.create.setRelProperty(r, tmpProp, 1) yield rel\r\n    WITH lc, tmpProp, \r\n         count(r) as tmp\r\n    \r\n    // For each node in the group, need to find short paths to the leading company\r\n    MATCH (c:COMPANY {groupId: $groupId})\r\n    CALL apoc.algo.dijkstraWithDefaultWeight(lc, c, &#39;INVESTMENT&#39;, tmpProp, 2000000) yield path\r\n    WITH tmpProp, c, \r\n         min(length(path)) as distanceToLeading\r\n\r\n    // All paths in the group are found, and the temporary property is deleted\r\n    MATCH (c)-[r:INVESTMENT]-&gt;(:COMPANY {groupId: $groupId})\r\n    CALL apoc.create.removeRelProperties(r, [tmpProp]) yield rel\r\n    RETURN c as groupNode, distanceToLeading, \r\n           collect(r) as groupRelations\r\n\r\n  [1]: https://neo4j-contrib.github.io/neo4j-apoc-procedures/#_graph_algorithms_work_in_progress","link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property/49731091#49731091","title":"cypher narrow search with same node property"},{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523271513,"creation_date":1523271513,"answer_id":49731344,"question_id":49725146,"share_link":"https://stackoverflow.com/a/49731344","body_markdown":"APOC Procedures can help out here, as some of the path expander procedures can be used to find the shortest distance to each node in the group, and there&#39;s also a `cover()` procedure that will find all relationships between a group of nodes.\r\n\r\nYou&#39;ll want to make sure you have an index on :Company(groupId) and :Company(companyId) first.\r\n\r\n    MATCH (c:Company{groupId:$groupId})\r\n    WITH collect(c) as companies\r\n    WITH companies, [c in companies | id(c)] as companyIds, [c in companies \r\n     WHERE NOT (c)&lt;-[:INVESTMENT]-(:Company{groupId:$groupId})][0] as lead\r\n    // for the above, if you already know the lead companyId, just MATCH to the lead instead of this filter\r\n    CALL apoc.algo.cover(companyIds) YIELD rel\r\n    WITH companies, lead, collect(rel {start:startNode(rel).companyId, end:endNode(rel).companyId}) as relationships\r\n    UNWIND companies as company\r\n    MATCH path = shortestPath((lead)-[:INVESTMENT*]-&gt;(company))\r\n    WHERE all(node in nodes(path) WHERE node in companies)\r\n    RETURN relationships, collect(company {.companyId, distance:length(path)}) as distance","link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property/49731344#49731344","title":"cypher narrow search with same node property"},{"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"last_editor":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523274640,"last_edit_date":1523274640,"creation_date":1523274280,"answer_id":49732162,"question_id":49725146,"share_link":"https://stackoverflow.com/a/49732162","body_markdown":"This query will get you the desired output:\r\n\r\n     match p=((c:COMPANY{companyId:&#39;a&#39;})-[i:INVESTMENT*0..99]-&gt;(l:COMPANY)) \r\n        where l.groupId=c.groupId \r\n        with c,i,l,nodes(p) as path  order by c.companyId\r\n        with c,l,collect(distinct l.companyId) as Companies,min(size(path))-1 as Dist\r\n        match pp=shortestpath((cc:COMPANY{companyId:&#39;a&#39;})-[ii:INVESTMENT*0..99]-&gt;(ll:COMPANY)) \r\n        where ll.companyId in Companies\r\n        with c,Companies,Dist,reduce(s=&#39;&#39;,x in nodes(pp)|s + x.companyId ) as CompanyPath     \r\n    return c.companyId,Companies,Dist,CompanyPath order by Dist\r\n\r\nYou will notice, it does not require advanced knowledge of the groupId. If a lead company can be in two groups, you would need to include this in the initial where.\r\n\r\n\r\n\r\n \r\n","link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property/49732162#49732162","title":"cypher narrow search with same node property"}],"owner":{"reputation":120,"user_id":5366394,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/b9a25acc60b31c2ed4c5000e39ecdaf7?s=128&d=identicon&r=PG&f=1","display_name":"WesleyHsiung","link":"https://stackoverflow.com/users/5366394/wesleyhsiung"},"last_editor":{"reputation":120,"user_id":5366394,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/b9a25acc60b31c2ed4c5000e39ecdaf7?s=128&d=identicon&r=PG&f=1","display_name":"WesleyHsiung","link":"https://stackoverflow.com/users/5366394/wesleyhsiung"},"comment_count":5,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":1,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1523274640,"creation_date":1523244852,"last_edit_date":1523265446,"question_id":49725146,"share_link":"https://stackoverflow.com/q/49725146","body_markdown":"the question I have is here : [cypher-how-get-relation-between-every-two-node-and-the-distance-from-start-node][1], more detail here: 2 million companies, each of them must and only belong to a leading company，called group, so every node has properties: groupId and companyId; what&#39;s more, companies in different group may have relationship.  QUESTION: given a groupId and the leading company id, return all relations in this group and every node in the group&#39;s shortest distance to leading company.\r\n\r\nsince the sql that anwser have big performance issue, especially the shortPath one, so my question is can we narrow down the search scope when use shortPath， only search nodes with same property?\r\n\r\nor are there other way to solve the original question?\r\n\r\nsorry since I am in China mainland, cannot reach the console.neo4j.com(even with VPN), so I put my sample here:\r\n\r\n    create (a :COMPANY {companyId:&quot;a&quot;,groupId:&quot;ag&quot;}),\r\n           (b:COMPANY  {companyId:&quot;b&quot;,groupId:&quot;ag&quot;}),\r\n           (c:COMPANY  {companyId:&quot;c&quot;,groupId:&quot;ag&quot;}),\r\n           (d:COMPANY {companyId:&quot;d&quot;,groupId:&quot;ag&quot;}),\r\n           (e:COMPANY  {companyId:&quot;e&quot;,groupId:&quot;eg&quot;})\r\n    create (a)-[:INVESTMENT]-&gt;(b),\r\n           (b)-[:INVESTMENT]-&gt;(c),\r\n           (c)-[:INVESTMENT]-&gt;(d),\r\n           (a)-[:INVESTMENT]-&gt;(c),\r\n           (d)-[:INVESTMENT]-&gt;(b),\r\n           (c)-[:INVESTMENT]-&gt;(e) \r\n    return *\r\n\r\n\r\nhere the node `a,b,c,d` are same group and `a` is leading company,`e` are another group but has relationship with `c`. so I want get the node-node relation in `ag` group, for example: `a-b,a-c,b-c,c-d,d-b` and the shortest distance from `a` to group member, for example,return `dist.a=0,dist.b=1,dist.c=1,dist.d=2`\r\n \r\n\r\n [1]: https://stackoverflow.com/questions/49275603/cypher-how-get-relation-between-every-two-node-and-the-distance-from-start-node","link":"https://stackoverflow.com/questions/49725146/cypher-narrow-search-with-same-node-property","title":"cypher narrow search with same node property"},{"tags":["java","neo4j","gtfs","neo4j-spatial"],"comments":[{"owner":{"reputation":13362,"user_id":472495,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4rtxd.png?s=128&g=1","display_name":"halfer","link":"https://stackoverflow.com/users/472495/halfer"},"edited":false,"score":0,"creation_date":1523268588,"post_id":49722863,"comment_id":86474361,"link":"https://stackoverflow.com/questions/49722863/org-neo4j-kernel-graphdatabasequeryservice-no-dependency-satisfies-interface#comment86474361_49722863"}],"owner":{"reputation":61,"user_id":9283623,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/2212b8ac682e3d0ac8724f66342e4316?s=128&d=identicon&r=PG&f=1","display_name":"joe","link":"https://stackoverflow.com/users/9283623/joe"},"last_editor":{"reputation":13362,"user_id":472495,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4rtxd.png?s=128&g=1","display_name":"halfer","link":"https://stackoverflow.com/users/472495/halfer"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1523268520,"creation_date":1523222108,"last_edit_date":1523268520,"question_id":49722863,"share_link":"https://stackoverflow.com/q/49722863","body_markdown":"I am just writing a simple program where I am uploading my GTFS files to Neo4j Spatial.\r\n\r\nI believe it&#39;s some configuration error or some problem with Neo4j-spatial libraries, which is why I am not uploading my code which is quite basic as specified [here][1]:\r\n\r\nI imported all the required libraries of neo4j: \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;neo4j&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;artifactId&gt;neo4j-spatial&lt;/artifactId&gt;\r\n            &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n            &lt;version&gt;0.25.4-neo4j-3.2.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\nDespite adding all of these neo4j libraries I was getting the error that query engine not found so I decided to add the following too: \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;neo4j-cypher&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\nBut now I get a very strange error: \r\n\r\n     Exception in thread &quot;main&quot; org.neo4j.kernel.impl.util.UnsatisfiedDependencyException: No dependency satisfies type interface org.neo4j.kernel.GraphDatabaseQueryService\r\n\r\n\r\nComplete Error when one looks at it\r\n\r\n    main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.Agency\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.ShapePoint\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.Route\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.Stop\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.Trip\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.StopTime\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.ServiceCalendar\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.ServiceCalendarDate\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.FareAttribute\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.FareRule\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.Frequency\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.Pathway\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.Transfer\r\n     main INFO  serialization.GtfsReader - reading entities: org.onebusaway.gtfs.model.FeedInfo\r\n     Exception in thread &quot;main&quot; org.neo4j.kernel.impl.util.UnsatisfiedDependencyException: No dependency satisfies type interface org.neo4j.kernel.GraphDatabaseQueryService\r\n    \tat org.neo4j.kernel.impl.util.Dependencies.resolveDependency(Dependencies.java:73)\r\n    \tat org.neo4j.kernel.impl.util.Dependencies.resolveDependency(Dependencies.java:68)\r\n    \tat org.neo4j.graphdb.DependencyResolver$Adapter.resolveDependency(DependencyResolver.java:101)\r\n    \tat org.neo4j.kernel.impl.factory.ClassicCoreSPI.queryService(ClassicCoreSPI.java:143)\r\n    \tat org.neo4j.function.Suppliers$1.get(Suppliers.java:72)\r\n    \tat org.neo4j.kernel.impl.query.Neo4jTransactionalContextFactory.lambda$create$0(Neo4jTransactionalContextFactory.java:53)\r\n    \tat org.neo4j.kernel.impl.query.Neo4jTransactionalContextFactory.newContext(Neo4jTransactionalContextFactory.java:113)\r\n    \tat org.neo4j.kernel.impl.query.Neo4jTransactionalContextFactory.newContext(Neo4jTransactionalContextFactory.java:38)\r\n    \tat org.neo4j.kernel.impl.factory.GraphDatabaseFacade.execute(GraphDatabaseFacade.java:429)\r\n    \tat org.neo4j.kernel.impl.factory.GraphDatabaseFacade.execute(GraphDatabaseFacade.java:413)\r\n    \tat org.neo4j.gis.spatial.utilities.ReferenceNodes.getReferenceNode(ReferenceNodes.java:32)\r\n    \tat org.neo4j.gis.spatial.SpatialDatabaseService.getSpatialRoot(SpatialDatabaseService.java:77)\r\n    \tat org.neo4j.gis.spatial.SpatialDatabaseService.getLayer(SpatialDatabaseService.java:113)\r\n    \tat org.neo4j.gis.spatial.SpatialDatabaseService.containsLayer(SpatialDatabaseService.java:277)\r\n    \tat integrations.GTFS2Neo4jImporter.execute(GTFS2Neo4jImporter.java:50)\r\n    \tat api.AdminApi.uploadGTFSFRorRegion(AdminApi.java:38)\r\n    \tat api.AdminApi.main(AdminApi.java:47)\r\n\r\n\r\n  [1]: https://github.com/neo4j-contrib/spatial","link":"https://stackoverflow.com/questions/49722863/org-neo4j-kernel-graphdatabasequeryservice-no-dependency-satisfies-interface","title":"org.neo4j.kernel.GraphDatabaseQueryService No dependency satisfies interface"},{"tags":["graph","neo4j","nosql"],"answers":[{"comments":[{"owner":{"reputation":178,"user_id":4906636,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/Oavo8.png?s=128&g=1","display_name":"Cbhihe","link":"https://stackoverflow.com/users/4906636/cbhihe"},"edited":false,"score":0,"creation_date":1523284043,"post_id":49722335,"comment_id":86484476,"link":"https://stackoverflow.com/questions/49721183/neo4j-averaging-numeric-property-over-several-nodes/49722335#comment86484476_49722335"}],"tags":[],"owner":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523219099,"last_edit_date":1523219099,"creation_date":1523218537,"answer_id":49722335,"question_id":49721183,"share_link":"https://stackoverflow.com/a/49722335","body_markdown":"You could compute the average upstream when you are matching your nodes with `prop_01`. \r\n\r\nYou should also consider adding a label to the match to reduce the number of nodes your query needs to look through.\r\n\r\nYou can also collect the `n` nodes rather than just `prop_01` and use that in your unwind later.\r\n\r\n    MATCH (n:Add_A_Node_Label_Here)\r\n    WHERE exists(n.prop_01)\r\n    WITH collect(n) AS all_n, avg(n.prop_01) as avg_prop\r\n    UNWIND all_n as n\r\n    WITH n, avg_prop\r\n    WHERE n.prop_01 &lt; (1.1 * avg_prop)\r\n    RETURN n.name, n.prop_01  \r\n    LIMIT 20;","link":"https://stackoverflow.com/questions/49721183/neo4j-averaging-numeric-property-over-several-nodes/49722335#49722335","title":"Neo4J averaging numeric property over several nodes"},{"comments":[{"owner":{"reputation":178,"user_id":4906636,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/Oavo8.png?s=128&g=1","display_name":"Cbhihe","link":"https://stackoverflow.com/users/4906636/cbhihe"},"edited":false,"score":0,"creation_date":1523284483,"post_id":49722383,"comment_id":86484765,"link":"https://stackoverflow.com/questions/49721183/neo4j-averaging-numeric-property-over-several-nodes/49722383#comment86484765_49722383"},{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"reply_to_user":{"reputation":178,"user_id":4906636,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/Oavo8.png?s=128&g=1","display_name":"Cbhihe","link":"https://stackoverflow.com/users/4906636/cbhihe"},"edited":false,"score":0,"creation_date":1523288611,"post_id":49722383,"comment_id":86487750,"link":"https://stackoverflow.com/questions/49721183/neo4j-averaging-numeric-property-over-several-nodes/49722383#comment86487750_49722383"}],"tags":[],"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1523218935,"creation_date":1523218935,"answer_id":49722383,"question_id":49721183,"share_link":"https://stackoverflow.com/a/49722383","body_markdown":"You need to first calculate the average, and then filter, otherwise when you unwind, the average is equal to the property of each node:\r\n\r\n    MATCH (n) WHERE exists(n.prop_01)\r\n    WITH avg(n.prop_01) as avg_prop\r\n    MATCH (n) WHERE exists(n.prop_01) AND n.prop_01 &lt; 1.1 * avg_prop\r\n    RETURN count(n), avg_prop","link":"https://stackoverflow.com/questions/49721183/neo4j-averaging-numeric-property-over-several-nodes/49722383#49722383","title":"Neo4J averaging numeric property over several nodes"}],"owner":{"reputation":178,"user_id":4906636,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/Oavo8.png?s=128&g=1","display_name":"Cbhihe","link":"https://stackoverflow.com/users/4906636/cbhihe"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49722383,"answer_count":2,"score":2,"last_activity_date":1523219281,"creation_date":1523211466,"last_edit_date":1523219281,"question_id":49721183,"share_link":"https://stackoverflow.com/q/49721183","body_markdown":"I have a large graph and exactly 2 days of Neo4J under my belt, i.e. zilch. \r\n\r\nI want to compute an average over all nodes of a certain numerical properties, say `n.prop_01` whenever it occurs in nodes `(n)`. Then I want to get the nodes whose property `n.prop_01` is below a certain threshold depending on the average.\r\n\r\nI could not find an answer or something inspiring in the documentation or on online forums. I tried what follows and more...\r\n\r\n    MATCH (n) WHERE exists(n.prop_01)\r\n    WITH n, collect(n.prop_01) AS all_prop_01\r\n    UNWIND all_prop_01 as all_prop\r\n    WITH n,prop_01,avg(all_prop) AS avg_prop\r\n    WHERE n.prop_01 &lt; (1.1*avg_prop)\r\n    RETURN n.name,n.prop_01  LIMIT 20;\r\nResult:`(no changes, no records)`. \r\n\r\nThanks for any pointers as to why this does not work and how I could make it work. ","link":"https://stackoverflow.com/questions/49721183/neo4j-averaging-numeric-property-over-several-nodes","title":"Neo4J averaging numeric property over several nodes"},{"tags":["neo4j"],"answers":[{"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523275076,"creation_date":1523275076,"answer_id":49732413,"question_id":49721074,"share_link":"https://stackoverflow.com/a/49732413","body_markdown":"You could use Neo4j Desktop and the browser interface has a icon in the upper right of the results to download a CSV.  ","link":"https://stackoverflow.com/questions/49721074/is-it-possible-to-get-png-csv-file-directly-from-neo4j-browser/49732413#49732413","title":"Is it possible to get png/csv file directly from neo4j browser?"}],"owner":{"reputation":12,"user_id":6599853,"user_type":"registered","accept_rate":75,"profile_image":"https://lh5.googleusercontent.com/-7iM5mTVP_Hc/AAAAAAAAAAI/AAAAAAAAAPU/gVTHjqC8daQ/photo.jpg?sz=128","display_name":"zetta","link":"https://stackoverflow.com/users/6599853/zetta"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1523275076,"creation_date":1523210900,"question_id":49721074,"share_link":"https://stackoverflow.com/q/49721074","body_markdown":"I want to save either the png or csv file, which could be done manually by accessing the browser page, but with javascript or curl? I seem to can&#39;t have it done, is it possible?","link":"https://stackoverflow.com/questions/49721074/is-it-possible-to-get-png-csv-file-directly-from-neo4j-browser","title":"Is it possible to get png/csv file directly from neo4j browser?"},{"tags":["neo4j","cypher","graph-databases"],"answers":[{"comments":[{"owner":{"reputation":48,"user_id":1529646,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/075a3b0d04a96aae77416c190c50f7ba?s=128&d=identicon&r=PG","display_name":"Simon Brunner","link":"https://stackoverflow.com/users/1529646/simon-brunner"},"edited":false,"score":0,"creation_date":1523268575,"post_id":49719635,"comment_id":86474355,"link":"https://stackoverflow.com/questions/49718827/neo4j-cypher-filter-results-by-in-degree/49719635#comment86474355_49719635"}],"tags":[],"owner":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523274617,"last_edit_date":1523274617,"creation_date":1523202021,"answer_id":49719635,"question_id":49718827,"share_link":"https://stackoverflow.com/a/49719635","body_markdown":"You could check the size of the number of inbound relationships between the nodes in a `WHERE` clause.\r\n\r\n    MATCH (n:ARTICLE { article_id: &#39;1234&#39; })-[k:CONNECTS]-&gt;(r:ARTICLE)\r\n    WHERE size((n)-[:CONNECTS]-&gt;(r)) &gt; 1\r\n    RETURN n,k,r","link":"https://stackoverflow.com/questions/49718827/neo4j-cypher-filter-results-by-in-degree/49719635#49719635","title":"Neo4j Cypher: filter results by in-degree"}],"owner":{"reputation":48,"user_id":1529646,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/075a3b0d04a96aae77416c190c50f7ba?s=128&d=identicon&r=PG","display_name":"Simon Brunner","link":"https://stackoverflow.com/users/1529646/simon-brunner"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49719635,"answer_count":1,"score":1,"last_activity_date":1523274617,"creation_date":1523197140,"last_edit_date":1523273975,"question_id":49718827,"share_link":"https://stackoverflow.com/q/49718827","body_markdown":"I am running the following Neo4j Cypher query:\r\n\r\n    MATCH (n:ARTICLE { article_id: &#39;1234&#39; })-[k:CONNECTS]-&gt;(r:ARTICLE) \r\n    RETURN n,k,r;\r\n\r\nNow I&#39;d like to filter for all those `r` nodes that within the matched results have in-degree (ie. degree of `(n)-[k]-&gt;(r)`) greater than 1. How would I do that?\r\n\r\n(I thought this questions is distinct from https://stackoverflow.com/q/32775427/1529646 , which is why I decided to ask it here.)","link":"https://stackoverflow.com/questions/49718827/neo4j-cypher-filter-results-by-in-degree","title":"Neo4j Cypher: filter results by in-degree"},{"tags":["neo4j","transactions"],"owner":{"reputation":2182,"user_id":712347,"user_type":"registered","accept_rate":42,"profile_image":"https://i.stack.imgur.com/fD27L.jpg?s=128&g=1","display_name":"Dmitry Paranyushkin","link":"https://stackoverflow.com/users/712347/dmitry-paranyushkin"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523195386,"creation_date":1523195386,"question_id":49718554,"share_link":"https://stackoverflow.com/q/49718554","body_markdown":"I currently encounter the following error https://stackoverflow.com/questions/39168231/neo4j-cant-wait-on-resource-lock-error\r\n\r\nWhich is basically Neo4J locking certain nodes during transaction and not allowing any operations over them, so, after a certain timeout, the operation doesn&#39;t happen at all.\r\n\r\nSome suggestions include avoiding parallel transaction but I would like to take advantage of that... Any other ideas how it could work?","link":"https://stackoverflow.com/questions/49718554/how-to-continue-transaction-even-if-theres-a-lock-error-in-neo4j","title":"How to continue transaction even if there&#39;s a lock error in Neo4J"},{"tags":["neo4j","cypher","transaction-isolation"],"answers":[{"comments":[{"owner":{"reputation":5430,"user_id":1219755,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/4be57141c161a58a09f4a50541079d51?s=128&d=identicon&r=PG&f=1","display_name":"alexanoid","link":"https://stackoverflow.com/users/1219755/alexanoid"},"edited":false,"score":0,"creation_date":1523177828,"post_id":49715950,"comment_id":86445307,"link":"https://stackoverflow.com/questions/49715699/neo4j-acquire-release-the-write-lock-true-false-vs-remove/49715950#comment86445307_49715950"}],"tags":[],"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523176102,"creation_date":1523176102,"answer_id":49715950,"question_id":49715699,"share_link":"https://stackoverflow.com/a/49715950","body_markdown":"I don&#39;t understand what you want to do.\r\n\r\nNeo4j is transactional, so there is a transaction isolation, and Neo4j manages locks for you.\r\n\r\nSometimes, it is useful to manually create a lock by setting a dummy property, for example in order to avoid deadlock.\r\n\r\nLocks are released when you commit/rollback the transaction.","link":"https://stackoverflow.com/questions/49715699/neo4j-acquire-release-the-write-lock-true-false-vs-remove/49715950#49715950","title":"Neo4j acquire/release the write lock - true/false vs remove"},{"comments":[{"owner":{"reputation":5430,"user_id":1219755,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/4be57141c161a58a09f4a50541079d51?s=128&d=identicon&r=PG&f=1","display_name":"alexanoid","link":"https://stackoverflow.com/users/1219755/alexanoid"},"edited":false,"score":0,"creation_date":1523177922,"post_id":49715968,"comment_id":86445332,"link":"https://stackoverflow.com/questions/49715699/neo4j-acquire-release-the-write-lock-true-false-vs-remove/49715968#comment86445332_49715968"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":5430,"user_id":1219755,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/4be57141c161a58a09f4a50541079d51?s=128&d=identicon&r=PG&f=1","display_name":"alexanoid","link":"https://stackoverflow.com/users/1219755/alexanoid"},"edited":false,"score":1,"creation_date":1523180459,"post_id":49715968,"comment_id":86446000,"link":"https://stackoverflow.com/questions/49715699/neo4j-acquire-release-the-write-lock-true-false-vs-remove/49715968#comment86446000_49715968"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1523176247,"creation_date":1523176247,"answer_id":49715968,"question_id":49715699,"share_link":"https://stackoverflow.com/a/49715968","body_markdown":"You are using the documented [default locking behavior](https://neo4j.com/docs/java-reference/3.3/transactions/#transactions-locking). According to the documentation, the `write lock` is &quot;released when the transaction finishes&quot;.\r\n\r\nTherefore, once you set the write lock, it is not released until your Cypher query (and transaction) finishes.\r\n\r\nThe reason you want to include a `REMOVE n._lock_` clause before ending your query is so that you make sure the `_lock_` property, which is intended as a temporary hack, is no longer there after the query ends. (But the removal of that property is not responsible for the release the write lock.)","link":"https://stackoverflow.com/questions/49715699/neo4j-acquire-release-the-write-lock-true-false-vs-remove/49715968#49715968","title":"Neo4j acquire/release the write lock - true/false vs remove"}],"owner":{"reputation":5430,"user_id":1219755,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/4be57141c161a58a09f4a50541079d51?s=128&d=identicon&r=PG&f=1","display_name":"alexanoid","link":"https://stackoverflow.com/users/1219755/alexanoid"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49715968,"answer_count":2,"score":0,"last_activity_date":1523176247,"creation_date":1523174076,"question_id":49715699,"share_link":"https://stackoverflow.com/q/49715699","body_markdown":"In Neo4j in order to simulate the `SERIALIZABLE` transaction isolation level I need to explicitly set a dummy property, for example:\r\n\r\n    SET n._lock_ = true\r\n\r\nBut how to properly release the lock, do I need to `SET n._lock_ = false` or to completely remove it via `REMOVE n._lock_` query ?\r\n\r\n \r\n\r\n","link":"https://stackoverflow.com/questions/49715699/neo4j-acquire-release-the-write-lock-true-false-vs-remove","title":"Neo4j acquire/release the write lock - true/false vs remove"},{"tags":["graph","neo4j","graph-databases"],"answers":[{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523170558,"creation_date":1523170558,"answer_id":49715307,"question_id":49715141,"share_link":"https://stackoverflow.com/a/49715307","body_markdown":"If you know the type, you can make a query using the counts store which is instant.\r\n\r\n    MATCH ()-[r:ACTED_IN]-&gt;()\r\n    RETURN count(r) as count\r\n\r\nUnfortunately relationship types aren&#39;t dynamic in Cypher, you can&#39;t specify them via parameters or string values (as a result of your previous query, for example).\r\n\r\nIf you have [APOC Procedures][1], there&#39;s a procedure that will quickly get you exactly what you want, however, a piece of data from the `apoc.meta.stats()` call.\r\n\r\n    CALL apoc.meta.stats() YIELD relTypesCount \r\n    RETURN relTypesCount\r\n\r\n  [1]: https://neo4j-contrib.github.io/neo4j-apoc-procedures/","link":"https://stackoverflow.com/questions/49715141/neo4j-cypher-return-a-list-of-distinct-edge-types-with-number-of-occurences/49715307#49715307","title":"Neo4j Cypher: Return a list of distinct edge types with number of occurences"},{"comments":[{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":1,"creation_date":1523275574,"post_id":49732472,"comment_id":86478713,"link":"https://stackoverflow.com/questions/49715141/neo4j-cypher-return-a-list-of-distinct-edge-types-with-number-of-occurences/49732472#comment86478713_49732472"},{"owner":{"reputation":11271,"user_id":2776376,"user_type":"registered","profile_image":"https://i.stack.imgur.com/40VxD.gif?s=128&g=1","display_name":"Maximilian Peters","link":"https://stackoverflow.com/users/2776376/maximilian-peters"},"edited":false,"score":0,"creation_date":1523279267,"post_id":49732472,"comment_id":86481290,"link":"https://stackoverflow.com/questions/49715141/neo4j-cypher-return-a-list-of-distinct-edge-types-with-number-of-occurences/49732472#comment86481290_49732472"}],"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523275240,"creation_date":1523275240,"answer_id":49732472,"question_id":49715141,"share_link":"https://stackoverflow.com/a/49732472","body_markdown":"    match ()-[r]-&gt;() return type(r),count(*)","link":"https://stackoverflow.com/questions/49715141/neo4j-cypher-return-a-list-of-distinct-edge-types-with-number-of-occurences/49732472#49732472","title":"Neo4j Cypher: Return a list of distinct edge types with number of occurences"}],"owner":{"reputation":108,"user_id":5478942,"user_type":"registered","accept_rate":38,"profile_image":"https://lh6.googleusercontent.com/-E0u3n2mQxTk/AAAAAAAAAAI/AAAAAAAABUI/1PPJs1QQ7BU/photo.jpg?sz=128","display_name":"Solomon Bothwell","link":"https://stackoverflow.com/users/5478942/solomon-bothwell"},"last_editor":{"reputation":5085,"user_id":7879193,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-bVdcN0nQCio/AAAAAAAAAAI/AAAAAAAACfs/jPa4Dr_Nzbk/photo.jpg?sz=128","display_name":"Stanislav Kralin","link":"https://stackoverflow.com/users/7879193/stanislav-kralin"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1523275240,"creation_date":1523169094,"last_edit_date":1523199920,"question_id":49715141,"share_link":"https://stackoverflow.com/q/49715141","body_markdown":"I know I can return all distinct edge types like so:\r\n\r\n    MATCH (a)-[r]-&gt;(b)\r\n    RETURN distinct(type(r))\r\n\r\nHow can I return each distinct type along with the number of occurrences?","link":"https://stackoverflow.com/questions/49715141/neo4j-cypher-return-a-list-of-distinct-edge-types-with-number-of-occurences","title":"Neo4j Cypher: Return a list of distinct edge types with number of occurences"},{"tags":["neo4j","cypher","dijkstra","neo4j-apoc"],"comments":[{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523207492,"post_id":49715060,"comment_id":86454060,"link":"https://stackoverflow.com/questions/49715060/how-can-i-limit-restrict-the-plotted-relationships-in-a-neo4j-graph-query#comment86454060_49715060"},{"owner":{"reputation":135,"user_id":3732185,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/472fc51078c5ecb7bde28c95b2cc2085?s=128&d=identicon&r=PG","display_name":"Sergio","link":"https://stackoverflow.com/users/3732185/sergio"},"reply_to_user":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":0,"creation_date":1523223811,"post_id":49715060,"comment_id":86459691,"link":"https://stackoverflow.com/questions/49715060/how-can-i-limit-restrict-the-plotted-relationships-in-a-neo4j-graph-query#comment86459691_49715060"}],"answers":[{"tags":[],"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1523226006,"creation_date":1523226006,"answer_id":49723306,"question_id":49715060,"share_link":"https://stackoverflow.com/a/49723306","body_markdown":"It looks like that in the neoj browser settings you need to turn off the option `Browser Settings -&gt; Graph Visualization -&gt; Connect result nodes`.","link":"https://stackoverflow.com/questions/49715060/how-can-i-limit-restrict-the-plotted-relationships-in-a-neo4j-graph-query/49723306#49723306","title":"How can I limit / restrict the plotted relationships in a neo4j graph query?"}],"owner":{"reputation":135,"user_id":3732185,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/472fc51078c5ecb7bde28c95b2cc2085?s=128&d=identicon&r=PG","display_name":"Sergio","link":"https://stackoverflow.com/users/3732185/sergio"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49723306,"answer_count":1,"score":1,"last_activity_date":1523226006,"creation_date":1523168453,"question_id":49715060,"share_link":"https://stackoverflow.com/q/49715060","body_markdown":"I created a Graph Database in neo4j, my main interest with this database is to find the cheapest teleport paths between towns on a MMORPG world. Here is the script to build up the database:\r\n\r\nhttps://gist.github.com/sergio-bobillier/1effa24d406e84afe0976277d04c0218\r\n\r\nAs you can see the nodes in the graph have a LOT of connections between them, this is because all the major towns are connected between them.\r\n\r\nI use the Dijkstra algorithm to get the cheapest path like this:\r\n\r\n```MATCH (s {name: &#39;Talking Island Village&#39;}), (t {name: &#39;Town of Oren&#39;})\r\n  CALL apoc.algo.dijkstra(s, t, &#39;HAS_A_PORT_TO&gt;&#39;, &#39;cost&#39;) YIELD path, weight\r\n  RETURN path LIMIT 1```\r\n\r\nThis works great, the algorithm returns the correct path but there is something that bothers me, when the neo4j browser plots the path at first it plots only the path returned by the algorithm, however it quickly &quot;completes&quot; the graph by plotting all the connections between the nodes (even those not included in the path returned by Dijkstra), which makes the plotted graph really confusing:\r\n\r\n[![plotted graph][1]][1]\r\n\r\nHow can I keep node4j from plotting all these extra relationships and include only the path returned by the Dijkstra algorithm?\r\n\r\n  [1]: https://i.stack.imgur.com/SfNDF.png","link":"https://stackoverflow.com/questions/49715060/how-can-i-limit-restrict-the-plotted-relationships-in-a-neo4j-graph-query","title":"How can I limit / restrict the plotted relationships in a neo4j graph query?"},{"tags":["neo4j","nested-lists"],"comments":[{"owner":{"reputation":8061,"user_id":781965,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/d2c8ce5d54bdc1e0a078155acfff7597?s=128&d=identicon&r=PG","display_name":"Jeff","link":"https://stackoverflow.com/users/781965/jeff"},"edited":false,"score":0,"creation_date":1523154346,"post_id":49713727,"comment_id":86440914,"link":"https://stackoverflow.com/questions/49713727/returning-sets-of-lists-in-graph-databases#comment86440914_49713727"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"edited":false,"score":0,"creation_date":1523158034,"post_id":49713727,"comment_id":86441438,"link":"https://stackoverflow.com/questions/49713727/returning-sets-of-lists-in-graph-databases#comment86441438_49713727"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523162171,"post_id":49713727,"comment_id":86442053,"link":"https://stackoverflow.com/questions/49713727/returning-sets-of-lists-in-graph-databases#comment86442053_49713727"}],"answers":[{"comments":[{"owner":{"reputation":8061,"user_id":781965,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/d2c8ce5d54bdc1e0a078155acfff7597?s=128&d=identicon&r=PG","display_name":"Jeff","link":"https://stackoverflow.com/users/781965/jeff"},"edited":false,"score":0,"creation_date":1523177484,"post_id":49715563,"comment_id":86445227,"link":"https://stackoverflow.com/questions/49713727/returning-sets-of-lists-in-graph-databases/49715563#comment86445227_49715563"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523178996,"last_edit_date":1523178996,"creation_date":1523172933,"answer_id":49715563,"question_id":49713727,"share_link":"https://stackoverflow.com/a/49715563","body_markdown":"To recap my comments: The use of recursion or looping should be unnecessary, and the use of lists is probably not the right approach either. You should just use a good graph-oriented data model (that makes good use of relationships and takes advantage of indexing to start queries).\r\n\r\nAt risk of going overboard to make this point, the query below uses a fairly straightforward data model to construct a portion of the graph for a school:\r\n\r\n    CREATE\r\n      (sci:Area {name: &#39;Science&#39;}),\r\n      (hum:Area {name: &#39;Humanities&#39;}),\r\n    \r\n      (bio:Department {name: &#39;Biology&#39;})-[:IN_AREA]-&gt;(sci),\r\n      (phy:Department {name: &#39;Physics&#39;})-[:IN_AREA]-&gt;(sci),\r\n      (che:Department {name: &#39;Chemistry&#39;})-[:IN_AREA]-&gt;(sci),\r\n      (eng:Department {name: &#39;English&#39;})-[:IN_AREA]-&gt;(hum),\r\n      (his:Department {name: &#39;History&#39;})-[:IN_AREA]-&gt;(hum),\r\n      (soc:Department {name: &#39;Sociology&#39;})-[:IN_AREA]-&gt;(hum),\r\n    \r\n      (bioMaj:Major {name: &#39;Biology&#39;})-[:IN_DEPT]-&gt;(bio),\r\n      (phyMaj:Major {name: &#39;Physics&#39;})-[:IN_DEPT]-&gt;(phy),\r\n    \r\n      (bio101:Course {id: &#39;Bio101&#39;, name: &#39;Introductory Biology&#39;, level: 101, credits: 3})   -[:IN_DEPT]-&gt;(bio),\r\n      (che101:Course {id: &#39;Chem101&#39;, name: &#39;Introductory Chemistry&#39;, level: 101, credits: 4})-[:IN_DEPT]-&gt;(che),\r\n      (phy101:Course {id: &#39;Phys101&#39;, name: &#39;Newtonian Physics&#39;, level: 101, credits: 5})     -[:IN_DEPT]-&gt;(phy),\r\n      (phy201:Course {id: &#39;Phys201&#39;, name: &#39;Mechanics&#39;, level: 201, credits: 4})             -[:IN_DEPT]-&gt;(phy),\r\n      (phy202:Course {id: &#39;Phys202&#39;, name: &#39;Elec &amp; Mag&#39;, level: 202, credits: 4})            -[:IN_DEPT]-&gt;(phy),\r\n      (eng101:Course {id: &#39;Eng101&#39;, name: &#39;Intro to Poetry&#39;, level: 101, credits: 3})        -[:IN_DEPT]-&gt;(eng),\r\n      (eng102:Course {id: &#39;Eng102&#39;, name: &#39;Intro to Drama&#39;, level: 102, credits: 3})         -[:IN_DEPT]-&gt;(eng),\r\n      (eng103:Course {id: &#39;Eng103&#39;, name: &#39;Intro to Fiction&#39;, level: 103, credits: 3})       -[:IN_DEPT]-&gt;(eng),\r\n      (eng202:Course {id: &#39;Eng201&#39;, name: &#39;Medieval Literature&#39;, level: 201, credits: 4})    -[:IN_DEPT]-&gt;(eng),\r\n      (his100:Course {id: &#39;Hist100&#39;, name: &#39;Global History&#39;, level: 100, credits: 3})        -[:IN_DEPT]-&gt;(his),\r\n      (soc100:Course {id: &#39;Soc100&#39;, name: &#39;Intro to Sociology&#39;, level: 100, credits: 3})     -[:IN_DEPT]-&gt;(soc),\r\n      \r\n      (fred:Student {id: 123456, name: &#39;Fred Smith&#39;})-[:HAS_MAJOR]-&gt;(bioMaj),\r\n      (sue:Student  {id: 987654, name: &#39;Sue Jones&#39;})-[:HAS_MAJOR]-&gt;(phyMaj),\r\n    \r\n      (fred)-[:ENROLLED_IN {year: 2017, term: 1, grade: 3.73}]-&gt;(bio101),\r\n      (fred)-[:ENROLLED_IN {year: 2017, term: 1, grade: 3.62}]-&gt;(eng101),\r\n      (fred)-[:ENROLLED_IN {year: 2017, term: 2, grade: 3.55}]-&gt;(che101),\r\n      (fred)-[:ENROLLED_IN {year: 2017, term: 2, grade: 2.95}]-&gt;(eng102),\r\n      (fred)-[:ENROLLED_IN {year: 2018, term: 1, grade: 3.13}]-&gt;(eng202),\r\n      (fred)-[:ENROLLED_IN {year: 2018, term: 1, grade: 3.68}]-&gt;(phy101),\r\n      (sue) -[:ENROLLED_IN {year: 2017, term: 1, grade: 3.55}]-&gt;(che101),\r\n      (sue) -[:ENROLLED_IN {year: 2017, term: 1, grade: 3.66}]-&gt;(eng101),\r\n      (sue) -[:ENROLLED_IN {year: 2017, term: 2, grade: 3.77}]-&gt;(phy201),\r\n      (sue) -[:ENROLLED_IN {year: 2017, term: 2, grade: 3.44}]-&gt;(soc100),\r\n      (sue) -[:ENROLLED_IN {year: 2018, term: 1, grade: 3.33}]-&gt;(eng202),\r\n      (sue) -[:ENROLLED_IN {year: 2018, term: 1, grade: 3.22}]-&gt;(phy101);\r\n\r\nSuppose there is a requirement that all Science majors must get a grade of 3.0+ in 3 Humanities courses, and at least one of those Humanities courses must be at the 200+ level.\r\n\r\nWe can find all Science students that have satisfied that requirement (e.g., `Sue Jones`) this way:\r\n\r\n    MATCH (a1:Area)&lt;-[:IN_AREA]-()&lt;-[:IN_DEPT]-()&lt;-[:HAS_MAJOR]-(student)-[e:ENROLLED_IN]-&gt;(course)-[:IN_DEPT]-&gt;()-[:IN_AREA]-&gt;(a2:Area)\r\n    WHERE a1.name = &#39;Science&#39; AND a2.name = &#39;Humanities&#39; AND e.grade &gt;= 3.0\r\n    WITH student, COLLECT(course) AS courses\r\n    WHERE SIZE(courses) &gt;= 3 AND ANY(c IN courses WHERE c.level &gt;= 200)\r\n    RETURN student;\r\n\r\nConversely, we can find all Science students that not yet satisfied that requirement (e.g., `Fred Smith`) in the following way. (Below, if the `OPTIONAL MATCH` and its `WHERE` fail to find a match, `courses` would be an empty collection).\r\n\r\n    MATCH (a1:Area)&lt;-[:IN_AREA]-()&lt;-[:IN_DEPT]-()&lt;-[:HAS_MAJOR]-(student)\r\n    WHERE a1.name = &#39;Science&#39;\r\n    OPTIONAL MATCH (student)-[e:ENROLLED_IN]-&gt;(course)-[:IN_DEPT]-&gt;()-[:IN_AREA]-&gt;(a2:Area)\r\n    WHERE a2.name = &#39;Humanities&#39; AND e.grade &gt;= 3.0\r\n    WITH student, COLLECT(course) AS courses\r\n    WHERE SIZE(courses) &lt; 3 OR NONE(c IN courses WHERE c.level &gt;= 200)\r\n    RETURN student;\r\n","link":"https://stackoverflow.com/questions/49713727/returning-sets-of-lists-in-graph-databases/49715563#49715563","title":"Returning sets of lists in graph databases"}],"owner":{"reputation":8061,"user_id":781965,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/d2c8ce5d54bdc1e0a078155acfff7597?s=128&d=identicon&r=PG","display_name":"Jeff","link":"https://stackoverflow.com/users/781965/jeff"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1523178996,"creation_date":1523153255,"question_id":49713727,"share_link":"https://stackoverflow.com/q/49713727","body_markdown":"This is a follow-on question from [How to model relationships between sets of nodes][1]. I&#39;ll repeat the blurb in case that question gets removed or changed substantially:\r\n\r\nI am currently looking at modelling tertiary courses and other such entities (MATH101, BIOL360, BSc etc.), and one of the options we&#39;re looking at is graph databases. I am not familiar with graph databases, other than in theory.\r\n\r\nOne of the use cases for this database is to query possible pathways through the courses; for example, answering the question &quot;what minimum combinations of courses are valid to fulfill the requirements to receive a Bachelor of Science in Computer Science with Honours?&quot;. Some of the requirements will be simple (the qualification requires you&#39;ve done Comp101, Math101 and Comp201) and some will provide options (require you&#39;ve done 80 points of papers classified as &quot;science&quot; papers at the 100 level or above).\r\n\r\nI found [neo4j lists][2] which I thought were really promising, but what I really seem to want is to be able to return a list of lists, where each component list represents a single potential pathway. I don&#39;t see a way to generate such a list of lists though, so I&#39;m guessing I&#39;ve got something wrong at the conceptual level.\r\n\r\nOne way I could do this is have a loop that looks at the qualification node, grabs one possible combination of nodes, recursively fulfills the requirements of that node, and then moves onto the next possible combination. As a database developer, the idea of using a loop for what is clearly theoretically solvable as a set-based operation is the kind of thing that keeps me from sleeping easily at night, so I will go to great lengths to avoid such an abomination. **How can I construct a query to build such a set of sets?**\r\n\r\nAgain, I&#39;ve tagged Neo4J because I&#39;m leaning towards it as (from what I can tell) it&#39;s the most widely known/used graph dbms (and i&#39;ve had quite an elegant solution to my previous question that works in that), but I&#39;m open to solutions in other databases too (in fact, if it&#39;s possible in the very new SQL Server offering, that would probably be ideal as other infrastructure is on that).\r\n\r\n  [1]: https://stackoverflow.com/q/49625522/781965\r\n  [2]: https://neo4j.com/docs/developer-manual/current/cypher/syntax/lists/","link":"https://stackoverflow.com/questions/49713727/returning-sets-of-lists-in-graph-databases","title":"Returning sets of lists in graph databases"},{"tags":["spring-boot","neo4j","spring-data","spring-data-mongodb","spring-data-neo4j"],"owner":{"reputation":849,"user_id":1060014,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d3c3e2e86a001828a9211d71681a75ed?s=128&d=identicon&r=PG","display_name":"Henry T Kirk","link":"https://stackoverflow.com/users/1060014/henry-t-kirk"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523142492,"creation_date":1523142492,"question_id":49712869,"share_link":"https://stackoverflow.com/q/49712869","body_markdown":"I&#39;m having issues getting my Java Spring Boot application to work with MongoDB and Neo4j in the same application. It works fine for MongoDB reads/writes but fails on any read or write with Neo4j. Note: I&#39;m unable to use the doc connector for my needs, so I&#39;d like to get them to work in one application.\r\n\r\n**Error I receive:**\r\n\r\n&gt; &quot;Class class com.henry.Neo4j.HenryNode is not a valid entity class.\r\n&gt; Please check the entity mapping.&quot;\r\n\r\n**Pom.xml:**\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-neo4j&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Application.java:**\r\n\r\n    @SpringBootApplication\r\n    @EnableMongoRepositories(&quot;com.henry.MongoDB.repository&quot;)\r\n    @EnableNeo4jRepositories(basePackages = &quot;com.henry.Neo4j.repository&quot;)\r\n    public class HenryApplication extends SpringBootServletInitializer {\r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(HenryApplication.class, args);\r\n        }\r\n    }\r\n\r\n**com.henry.Neo4j.repository:**\r\n\r\n    public interface HenryNeo4JRepository extends Neo4jRepository&lt;HenryNode, Long&gt; {\r\n    }\r\n\r\n**com.henry.Neo4j:**\r\n\r\n    @NodeEntity\r\n    public class HenryNode {\r\n        @Id @GeneratedValue private Long id;\r\n        public String someString;\r\n    }\r\n\r\n**com.henry.MongoDB.repository:**\r\n\r\n    public interface HenryMongoRepository extends MongoRepository&lt;HenryDocument, String&gt; {\r\n    }\r\n\r\n**com.henry.MongoDB:**\r\n\r\n    @Document\r\n    public class HenryDocument {\r\n    \r\n        @Id public String id;\r\n        public String someString;\r\n    }\r\n\r\n**Logs when exception happens:**\r\n\r\n    2018-04-07 15:17:44.664  INFO 44701 --- [nio-8080-exec-2] Driver                                   : Driver instance org.neo4j.driver.internal.InternalDriver@770b6556 created\r\n    2018-04-07 15:17:46.904 ERROR 44701 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: Class class com.henry.Neo4j.HenryNode is not a valid entity class. Please check the entity mapping.] with root cause\r\n    \r\n    java.lang.IllegalArgumentException: Class class com.henry.Neo4j.HenryNode is not a valid entity class. Please check the entity mapping.\r\n    \tat org.neo4j.ogm.session.delegates.SaveDelegate.save(SaveDelegate.java:88) ~[neo4j-ogm-core-3.1.0.jar:3.1.0]\r\n    \tat org.neo4j.ogm.session.delegates.SaveDelegate.save(SaveDelegate.java:40) ~[neo4j-ogm-core-3.1.0.jar:3.1.0]\r\n    \tat org.neo4j.ogm.session.Neo4jSession.save(Neo4jSession.java:469) ~[neo4j-ogm-core-3.1.0.jar:3.1.0]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invoke(SharedSessionCreator.java:131) ~[spring-data-neo4j-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat com.sun.proxy.$Proxy103.save(Unknown Source) ~[na:na]\r\n    \tat org.springframework.data.neo4j.repository.support.SimpleNeo4jRepository.save(SimpleNeo4jRepository.java:73) ~[spring-data-neo4j-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:377) ~[spring-data-commons-2.0.6.RELEASE.jar:2.0.6.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:200) ~[spring-data-commons-2.0.6.RELEASE.jar:2.0.6.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:629) ~[spring-data-commons-2.0.6.RELEASE.jar:2.0.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:593) ~[spring-data-commons-2.0.6.RELEASE.jar:2.0.6.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:578) ~[spring-data-commons-2.0.6.RELEASE.jar:2.0.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:59) ~[spring-data-commons-2.0.6.RELEASE.jar:2.0.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294) ~[spring-tx-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61) ~[spring-data-commons-2.0.6.RELEASE.jar:2.0.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat com.sun.proxy.$Proxy105.save(Unknown Source) ~[na:na]\r\n    \tat com.henry.Neo4j.Neo4jController.saveToGraph(Neo4jController.java:49) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:888) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:664) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167) [na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641) [na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.29.jar:8.5.29]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:844) [na:na]\r\n\r\n**When I build, I see some odd errors in the logs:**\r\n\r\n    2018-04-07 16:01:17.702  INFO 45880 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;spring.data.neo4j-org.springframework.boot.autoconfigure.data.neo4j.Neo4jProperties&#39; of type [org.springframework.boot.autoconfigure.data.neo4j.Neo4jProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n    2018-04-07 16:01:17.715  INFO 45880 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;configuration&#39; of type [org.neo4j.ogm.config.Configuration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n    2018-04-07 16:01:17.863  INFO 45880 --- [           main] org.neo4j.ogm.metadata.DomainInfo        : Starting Post-processing phase\r\n    2018-04-07 16:01:17.864  INFO 45880 --- [           main] org.neo4j.ogm.metadata.DomainInfo        : Building annotation class map\r\n    2018-04-07 16:01:17.864  INFO 45880 --- [           main] org.neo4j.ogm.metadata.DomainInfo        : Building interface class map for 0 classes\r\n    2018-04-07 16:01:17.866  INFO 45880 --- [           main] org.neo4j.ogm.metadata.DomainInfo        : Post-processing complete\r\n    2018-04-07 16:01:17.895  INFO 45880 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;sessionFactory&#39; of type [org.neo4j.ogm.session.SessionFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n    2018-04-07 16:01:20.448  WARN 45880 --- [           main] o.s.d.n.mapping.Neo4jPersistentProperty  : Owning ClassInfo is null for property: private java.lang.Long com.henry.Neo4j.HenryNode.id\r\n\r\nAny help would be most appreciated. Thank you!","link":"https://stackoverflow.com/questions/49712869/issue-using-neo4j-and-mongodb-together-in-a-java-spring-5-application","title":"Issue using Neo4j and MongoDB together in a Java Spring 5 application"},{"tags":["neo4j","cypher","graph-databases"],"answers":[{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523140987,"creation_date":1523140987,"answer_id":49712688,"question_id":49712520,"share_link":"https://stackoverflow.com/a/49712688","body_markdown":"Not quite sure how you&#39;re getting that output, that return shouldn&#39;t be returning both of them as key value pairs. Instead I would expect something like: `{&quot;c.name&quot;:&quot;fighting&quot;, &quot;avg(r.weight)&quot;:0.334}`, with separate records for each pair.\r\n\r\nYou may need [APOC procedures][1] for this, as you need a means to set the property key to the value of the category name. That&#39;s a bit tricky, but you can do this by creating a map from the collected pairs, then use SET with += to update the relevant properties:\r\n\r\n    MATCH (m:Movie {name: &quot;The Matrix&quot;})&lt;-[:TAKEN_FROM]-(:Image)-[r:CLASSIFIED_AS]-&gt;(c:Category) \r\n    WITH m, c.name as name, avg(r.weight) as weight\r\n    WITH m, collect([name, weight]) as category\r\n    WITH m, apoc.map.fromPairs(category) as categories\r\n    SET m += categories\r\n\r\nAs far as batching goes, take a look at `apoc.periodic.iterate()`, it will allow you to iterate on the streamed results of the outer query and execute the inner query on batches of the stream:\r\n\r\n    CALL apoc.periodic.iterate(\r\n     &quot;MATCH (m:Movie)\r\n     RETURN m&quot;,\r\n     &quot;MATCH (m)&lt;-[:TAKEN_FROM]-(:Image)-[r:CLASSIFIED_AS]-&gt;(c:Category) \r\n      WITH m, c.name as name, avg(r.weight) as weight\r\n      WITH m, collect([name, weight]) as category\r\n      WITH m, apoc.map.fromPairs(category) as categories\r\n      SET m += categories&quot;,\r\n    {iterateList:true, parallel:false}) YIELD total, batches, errorMessages\r\n    RETURN total, batches, errorMessages\r\n\r\n\r\n  [1]: https://neo4j-contrib.github.io/neo4j-apoc-procedures/#_map_functions","link":"https://stackoverflow.com/questions/49712520/how-do-i-set-relationship-data-as-properties-on-a-node/49712688#49712688","title":"How do I set relationship data as properties on a node?"}],"owner":{"reputation":21,"user_id":6095520,"user_type":"registered","profile_image":"https://graph.facebook.com/215034385499496/picture?type=large","display_name":"David Apple","link":"https://stackoverflow.com/users/6095520/david-apple"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49712688,"answer_count":1,"score":0,"last_activity_date":1523140987,"creation_date":1523139681,"question_id":49712520,"share_link":"https://stackoverflow.com/q/49712520","body_markdown":"I&#39;ve taken the leap from SQL to Neo4j. I have a few complicated relationships that I need to set as properties on nodes as the first step towards building a recommendation engine.\r\n\r\nThis Cypher query returns a list of categories and weights.\r\n\r\n`MATCH (m:Movie {name: &quot;The Matrix&quot;})&lt;-[:TAKEN_FROM]-(i:Image)-[r:CLASSIFIED_AS]-&gt;(c:Category) RETURN c.name, avg(r.weight)`\r\n\r\nThis returns\r\n\r\n`{ &quot;fighting&quot;: 0.334, &quot;looking moody&quot;: 0.250, &quot;lying down&quot;: 0.237 }`\r\n\r\n**How do I set these results as key value pairs on the parent node?**\r\n\r\nThe desired outcome is this:\r\n\r\n`(m:Movie { &quot;name&quot;: &quot;The Matrix&quot;, &quot;fighting&quot;: 0.334, &quot;looking moody&quot;: 0.250, &quot;lying down&quot;: 0.237 })`\r\n\r\nAlso, I assume I should process my (m:Movie) nodes in batches so what is the best way of accomplishing this?\r\n","link":"https://stackoverflow.com/questions/49712520/how-do-i-set-relationship-data-as-properties-on-a-node","title":"How do I set relationship data as properties on a node?"},{"tags":["r","neo4j","r-neo4j"],"comments":[{"owner":{"reputation":860,"user_id":631312,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/3e5c973365263650d2c54b162d35e874?s=128&d=identicon&r=PG","display_name":"Raman","link":"https://stackoverflow.com/users/631312/raman"},"edited":false,"score":0,"creation_date":1523140217,"post_id":49711964,"comment_id":86438624,"link":"https://stackoverflow.com/questions/49711964/rneo4j-db-connectivity-issues#comment86438624_49711964"}],"owner":{"reputation":860,"user_id":631312,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/3e5c973365263650d2c54b162d35e874?s=128&d=identicon&r=PG","display_name":"Raman","link":"https://stackoverflow.com/users/631312/raman"},"last_editor":{"reputation":860,"user_id":631312,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/3e5c973365263650d2c54b162d35e874?s=128&d=identicon&r=PG","display_name":"Raman","link":"https://stackoverflow.com/users/631312/raman"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523135232,"creation_date":1523134919,"last_edit_date":1523135232,"question_id":49711964,"share_link":"https://stackoverflow.com/q/49711964","body_markdown":"Following call returns &quot;Error: Success: (200) OK&quot;\r\n\r\n    graph &lt;- startGraph(&quot;http://localhost:7474/db/data/&quot;)\r\n\r\nI was adding nodes after above call, but nothing was appearing in database.\r\n\r\nWhen I try to print value pf graph, I get an error message \r\n\r\n    Error in print(graph) : object &#39;graph&#39; not found \r\n\r\n","link":"https://stackoverflow.com/questions/49711964/rneo4j-db-connectivity-issues","title":"RNeo4j: DB connectivity issues"},{"tags":["graph","neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":1,"creation_date":1523135658,"post_id":49710856,"comment_id":86437612,"link":"https://stackoverflow.com/questions/49710610/how-to-merge-on-a-relationship-between-three-existing-nodes-in-cypher/49710856#comment86437612_49710856"}],"tags":[],"owner":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523199053,"last_edit_date":1523199053,"creation_date":1523127235,"answer_id":49710856,"question_id":49710610,"share_link":"https://stackoverflow.com/a/49710856","body_markdown":"You can match all your nodes and keep the identifiers around and then re-use those identifiers.\r\n\r\n    MATCH (a:Node {name: &#39;A&#39;})\r\n    MATCH (b:Node {name: &#39;B&#39;})\r\n    MATCH (c:Node {name: &#39;C&#39;})\r\n    MERGE (z:Node {name: &#39;Z&#39;})\r\n    MERGE (a)-[:HAS]-&gt;(z)\r\n    MERGE (b)-[:SENT]-&gt;(z)\r\n    MERGE (c)-[:RECEIVED]-&gt;(z)\r\n\r\n","link":"https://stackoverflow.com/questions/49710610/how-to-merge-on-a-relationship-between-three-existing-nodes-in-cypher/49710856#49710856","title":"How to merge on a relationship between three existing nodes in Cypher?"}],"owner":{"reputation":13,"user_id":8015503,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-Mj08HNe1B-c/AAAAAAAAAAI/AAAAAAAAAAs/oPL_sWybqFw/photo.jpg?sz=128","display_name":"Colby Cox","link":"https://stackoverflow.com/users/8015503/colby-cox"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1523199053,"creation_date":1523125740,"question_id":49710610,"share_link":"https://stackoverflow.com/q/49710610","body_markdown":"Nodes `A`, `B`, and `C` already exist. I want to merge the node `Z` **between `A`, `B`, and `C`**. I know that I can merge between 2 of the nodes as follow:\r\n`MERGE (A)-[:HAS]-&gt;(Z)&lt;-[:SENT]-(B)`. However, I am curious how I could also merge with `C`? \r\n\r\n\r\n                                  +-------+\r\n                                  |       |\r\n                                  |  A    |\r\n                                  |       |\r\n                                  +---+---+\r\n                                      |\r\n                                      |\r\n                                      |\r\n                                      |\r\n                                      |\r\n                                      | HAS\r\n                                      |\r\n                                      |\r\n                                      |\r\n                                      |\r\n                                 +----+-----+\r\n                                 |          |\r\n                                 |    Z     |\r\n                                 |          |\r\n                                 |          |\r\n                                 +----------+\r\n                                 |          |\r\n                                 |          |\r\n                                 |          |              +-----------+\r\n    +----------+                 |          |              |           |\r\n    |          |                 |          |              |           |\r\n    |          |                 |          |              |           |\r\n    |   B      +-----------------+          +--------------+    C      |\r\n    |          |        SENT                      RECV&#39;D   |           |\r\n    |          |                                           |           |\r\n    |          |                                           |           |\r\n    +----------+                                           +-----------+\r\n\r\n","link":"https://stackoverflow.com/questions/49710610/how-to-merge-on-a-relationship-between-three-existing-nodes-in-cypher","title":"How to merge on a relationship between three existing nodes in Cypher?"},{"tags":["c#","neo4j","uwp","neo4jclient","graphenedb"],"answers":[{"comments":[{"owner":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"edited":false,"score":0,"creation_date":1523122119,"post_id":49709760,"comment_id":86433559,"link":"https://stackoverflow.com/questions/49709372/how-to-return-the-object-tree-from-a-query-from-neo4j-graphenedb-to-c/49709760#comment86433559_49709760"},{"owner":{"reputation":101,"user_id":5149052,"user_type":"registered","profile_image":"https://i.stack.imgur.com/To1LA.png?s=128&g=1","display_name":"Juanjo","link":"https://stackoverflow.com/users/5149052/juanjo"},"reply_to_user":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"edited":false,"score":0,"creation_date":1523122566,"post_id":49709760,"comment_id":86433727,"link":"https://stackoverflow.com/questions/49709372/how-to-return-the-object-tree-from-a-query-from-neo4j-graphenedb-to-c/49709760#comment86433727_49709760"},{"owner":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"edited":false,"score":0,"creation_date":1523122735,"post_id":49709760,"comment_id":86433771,"link":"https://stackoverflow.com/questions/49709372/how-to-return-the-object-tree-from-a-query-from-neo4j-graphenedb-to-c/49709760#comment86433771_49709760"},{"owner":{"reputation":101,"user_id":5149052,"user_type":"registered","profile_image":"https://i.stack.imgur.com/To1LA.png?s=128&g=1","display_name":"Juanjo","link":"https://stackoverflow.com/users/5149052/juanjo"},"reply_to_user":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"edited":false,"score":1,"creation_date":1523123597,"post_id":49709760,"comment_id":86434033,"link":"https://stackoverflow.com/questions/49709372/how-to-return-the-object-tree-from-a-query-from-neo4j-graphenedb-to-c/49709760#comment86434033_49709760"}],"tags":[],"owner":{"reputation":101,"user_id":5149052,"user_type":"registered","profile_image":"https://i.stack.imgur.com/To1LA.png?s=128&g=1","display_name":"Juanjo","link":"https://stackoverflow.com/users/5149052/juanjo"},"last_editor":{"reputation":101,"user_id":5149052,"user_type":"registered","profile_image":"https://i.stack.imgur.com/To1LA.png?s=128&g=1","display_name":"Juanjo","link":"https://stackoverflow.com/users/5149052/juanjo"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523123708,"last_edit_date":1523123708,"creation_date":1523120209,"answer_id":49709760,"question_id":49709372,"share_link":"https://stackoverflow.com/a/49709760","body_markdown":"It looks like it can&#39;t find the procedure, probably because APOC is not installed. You can add APOC to GrapheneDB from the Extensions management view. More info [here](https://docs.graphenedb.com/docs/stored-procedures#section-adding-apoc)\r\n\r\n","link":"https://stackoverflow.com/questions/49709372/how-to-return-the-object-tree-from-a-query-from-neo4j-graphenedb-to-c/49709760#49709760","title":"How to return the object tree from a query from Neo4j Graphenedb to C#"}],"owner":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"last_editor":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49709760,"answer_count":1,"score":0,"last_activity_date":1523123708,"creation_date":1523117715,"last_edit_date":1523118516,"question_id":49709372,"share_link":"https://stackoverflow.com/q/49709372","body_markdown":"I doing a query on Neo4j on GrapheneDB, but it returns all combinations of match,&lt;br&gt;\r\nso I have this tree:\r\n\r\n[![Tree][1]][1]\r\n\r\nBut when I query it, it returns as a list of combinations of all paths, like a combinational table (even in the JSON view):\r\n[![table][2]][2]\r\n\r\n\r\nI need the nested tree objects, so I can bind it easily on UWP interface, something like:\r\nhttps://stackoverflow.com/questions/34234373/using-cypher-to-return-nested-hierarchical-json-from-a-tree\r\n\r\nI used this command:\r\n\r\n    MATCH (p:Pessoa)-[ev:VENDA]-(y)-[e1]-(itemdopedido)-[e2]-(itemdoestoque) \r\n    CALL apoc.convert.toTree(p) yield value\r\n    RETURN value;\r\n\r\nbut I it is giving me this error:\r\n\r\n&gt; ERROR Neo.ClientError.Procedure.ProcedureNotFound There is no\r\n&gt; procedure with the name `apoc.convert.toTree` registered for this\r\n&gt; database instance. Please ensure you&#39;ve spelled the procedure name\r\n&gt; correctly and that the procedure is properly deployed.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ff8qr.png\r\n  [2]: https://i.stack.imgur.com/DqKKE.png\r\n\r\n\r\n\r\nOn C# I created my Classes for the Vertexes and Edges:\r\n\r\n    public class Pedido\r\n    {\r\n        public string since { get; set; }\r\n    }\r\n\r\n    public class ItemDoPedido\r\n    {\r\n        public double ValorUnitario { get; set; }\r\n    }\r\n\r\n    public class ItemDoEstoque\r\n    {\r\n        public string Nome { get; set; }\r\n        public string UnidadeDeMedida { get; set; }\r\n    }\r\n\r\n    public class Pessoa\r\n    {\r\n        public string Nome { get; set; }\r\n        //public string Telefone { get; set; }\r\n        public string Facebook { get; set; }\r\n    }\r\n\r\nThen I tried to use some Grouping:\r\n\r\n    var results = query.Results.GroupBy(\r\n                        q =&gt; new { q.Pessoa, q.Pedido, q.ItemDoPedido, q.ItemDoEstoque }\r\n\r\n                    )\r\n                    .Select(y =&gt; new\r\n                    {\r\n                        Pessoa = y.Key.Pessoa,\r\n                        Venda = y.Key.Pedido//,                        \r\n                        //Children = y.ToList()\r\n                    }\r\n                    );\r\n                ;\r\n but I think it is getting complicated, I preffer that the Object tree comes ready from the Server Query.\r\n\r\n\r\n\r\n**How can I do this?**","link":"https://stackoverflow.com/questions/49709372/how-to-return-the-object-tree-from-a-query-from-neo4j-graphenedb-to-c","title":"How to return the object tree from a query from Neo4j Graphenedb to C#"},{"tags":["neo4j"],"answers":[{"comments":[{"owner":{"reputation":121,"user_id":6566172,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/aa7d413fad18e559968c5c19911ff20c?s=128&d=identicon&r=PG&f=1","display_name":"scroobius","link":"https://stackoverflow.com/users/6566172/scroobius"},"edited":false,"score":0,"creation_date":1523155194,"post_id":49713591,"comment_id":86441017,"link":"https://stackoverflow.com/questions/49708583/how-to-perform-content-based-filtering-neo4j-with-all-item-nodes-connected-to-ea/49713591#comment86441017_49713591"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523151409,"creation_date":1523151409,"answer_id":49713591,"question_id":49708583,"share_link":"https://stackoverflow.com/a/49713591","body_markdown":"You were almost there. This should work:\r\n\r\n    MATCH (u:User{id:&quot;Dorian&quot;})-[:LIKES]-(m:Media)\r\n    WITH collect(m) as mu\r\n    UNWIND mu as m\r\n    MATCH (m)-[s:ISSIMILAR]-(o:Media)\r\n    WHERE NOT o IN mu\r\n    WITH o ORDER BY s.similarity DESC\r\n    RETURN DISTINCT o;\r\n\r\nUnfortunately, Cypher does not like `RETURN DISTINCT o ORDER BY s.similarity DESC`, but accepts the logically equivalent `WITH o ORDER BY s.similarity DESC RETURN DISTINCT o`.","link":"https://stackoverflow.com/questions/49708583/how-to-perform-content-based-filtering-neo4j-with-all-item-nodes-connected-to-ea/49713591#49713591","title":"How to perform content based filtering neo4j with all item nodes connected to each other"}],"owner":{"reputation":121,"user_id":6566172,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/aa7d413fad18e559968c5c19911ff20c?s=128&d=identicon&r=PG&f=1","display_name":"scroobius","link":"https://stackoverflow.com/users/6566172/scroobius"},"last_editor":{"reputation":144,"user_id":8860100,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-a8TaNYBDLdM/AAAAAAAAAAI/AAAAAAAAE4Q/xemMVwmD2LM/photo.jpg?sz=128","display_name":"Yoginth","link":"https://stackoverflow.com/users/8860100/yoginth"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49713591,"answer_count":1,"score":0,"last_activity_date":1523151409,"creation_date":1523112647,"last_edit_date":1523119124,"question_id":49708583,"share_link":"https://stackoverflow.com/q/49708583","body_markdown":"I have two kinds of nodes in my database:\r\n1) User\r\n2) Media\r\n3) Tag\r\n\r\n\r\n\r\nI also have a relationship with all Media nodes like such:\r\n\r\n(:Media)-[:IS_SIMILAR]-(:Media)\r\n\r\nAnd another relationship (:Media)-[:HAS_TAG]-(:Tag)\r\n\r\nAnd another relationship (:User)-[:LIKES]-(:Media)\r\n\r\nHere&#39;s a visualization:\r\n\r\n[![The green nodes are media and blue is a user][1]][1]\r\nThe green nodes are media and blue is a user (i excluded the tag nodes)\r\n\r\n\r\n\r\nThis IS_SIMILAR relationship has an attribute similarity. This attribute similarity is computed by calculating the number of tags each node pair has in common.\r\n\r\nI am trying to perform content-based filtering by finding the media a user likes and getting top 10 media based on the similarity attribute.\r\n\r\nI construct the following query:\r\n\r\n    Match(u:User{id:&quot;Dorian&quot;})-[:LIKES]-(m:Media)\r\n    WITH collect(m) as mu\r\n    UNWIND mu as m\r\n    Match(m)-[s:ISSIMILAR]-(o:Media)\r\n    WHERE NOT o in mu\r\n    RETURN DISTINCT o,s ORDER BY  s.similarity DESC\r\n\r\nWith the following results:\r\n\r\n[![enter image description here][2]][2]\r\nUnfortunately, there are repeated Media nodes because each  Media node that is liked by a user also has an IS_SIMILAR relationship with other media nodes.\r\n\r\nCan you suggest:\r\n\r\n1) how I can avoid this problem\r\n\r\n2) another method to perform content-based recommendation with my schema?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lpfsP.png\r\n  [2]: https://i.stack.imgur.com/ziqm2.png","link":"https://stackoverflow.com/questions/49708583/how-to-perform-content-based-filtering-neo4j-with-all-item-nodes-connected-to-ea","title":"How to perform content based filtering neo4j with all item nodes connected to each other"},{"tags":["database","neo4j","cypher","neo4jclient"],"comments":[{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523177197,"post_id":49706956,"comment_id":86445150,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86445150_49706956"},{"owner":{"reputation":29,"user_id":7598240,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hXPbL58nUWU/AAAAAAAAAAI/AAAAAAAAAZc/9iXLZx0R2Jg/photo.jpg?sz=128","display_name":"Amirhosein Rajabi","link":"https://stackoverflow.com/users/7598240/amirhosein-rajabi"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523185668,"post_id":49706956,"comment_id":86447359,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86447359_49706956"},{"owner":{"reputation":12306,"user_id":2920686,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/qLSFx.jpg?s=128&g=1","display_name":"FrobberOfBits","link":"https://stackoverflow.com/users/2920686/frobberofbits"},"edited":false,"score":0,"creation_date":1523193519,"post_id":49706956,"comment_id":86449310,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86449310_49706956"},{"owner":{"reputation":29,"user_id":7598240,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hXPbL58nUWU/AAAAAAAAAAI/AAAAAAAAAZc/9iXLZx0R2Jg/photo.jpg?sz=128","display_name":"Amirhosein Rajabi","link":"https://stackoverflow.com/users/7598240/amirhosein-rajabi"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523254086,"post_id":49706956,"comment_id":86466674,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86466674_49706956"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523268005,"post_id":49706956,"comment_id":86474016,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86474016_49706956"},{"owner":{"reputation":29,"user_id":7598240,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hXPbL58nUWU/AAAAAAAAAAI/AAAAAAAAAZc/9iXLZx0R2Jg/photo.jpg?sz=128","display_name":"Amirhosein Rajabi","link":"https://stackoverflow.com/users/7598240/amirhosein-rajabi"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523268238,"post_id":49706956,"comment_id":86474151,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86474151_49706956"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523268830,"post_id":49706956,"comment_id":86474503,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86474503_49706956"},{"owner":{"reputation":29,"user_id":7598240,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hXPbL58nUWU/AAAAAAAAAAI/AAAAAAAAAZc/9iXLZx0R2Jg/photo.jpg?sz=128","display_name":"Amirhosein Rajabi","link":"https://stackoverflow.com/users/7598240/amirhosein-rajabi"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523276705,"post_id":49706956,"comment_id":86479442,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86479442_49706956"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523284440,"post_id":49706956,"comment_id":86484738,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86484738_49706956"},{"owner":{"reputation":29,"user_id":7598240,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hXPbL58nUWU/AAAAAAAAAAI/AAAAAAAAAZc/9iXLZx0R2Jg/photo.jpg?sz=128","display_name":"Amirhosein Rajabi","link":"https://stackoverflow.com/users/7598240/amirhosein-rajabi"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523340081,"post_id":49706956,"comment_id":86506974,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86506974_49706956"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1523351020,"post_id":49706956,"comment_id":86513513,"link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j#comment86513513_49706956"}],"owner":{"reputation":29,"user_id":7598240,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hXPbL58nUWU/AAAAAAAAAAI/AAAAAAAAAZc/9iXLZx0R2Jg/photo.jpg?sz=128","display_name":"Amirhosein Rajabi","link":"https://stackoverflow.com/users/7598240/amirhosein-rajabi"},"last_editor":{"reputation":29,"user_id":7598240,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hXPbL58nUWU/AAAAAAAAAAI/AAAAAAAAAZc/9iXLZx0R2Jg/photo.jpg?sz=128","display_name":"Amirhosein Rajabi","link":"https://stackoverflow.com/users/7598240/amirhosein-rajabi"},"comment_count":11,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1523276652,"creation_date":1523101012,"last_edit_date":1523276652,"question_id":49706956,"share_link":"https://stackoverflow.com/q/49706956","body_markdown":"[![Example][1]][1]\r\n\r\nin above image we have Path X and Path Y,we have Node A that has Relation With Node B,the relation and the relation direction is important, i want to return return Node A and Node B from Path Y.\r\n\r\nthis is my query : \r\n\r\n    MATCH (p:Product \r\n    {HashTitle:\r\n    &quot;44cc475de4e282d40210f5c057ccd542934dd0e2f0da92c10cde6589bec14ce2&quot;}) \r\n    MATCH pw=(w1:Word)-[:NEXT*]-&gt;(wn:Word) \r\n    WHERE (p)-[:PRODUCT_HAS_DESCRIPTION]-(w1) \r\n    MATCH pcd=(c1:CategoryDetect)-[:NEXT*]-(cn:CategoryDetect) \r\n    WHERE pcd in pw \r\n    RETURN pcd\r\n\r\n in last where clause I want to match pcd in pw graph and return if it matches.\r\n\r\n    create \r\n    (_15:`word`  {`Id`:&quot;1&quot;,`Title`:&quot;A&quot;}),\r\n    (_16:`word`  {`Id`:&quot;2&quot;,`Title`:&quot;B&quot;}),\r\n    (_17:`word`  {`Id`:&quot;3&quot;,`Title`:&quot;C&quot;}),\r\n    (_18:`word`  {`Id`:&quot;4&quot;,`Title`:&quot;D&quot;}),\r\n    (_19:`word`  {`Id`:&quot;5&quot;,`Title`:&quot;E&quot;}),\r\n    (_20:`word`  {`Id`:&quot;6&quot;,`Title`:&quot;F&quot;}),\r\n    (_21:`word`  {`Id`:&quot;7&quot;,`Title`:&quot;G&quot;}),\r\n    (_22:`word`  {`Id`:&quot;8&quot;,`Title`:&quot;H&quot;}),\r\n    (_23:`word`  {`Id`:&quot;9&quot;,`Title`:&quot;D&quot;}),\r\n    (_24:`word`  {`Id`:&quot;10&quot;,`Title`:&quot;A&quot;}),\r\n    (_25:`CategoryDetect`  {`Id`:&quot;1&quot;,`Title`:&quot;D&quot;}),\r\n    (_26:`CategoryDetect`  {`Id`:&quot;2&quot;,`Title`:&quot;E&quot;}),\r\n    (_15)-[:`NEXT`]-&gt;(_16),\r\n    (_16)-[:`NEXT`]-&gt;(_17),\r\n    (_17)-[:`NEXT`]-&gt;(_18),\r\n    (_18)-[:`NEXT`]-&gt;(_19),\r\n    (_19)-[:`NEXT`]-&gt;(_20),\r\n    (_20)-[:`NEXT`]-&gt;(_21),\r\n    (_21)-[:`NEXT`]-&gt;(_22),\r\n    (_22)-[:`NEXT`]-&gt;(_23),\r\n    (_23)-[:`NEXT`]-&gt;(_24),\r\n    (_25)-[:`NEXT`]-&gt;(_26)\r\n\r\nabove cypher query create a path with `Word` label and a path with `CategoryDetect` label. there is two CategoryDetect contains `D` and `E` Title in their parameters. what i wan&#39;t in output is to find `Word` which is containing same Title parameters, for this Example is Word `D` and `E`.\r\nand the important thing is the `:NEXT` relation between theme.the output should contains word `D` and `E` which had `:NEXT` relation between theme.  \r\n\r\n  [1]: https://i.stack.imgur.com/NYzxR.png","link":"https://stackoverflow.com/questions/49706956/how-to-match-path-from-another-path-in-neo4j","title":"how to Match path from another Path in NEO4J?"},{"tags":["neo4j","workflow","graph-databases","data-lineage","impact-analysis"],"answers":[{"comments":[{"owner":{"reputation":8,"user_id":9611085,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d505aadeb1bba9b1f2131ebcb4bea10e?s=128&d=identicon&r=PG&f=1","display_name":"Mark L","link":"https://stackoverflow.com/users/9611085/mark-l"},"edited":false,"score":0,"creation_date":1523199606,"post_id":49712017,"comment_id":86451314,"link":"https://stackoverflow.com/questions/49706575/modelling-graph-in-neo4j-showing-workflow-and-impact/49712017#comment86451314_49712017"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"reply_to_user":{"reputation":8,"user_id":9611085,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d505aadeb1bba9b1f2131ebcb4bea10e?s=128&d=identicon&r=PG&f=1","display_name":"Mark L","link":"https://stackoverflow.com/users/9611085/mark-l"},"edited":false,"score":0,"creation_date":1523217293,"post_id":49712017,"comment_id":86457560,"link":"https://stackoverflow.com/questions/49706575/modelling-graph-in-neo4j-showing-workflow-and-impact/49712017#comment86457560_49712017"}],"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1523135388,"creation_date":1523135388,"answer_id":49712017,"question_id":49706575,"share_link":"https://stackoverflow.com/a/49712017","body_markdown":"You&#39;ve done some thorough exploration here, you&#39;ve found designs for which your queries work. There is a cost to them, however.\r\n\r\nDesign 2 doesn&#39;t use relationships at all, so the solution doesn&#39;t seem very graphy. It also requires you to ensure the workflows lists on the relevant nodes are kept in sync and up to date. That seems to have a higher maintenance cost.\r\n\r\nDesign 3 has a similar cost, but now the properties are on the relationships, and you also have to provide redundant relationships throughout your model, so the cost is higher.\r\n\r\nDesign 4 requires redundancy of each used step in the process, where every subgraph is a single path from provider to report. While that is easy to understand and query over, redundant nodes and relationships probably aren&#39;t the way to go.\r\n\r\nDesign 1 is interesting in that it provides the correct answers but only to certain questions...questions about impacts from processors, preprocessors, and datastores in the path, what happens when these hardware and software components go down.\r\n\r\nHowever it doesn&#39;t work for data lineage/dependence. Not yet. You may want to consider altering design 1 so that there are separate paths to consider for data dependence vs what you already have for the pipeline process.\r\n\r\nData dependence can be a different thing. If you&#39;re asking questions about this, then you&#39;re mostly concerned with the inputs and outputs, files to reports. In that case you might consider creating a :DEPENDS_ON relationship between the relevant files and reports nodes.\r\n\r\nConsider adding this in to design 1&#39;s creation script at the end:\r\n\r\n    match (f:File), (r:Report{name:&#39;Report A&#39;})\r\n    where f.name in [&#39;File 1&#39;, &#39;File 3&#39;]\r\n    create (r)&lt;-[:USED_BY]-(f)\r\n\r\nand\r\n\r\n    match (f:File), (r:Report{name:&#39;Report B&#39;})\r\n    where f.name in [&#39;File 2&#39;]\r\n    create (r)&lt;-[:USED_BY]-(f)\r\n\r\nFor questions about the data lineages, your queries can use only the relevant relationships, in this case :PROVIDES and :USED_BY.\r\n\r\n    match path = (:Provider{name:&#39;Provider 1&#39;})-[:PROVIDES|USED_BY*]-&gt;(r:Report)\r\n    return path, r.name as report\r\n\r\nOr the inverse, what sources does a report draw upon?\r\n\r\n    match path = (p:Provider)-[:PROVIDES|USED_BY*]-&gt;(r:Report{name:&#39;Report A&#39;)\r\n    return path, p.name as report\r\n\r\nAnd if your model changes so that intermediary reports are modeled (the output of preprocess and process operations), then you can create :USED_BY relationships to those in a chain from the :File to the :Report (instead of directly between the :File and :Report) so you&#39;ll see the chain of dependencies during the processing.","link":"https://stackoverflow.com/questions/49706575/modelling-graph-in-neo4j-showing-workflow-and-impact/49712017#49712017","title":"Modelling graph in Neo4j showing workflow and impact"}],"owner":{"reputation":8,"user_id":9611085,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d505aadeb1bba9b1f2131ebcb4bea10e?s=128&d=identicon&r=PG&f=1","display_name":"Mark L","link":"https://stackoverflow.com/users/9611085/mark-l"},"last_editor":{"reputation":8,"user_id":9611085,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d505aadeb1bba9b1f2131ebcb4bea10e?s=128&d=identicon&r=PG&f=1","display_name":"Mark L","link":"https://stackoverflow.com/users/9611085/mark-l"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49712017,"answer_count":1,"score":1,"last_activity_date":1523198130,"creation_date":1523098217,"last_edit_date":1523198130,"question_id":49706575,"share_link":"https://stackoverflow.com/q/49706575","body_markdown":"New to Neo4j but can see so many possibilities in graph databases, in particular IT data workflow and system impact. But unsure of the correct design for maximum efficiency.\r\n\r\nConsider a system that takes in files, processes them, stores them in database and makes data available in various reports. However, depending on the file, the data may be in one report, but not the other.\r\n\r\n[System Architecture and Reality][1]\r\n\r\nAn important use case is to be able to report the impact on downstream reports if upstream files are missing or components that process those files fail.\r\n\r\n[Test Cases][2]\r\n\r\nI have come up with 4 designs, 3 of which seem to work, but unsure which is best.\r\n\r\n[Design 1][3]\r\n\r\n[Design 2][4]\r\n\r\n[Design 3][5]\r\n\r\n[Design 4][6]\r\n\r\nWould appreciate any help or advice on this.\r\n\r\nCode used:\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    ---------------------------------------------------------------------------\r\n    -- Design Experiments\r\n    ---------------------------------------------------------------------------\r\n\r\n    // 1. Combination of the Workflows with shared nodes where they interact\r\n          with same Process or DataStore\r\n    ---------------------------------------------------------------------------\r\n\r\n    MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n, r\r\n\r\n    CREATE (p1:Provider {name: &quot;Provider 1&quot;})\r\n    CREATE (p2:Provider {name: &quot;Provider 2&quot;})\r\n    CREATE (f1:File {name: &quot;File 1&quot;})\r\n    CREATE (f2:File {name: &quot;File 2&quot;})\r\n    CREATE (f3:File {name: &quot;File 3&quot;})\r\n    CREATE (pp:PreProcess {name: &quot;PreProcess&quot;})\r\n    CREATE (p:Process {name: &quot;Process&quot;})\r\n    CREATE (d:DataStore {name: &quot;DataStore&quot;})\r\n    CREATE (rA:Report {name: &quot;Report A&quot;})\r\n    CREATE (rB:Report {name: &quot;Report B&quot;})\r\n    CREATE (p1)-[:PROVIDES{}]-&gt;(f1)\r\n    CREATE (p1)-[:PROVIDES{}]-&gt;(f2)\r\n    CREATE (p2)-[:PROVIDES{}]-&gt;(f3)\r\n    CREATE (f1)-[:DELIVERS_TO{}]-&gt;(pp)\r\n    CREATE (pp)-[:DELIVERS_TO{}]-&gt;(p)\r\n    CREATE (f2)-[:DELIVERS_TO{}]-&gt;(p)\r\n    CREATE (f3)-[:DELIVERS_TO{}]-&gt;(p)\r\n    CREATE (p)-[:DELIVERS_TO{}]-&gt;(d)\r\n    CREATE (d)-[:DELIVERS_TO{}]-&gt;(rA)\r\n    CREATE (d)-[:DELIVERS_TO{}]-&gt;(rB)\r\n\r\n    // Show impacted reports if Provider 1 is down\r\n    MATCH (a:Provider {name:&quot;Provider 1&quot;})-[r*]-&gt;(rp:Report) RETURN rp\r\n\r\n    // Show impacted reports if Provider 2 is down\r\n    MATCH (a:Provider {name:&quot;Provider 2&quot;})-[r*]-&gt;(rp:Report) RETURN rp\r\n\r\n\r\n    // 2. Same node relationship design as #1, but assign a workflow property\r\n          to each node and relationship as a property array\r\n    ---------------------------------------------------------------------------\r\n\r\n    MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n, r\r\n\r\n    CREATE (p1:Provider {name: &quot;Provider 1&quot;, workflow: [&quot;workflow1&quot;,&quot;workflow2&quot;]})\r\n    CREATE (p2:Provider {name: &quot;Provider 2&quot;, workflow: [&quot;workflow3&quot;]})\r\n    CREATE (f1:File {name: &quot;File 1&quot;, workflow: [&quot;workflow1&quot;]})\r\n    CREATE (f2:File {name: &quot;File 2&quot;, workflow: [&quot;workflow2&quot;]})\r\n    CREATE (f3:File {name: &quot;File 3&quot;, workflow: [&quot;workflow3&quot;]})\r\n    CREATE (pp:PreProcess {name: &quot;PreProcess&quot;, workflow: [&quot;workflow1&quot;]})\r\n    CREATE (p:Process {name: &quot;Process&quot;, workflow: [&quot;workflow1&quot;,&quot;workflow2&quot;,&quot;workflow3&quot;]})\r\n    CREATE (d:DataStore {name: &quot;DataStore&quot;, workflow: [&quot;workflow1&quot;,&quot;workflow2&quot;,&quot;workflow3&quot;]})\r\n    CREATE (rA:Report {name: &quot;Report A&quot;, workflow: [&quot;workflow1&quot;,&quot;workflow3&quot;]})\r\n    CREATE (rB:Report {name: &quot;Report B&quot;, workflow: [&quot;workflow2&quot;]})\r\n    CREATE (p1)-[:PROVIDES{workflow: [&quot;workflow1&quot;]}]-&gt;(f1)\r\n    CREATE (p1)-[:PROVIDES{workflow: [&quot;workflow2&quot;]}]-&gt;(f2)\r\n    CREATE (p2)-[:PROVIDES{workflow: [&quot;workflow3&quot;]}]-&gt;(f3)\r\n    CREATE (f1)-[:DELIVERS_TO{workflow: [&quot;workflow1&quot;]}]-&gt;(pp)\r\n    CREATE (pp)-[:DELIVERS_TO{workflow: [&quot;workflow1&quot;]}]-&gt;(p)\r\n    CREATE (f2)-[:DELIVERS_TO{workflow: [&quot;workflow2&quot;]}]-&gt;(p)\r\n    CREATE (f3)-[:DELIVERS_TO{workflow: [&quot;workflow3&quot;]}]-&gt;(p)\r\n    CREATE (p)-[:DELIVERS_TO{workflow: [&quot;workflow1&quot;,&quot;workflow2&quot;,&quot;workflow3&quot;]}]-&gt;(d)\r\n    CREATE (d)-[:DELIVERS_TO{workflow: [&quot;workflow1&quot;,&quot;workflow3&quot;]}]-&gt;(rA)\r\n    CREATE (d)-[:DELIVERS_TO{workflow: [&quot;workflow2&quot;]}]-&gt;(rB)\r\n\r\n    // Show individual workflows\r\n    MATCH (p) WHERE filter(x in p.workflow WHERE x = &quot;workflow1&quot;) RETURN p\r\n    MATCH (p) WHERE filter(x in p.workflow WHERE x = &quot;workflow2&quot;) RETURN p\r\n    MATCH (p) WHERE filter(x in p.workflow WHERE x = &quot;workflow3&quot;) RETURN p\r\n\r\n    // Show impacted reports if Provider 1 is down\r\n    MATCH (a:Provider {name:&quot;Provider 1&quot;}) WITH a.workflow AS workflows \r\n    MATCH (r:Report) WHERE filter(x in r.workflow WHERE x in workflows)\r\n    RETURN r\r\n\r\n    // Show impacted reports if Provider 2 is down\r\n    MATCH (a:Provider {name:&quot;Provider 2&quot;}) WITH a.workflow AS workflows \r\n    MATCH (r:Report) WHERE filter(x in r.workflow WHERE x in workflows)\r\n    RETURN r\r\n\r\n\r\n    // 3. Same node relationship design as #1, but create a relationship\r\n          with a workflow property for each workflow, resulting in multiple\r\n          relatinships between nodes.\r\n    ---------------------------------------------------------------------------\r\n\r\n    MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n, r\r\n\r\n    CREATE (p1:Provider {name: &quot;Provider 1&quot;})\r\n    CREATE (p2:Provider {name: &quot;Provider 2&quot;})\r\n    CREATE (f1:File {name: &quot;File 1&quot;})\r\n    CREATE (f2:File {name: &quot;File 2&quot;})\r\n    CREATE (f3:File {name: &quot;File 3&quot;})\r\n    CREATE (pp:PreProcess {name: &quot;PreProcess&quot;})\r\n    CREATE (p:Process {name: &quot;Process&quot;})\r\n    CREATE (d:DataStore {name: &quot;DataStore&quot;})\r\n    CREATE (rA:Report {name: &quot;Report A&quot;})\r\n    CREATE (rB:Report {name: &quot;Report B&quot;})\r\n    CREATE (p1)-[:PROVIDES{workflow: &quot;workflow1&quot;}]-&gt;(f1)\r\n    CREATE (p1)-[:PROVIDES{workflow: &quot;workflow2&quot;}]-&gt;(f2)\r\n    CREATE (p2)-[:PROVIDES{workflow: &quot;workflow3&quot;}]-&gt;(f3)\r\n    CREATE (f1)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(pp)\r\n    CREATE (pp)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(p)\r\n    CREATE (f2)-[:DELIVERS_TO{workflow: &quot;workflow2&quot;}]-&gt;(p)\r\n    CREATE (f3)-[:DELIVERS_TO{workflow: &quot;workflow3&quot;}]-&gt;(p)\r\n    CREATE (p)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(d)\r\n    CREATE (p)-[:DELIVERS_TO{workflow: &quot;workflow2&quot;}]-&gt;(d)\r\n    CREATE (p)-[:DELIVERS_TO{workflow: &quot;workflow3&quot;}]-&gt;(d)\r\n    CREATE (d)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(rA)\r\n    CREATE (d)-[:DELIVERS_TO{workflow: &quot;workflow3&quot;}]-&gt;(rA)\r\n    CREATE (d)-[:DELIVERS_TO{workflow: &quot;workflow2&quot;}]-&gt;(rB)\r\n\r\n\r\n    // Show impacted reports if Provider 1 is down\r\n    MATCH (a:Provider {name:&quot;Provider 1&quot;})-[j]-&gt;(n)-[r*]-&gt;(g)-[t]-&gt;(rp:Report) WHERE j.workflow=t.workflow RETURN rp\r\n\r\n    // Show impacted reports if Provider 2 is down\r\n    MATCH (a:Provider {name:&quot;Provider 2&quot;})-[j]-&gt;(n)-[r*]-&gt;(g)-[t]-&gt;(rp:Report) WHERE j.workflow=t.workflow RETURN rp\r\n\r\n\r\n    // 4. Distinct set of nodes and relationships for each workflow, but all\r\n          with same node type so can still be matched\r\n    ---------------------------------------------------------------------------\r\n\r\n    MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n, r\r\n\r\n    CREATE (p1:Provider {name: &quot;Provider 1&quot;})\r\n    CREATE (p2:Provider {name: &quot;Provider 1&quot;})\r\n    CREATE (p3:Provider {name: &quot;Provider 2&quot;})\r\n    CREATE (f1:File {name: &quot;File 1&quot;})\r\n    CREATE (f2:File {name: &quot;File 2&quot;})\r\n    CREATE (f3:File {name: &quot;File 3&quot;})\r\n    CREATE (pp1:PreProcess {name: &quot;PreProcess&quot;})\r\n    CREATE (pc1:Process {name: &quot;Process&quot;})\r\n    CREATE (pc2:Process {name: &quot;Process&quot;})\r\n    CREATE (pc3:Process {name: &quot;Process&quot;})\r\n    CREATE (d1:DataStore {name: &quot;DataStore&quot;})\r\n    CREATE (d2:DataStore {name: &quot;DataStore&quot;})\r\n    CREATE (d3:DataStore {name: &quot;DataStore&quot;})\r\n    CREATE (rA1:Report {name: &quot;Report A&quot;})\r\n    CREATE (rB2:Report {name: &quot;Report B&quot;})\r\n    CREATE (rA3:Report {name: &quot;Report A&quot;})\r\n    CREATE (p1)-[:PROVIDES{workflow: &quot;workflow1&quot;}]-&gt;(f1)\r\n    CREATE (p2)-[:PROVIDES{workflow: &quot;workflow2&quot;}]-&gt;(f2)\r\n    CREATE (p3)-[:PROVIDES{workflow: &quot;workflow3&quot;}]-&gt;(f3)\r\n    CREATE (f1)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(pp1)\r\n    CREATE (pp1)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(pc1)\r\n    CREATE (f2)-[:DELIVERS_TO{workflow: &quot;workflow2&quot;}]-&gt;(pc2)\r\n    CREATE (f3)-[:DELIVERS_TO{workflow: &quot;workflow3&quot;}]-&gt;(pc3)\r\n    CREATE (pc1)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(d1)\r\n    CREATE (pc2)-[:DELIVERS_TO{workflow: &quot;workflow2&quot;}]-&gt;(d2)\r\n    CREATE (pc3)-[:DELIVERS_TO{workflow: &quot;workflow3&quot;}]-&gt;(d3)\r\n    CREATE (d1)-[:DELIVERS_TO{workflow: &quot;workflow1&quot;}]-&gt;(rA1)\r\n    CREATE (d2)-[:DELIVERS_TO{workflow: &quot;workflow3&quot;}]-&gt;(rB2)\r\n    CREATE (d3)-[:DELIVERS_TO{workflow: &quot;workflow2&quot;}]-&gt;(rA3)\r\n\r\n\r\n    // Show impacted reports if Provider 1 is down\r\n    MATCH (a:Provider {name:&quot;Provider 1&quot;})-[j*]-&gt;(rp:Report) RETURN rp\r\n\r\n    // Show impacted reports if Provider 2 is down\r\n    MATCH (a:Provider {name:&quot;Provider 2&quot;})-[j*]-&gt;(rp:Report) RETURN rp\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nFollowing recommendation, have expanded Design 1 to include a direct link between File and Report.\r\n\r\n[Design 1a][7]\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n    // 1a. Combination of the Workflows with shared nodes where they interact\r\n       with same Process or DataStore. \r\n    ---------------------------------------------------------------------------\r\n\r\n    MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n, r\r\n\r\n    CREATE (p1:Provider {name: &quot;Provider 1&quot;})\r\n    CREATE (p2:Provider {name: &quot;Provider 2&quot;})\r\n    CREATE (f1:File {name: &quot;File 1&quot;})\r\n    CREATE (f2:File {name: &quot;File 2&quot;})\r\n    CREATE (f3:File {name: &quot;File 3&quot;})\r\n    CREATE (pp:PreProcess {name: &quot;PreProcess&quot;})\r\n    CREATE (p:Process {name: &quot;Process&quot;})\r\n    CREATE (d:DataStore {name: &quot;DataStore&quot;})\r\n    CREATE (rA:Report {name: &quot;Report A&quot;})\r\n    CREATE (rB:Report {name: &quot;Report B&quot;})\r\n    CREATE (p1)-[:PROVIDES{}]-&gt;(f1)\r\n    CREATE (p1)-[:PROVIDES{}]-&gt;(f2)\r\n    CREATE (p2)-[:PROVIDES{}]-&gt;(f3)\r\n    CREATE (f1)-[:DELIVERS_TO{}]-&gt;(pp)\r\n    CREATE (pp)-[:DELIVERS_TO{}]-&gt;(p)\r\n    CREATE (f2)-[:DELIVERS_TO{}]-&gt;(p)\r\n    CREATE (f3)-[:DELIVERS_TO{}]-&gt;(p)\r\n    CREATE (p)-[:DELIVERS_TO{}]-&gt;(d)\r\n    CREATE (d)-[:DELIVERS_TO{}]-&gt;(rA)\r\n    CREATE (d)-[:DELIVERS_TO{}]-&gt;(rB)\r\n    CREATE (f1)-[:USED_BY{}]-&gt;(rA)\r\n    CREATE (f2)-[:USED_BY{}]-&gt;(rB)\r\n    CREATE (f3)-[:USED_BY{}]-&gt;(rA)\r\n\r\n    // Show impacted reports (and path) if Provider 1 is down\r\n    MATCH path = (:Provider{name:&#39;Provider 1&#39;})-[:PROVIDES|USED_BY*]-&gt;(r:Report)\r\n    RETURN path, r.name AS report\r\n\r\n    // Show impacted reports (and path) if Provider 2 is down\r\n    MATCH path = (:Provider{name:&#39;Provider 2&#39;})-[:PROVIDES|USED_BY*]-&gt;(r:Report)\r\n    RETURN path, r.name AS report\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CTJCa.jpg\r\n  [2]: https://i.stack.imgur.com/lpXVc.jpg\r\n  [3]: https://i.stack.imgur.com/HHlrR.jpg\r\n  [4]: https://i.stack.imgur.com/b8DUb.jpg\r\n  [5]: https://i.stack.imgur.com/m7YMZ.jpg\r\n  [6]: https://i.stack.imgur.com/T84fR.jpg\r\n  [7]: https://i.stack.imgur.com/S0IR9.jpg","link":"https://stackoverflow.com/questions/49706575/modelling-graph-in-neo4j-showing-workflow-and-impact","title":"Modelling graph in Neo4j showing workflow and impact"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":0,"creation_date":1523106680,"post_id":49702110,"comment_id":86428747,"link":"https://stackoverflow.com/questions/49702011/sorting-list-of-lists-in-cypher/49702110#comment86428747_49702110"}],"tags":[],"owner":{"reputation":124,"user_id":886651,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/324c7a00a0e5b733be325d25cc682c83?s=128&d=identicon&r=PG","display_name":"sus","link":"https://stackoverflow.com/users/886651/sus"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523056190,"creation_date":1523056190,"answer_id":49702110,"question_id":49702011,"share_link":"https://stackoverflow.com/a/49702110","body_markdown":"I tried around and figured out this answer : \r\n\r\n    MATCH (n)\r\n    WHERE EXISTS(n.docId)\r\n    WITH DISTINCT [n.docId,n.senId] as  ds ORDER BY ds[0],ds[1]\r\n      WITH COLLECT(ds) as docs \r\n        RETURN docs","link":"https://stackoverflow.com/questions/49702011/sorting-list-of-lists-in-cypher/49702110#49702110","title":"Sorting list of lists in CYPHER"},{"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523061420,"creation_date":1523061420,"answer_id":49702678,"question_id":49702011,"share_link":"https://stackoverflow.com/a/49702678","body_markdown":"This is a simpler form of @sus&#39;s answer:\r\n\r\n    MATCH (n)\r\n    WHERE EXISTS(n.docId)\r\n    WITH DISTINCT [n.docId, n.senId] as ds ORDER BY ds\r\n    RETURN COLLECT(ds) as docs","link":"https://stackoverflow.com/questions/49702011/sorting-list-of-lists-in-cypher/49702678#49702678","title":"Sorting list of lists in CYPHER"}],"owner":{"reputation":124,"user_id":886651,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/324c7a00a0e5b733be325d25cc682c83?s=128&d=identicon&r=PG","display_name":"sus","link":"https://stackoverflow.com/users/886651/sus"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1523061420,"creation_date":1523055491,"question_id":49702011,"share_link":"https://stackoverflow.com/q/49702011","body_markdown":"How should we sort list of tuples in cypher . \r\n\r\n    MATCH (n) \r\n    WHERE EXISTS(n.docId)\r\n    WITH COLLECT(DISTINCT [n.docId,n.senId]) as docs ORDER BY docs[0]\r\n    RETURN docs\r\n\r\n\r\nThe above query returns : \r\n\r\n    [[848613, 1], [848613, 2], [848514, 1], [90029, 2], [848681, 1], [575833, 2], [847627, 1], [849538, 2]]\r\n\r\nWhat is the efficient way to achieve this sorted result : \r\n\r\n    [[90029, 2],[849538, 2],[848681, 1],[848613, 1],[848613, 2],[848514, 1],[847627, 1],[575833, 2]]\r\n\r\n ","link":"https://stackoverflow.com/questions/49702011/sorting-list-of-lists-in-cypher","title":"Sorting list of lists in CYPHER"},{"tags":["graph","neo4j","cypher","connected-components"],"owner":{"reputation":9,"user_id":7493535,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2a77d8a1e175b389647ad124b3ba58d1?s=128&d=identicon&r=PG&f=1","display_name":"DP27","link":"https://stackoverflow.com/users/7493535/dp27"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1523058846,"answer_count":0,"score":-2,"last_activity_date":1523051434,"creation_date":1523051434,"question_id":49701430,"share_link":"https://stackoverflow.com/q/49701430","body_markdown":"What would be the best way to go about doing this? \r\n\r\nThanks","link":"https://stackoverflow.com/questions/49701430/how-to-determine-if-graph-is-connected-in-neo4j","closed_reason":"too broad","title":"How to determine if graph is connected in Neo4j?"},{"tags":["neo4j","graph-databases","cql","datamodel"],"answers":[{"tags":[],"owner":{"reputation":12306,"user_id":2920686,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/qLSFx.jpg?s=128&g=1","display_name":"FrobberOfBits","link":"https://stackoverflow.com/users/2920686/frobberofbits"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1523036521,"creation_date":1523036521,"answer_id":49698343,"question_id":49698149,"share_link":"https://stackoverflow.com/a/49698343","body_markdown":"The cypher language provides basic support for integer, float, string, byte[], boolean and others.\r\n\r\nYou can [read the docs here on cypher typing](https://neo4j.com/docs/developer-manual/current/cypher/syntax/values/).\r\n\r\nNeo4j 3.4 which will be out fairly soon will have support for geospatial and temporal types.  As of this writing (3.3.4 latest) this isn&#39;t yet supported in the stable version.\r\n\r\n","link":"https://stackoverflow.com/questions/49698149/different-data-types-in-neo4j-cypher-query-language/49698343#49698343","title":"Different Data Types in Neo4j Cypher Query language"},{"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523107106,"creation_date":1523107106,"answer_id":49707773,"question_id":49698149,"share_link":"https://stackoverflow.com/a/49707773","body_markdown":"You have defined a node by creating it within (). Similarly, you define a relationship within []. These symbols explicitly represent these data types which is why they have been required since one of the 2.x versions.  ","link":"https://stackoverflow.com/questions/49698149/different-data-types-in-neo4j-cypher-query-language/49707773#49707773","title":"Different Data Types in Neo4j Cypher Query language"}],"owner":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"last_editor":{"reputation":9175,"user_id":1305969,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a12df863589d3a023e45014cb140bb60?s=128&d=identicon&r=PG","display_name":"zx485","link":"https://stackoverflow.com/users/1305969/zx485"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49698343,"answer_count":2,"score":0,"last_activity_date":1523107106,"creation_date":1523035646,"last_edit_date":1523045110,"question_id":49698149,"share_link":"https://stackoverflow.com/q/49698149","body_markdown":"Do I want to know how can we define different data types in CQL?\r\nFor example, in SQL we have lots of different data types like Int, float, decimal, variable character. \r\n\r\nBut in CQL when we are creating the nodes we do not define its data type\r\nwe just write: Create (a: User{UserName:&#39;Jack&#39;, Age:23}) what is the data type for the age Property? Is it integer? Float?\r\nThank you","link":"https://stackoverflow.com/questions/49698149/different-data-types-in-neo4j-cypher-query-language","title":"Different Data Types in Neo4j Cypher Query language"},{"tags":["database","mongodb","neo4j","graph-databases"],"answers":[{"comments":[{"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":0,"creation_date":1523107396,"post_id":49698546,"comment_id":86428964,"link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49698546#comment86428964_49698546"},{"owner":{"reputation":12306,"user_id":2920686,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/qLSFx.jpg?s=128&g=1","display_name":"FrobberOfBits","link":"https://stackoverflow.com/users/2920686/frobberofbits"},"reply_to_user":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":0,"creation_date":1523116377,"post_id":49698546,"comment_id":86431748,"link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49698546#comment86431748_49698546"}],"tags":[],"owner":{"reputation":12306,"user_id":2920686,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/qLSFx.jpg?s=128&g=1","display_name":"FrobberOfBits","link":"https://stackoverflow.com/users/2920686/frobberofbits"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523037342,"creation_date":1523037342,"answer_id":49698546,"question_id":49695297,"share_link":"https://stackoverflow.com/a/49698546","body_markdown":"Either can do this.  I tend to prefer neo4j, but either way could work.\r\n\r\nIn neo4j, you&#39;d create a graph consisting of a node (A) and its &quot;base&quot; (B).  You could then connect them like this:\r\n\r\n`(A:Node { weight: &quot;base+2&quot; })-[:base]-&gt;(B:Node { weight: 2 })`\r\n\r\nNote that modeling in this way would make it possible to change the base relationship to point to another node without changing anything about A.  The downside is that you&#39;d need a mini calculator to expand expressions like &quot;base+2&quot;, which is easy but in any case extra work.\r\n\r\nInterpreting your question another way, you&#39;re in a situation where you&#39;d probably want a trigger.  [Here&#39;s an article on neo4j triggers, how graphs handle this](https://maxdemarzi.com/2015/03/25/triggers-in-neo4j/).   If parsing that expression &quot;base+2&quot; at read time isn&#39;t what you want, and you want to actually set the value on A to be b.weight + 2, then you want a trigger.   This would let you define some other function to be run when the graph gets updated in a certain way.  In this case, when someone inserts a new `:base` relationship in the graph, you might check the base value (endpoint of the relationship) and add 2 to its weight, and set that new property value on the source of the relationship.","link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49698546#49698546","title":"Neo4j or MongoDB for relative attributes/relations"},{"comments":[{"owner":{"reputation":3231,"user_id":1565828,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/2f94fd4ea55d32c8bb25bf443a55b459?s=128&d=identicon&r=PG","display_name":"Bach","link":"https://stackoverflow.com/users/1565828/bach"},"edited":false,"score":0,"creation_date":1523270147,"post_id":49701652,"comment_id":86475296,"link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49701652#comment86475296_49701652"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523052746,"creation_date":1523052746,"answer_id":49701652,"question_id":49695297,"share_link":"https://stackoverflow.com/a/49701652","body_markdown":"Yes, you can use either DBMS.\r\n\r\nTo help you decide, this is an example of how to support your uses cases in neo4j.\r\n\r\nTo create your sample data:\r\n\r\n\tCREATE\r\n\t\t(a:Foo {id: &#39;A&#39;}), (b:Foo {id: &#39;B&#39;}), (c:Box {id: 123}),\r\n\t\t(h1:Height {value: 1}), (w4:Weight {value: 4}),\r\n\t\t(a)-[:HAS_HEIGHT {factor: 1, offset: 0}]-&gt;(h1),\r\n\t\t(a)-[:HAS_WEIGHT {factor: 1, offset: 2}]-&gt;(w4),\r\n\t\t(b)-[:HAS_WEIGHT {factor: 1, offset: 0}]-&gt;(w4),\r\n\t\t(b)-[:HAS_HEIGHT {factor: 1, offset: 3}]-&gt;(h1),\r\n\t\t(c)-[:CONTAINS {count: 5}]-&gt;(a),\r\n\t\t(c)-[:CONTAINS {count: 2}]-&gt;(b);\r\n\r\n\r\n&quot;A&quot; and &quot;B&quot; are represented by `Foo` nodes, and &quot;C&quot; by a `Box` node. Since a given height or weight can be referenced by multiple nodes, this example data model uses shared `Weight` and `Height` nodes. The `HAS_HEIGHT` and `HAS_WEIGHT` relationships have `factor` and `offset` properties to allow adjustment of the height or weight for a particular `Foo` node.\r\n\r\nTo query &quot;What is the height of A&quot;:\r\n\r\n    MATCH (:Foo {id: &#39;A&#39;})-[ra:HAS_HEIGHT]-&gt;(ha:Height)\r\n    RETURN ra.factor * ha.value + ra.offset AS height;\r\n\r\nTo query &quot;What is the ratio of the heights of A and B&quot;:\r\n\r\n    MATCH\r\n      (:Foo {id: &#39;A&#39;})-[ra:HAS_HEIGHT]-&gt;(ha:Height),\r\n      (:Foo {id: &#39;B&#39;})-[rb:HAS_HEIGHT]-&gt;(hb:Height)\r\n    RETURN\r\n      TOFLOAT(ra.factor * ha.value + ra.offset) /\r\n      (rb.factor * hb.value + rb.offset) AS ratio;\r\nNote: `TOFLOAT()` is used above to make sure integer division, which would truncate, is never used.\r\n\r\nTo query &quot;What is the total weight of objects appearing in C&quot;:\r\n\r\n    MATCH (:Box {id: 123})-[c:CONTAINS]-&gt;()-[rx:HAS_WEIGHT]-&gt;(wx:Weight)\r\n    RETURN SUM(c.count * (rx.factor * wx.value + rx.offset));\r\n","link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49701652#49701652","title":"Neo4j or MongoDB for relative attributes/relations"},{"comments":[{"owner":{"reputation":3231,"user_id":1565828,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/2f94fd4ea55d32c8bb25bf443a55b459?s=128&d=identicon&r=PG","display_name":"Bach","link":"https://stackoverflow.com/users/1565828/bach"},"edited":false,"score":0,"creation_date":1523270041,"post_id":49707990,"comment_id":86475223,"link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49707990#comment86475223_49707990"},{"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"reply_to_user":{"reputation":3231,"user_id":1565828,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/2f94fd4ea55d32c8bb25bf443a55b459?s=128&d=identicon&r=PG","display_name":"Bach","link":"https://stackoverflow.com/users/1565828/bach"},"edited":false,"score":1,"creation_date":1523275608,"post_id":49707990,"comment_id":86478728,"link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49707990#comment86478728_49707990"}],"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523108510,"creation_date":1523108510,"answer_id":49707990,"question_id":49695297,"share_link":"https://stackoverflow.com/a/49707990","body_markdown":"I have not used Mongo and decided not to after studying it. So filter my opinion with that in mind; users may find my comments easy to overcome. Mongo is not a true graph database. The user must create and manage the relationships. In Neo4j, relationships are &quot;native&quot; and robust.  \r\n\r\nThere is a head to head comparison at this site:\r\n[https://db-engines.com/en/system/MongoDB%3bNeo4j]\r\n\r\nsee also: [https://stackoverflow.com/questions/10688745/database-for-efficient-large-scale-graph-traversal][1]\r\n\r\nThere is a distinction between NoSQL (e.g., Mongo) and a true graph database. Many seem to assume that if it is not SQL then it&#39;s a graph database. This is not true. Most NoSQL data bases do not store relationships. The free [book][1] describes this in chapter 2.\r\n\r\nPersonally, I&#39;m sold on Neo4j. It makes relationships, transerving graphs and collecting lists along the path easy and powerful.\r\n\r\n  [1]: https://neo4j.com/graph-databases-book/","link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations/49707990#49707990","title":"Neo4j or MongoDB for relative attributes/relations"}],"owner":{"reputation":3231,"user_id":1565828,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/2f94fd4ea55d32c8bb25bf443a55b459?s=128&d=identicon&r=PG","display_name":"Bach","link":"https://stackoverflow.com/users/1565828/bach"},"comment_count":0,"delete_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1523108510,"creation_date":1523025620,"question_id":49695297,"share_link":"https://stackoverflow.com/q/49695297","body_markdown":"I wish to build a database of objects with various types of relations between them.  It will be easier for me to explain by giving an example.\r\n\r\nI wish to have a set of objects, each is described by a unique name and a set of attributes (say, height, weight, colour, etc.), but instead of values, these attributes may contain values which are **relative to other objects**. For example, I might have two objects, A and B, where A has height 1 and weight &quot;weight of B + 2&quot;, and B has height &quot;height of A + 3&quot; and weight 4.\r\n\r\nSome objects may have completely other attributes; for example, object C may represent a box, and objects A and B will be related to C by the relations &quot;I appear x times in C&quot;.\r\n\r\nQueries may include &quot;what is the height of A/B&quot; or what is the total weight of objects appearing in C with multiplicities.\r\n\r\nI am a bit familiar with MongoDB, and fond of its simplicity. I heard of Neo4j, but never tried working with it.  From its description, it sounds more suitable for my need (but I can&#39;t tell it is capable of the task).  But is MongoDB, with its simplicity, suitable as well?  Or perhaps a different database engine?\r\n\r\nI am not sure it matters, but I plan to use python as the engine which processes the queries and their outputs.","link":"https://stackoverflow.com/questions/49695297/neo4j-or-mongodb-for-relative-attributes-relations","title":"Neo4j or MongoDB for relative attributes/relations"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523109127,"creation_date":1523109127,"answer_id":49708079,"question_id":49687298,"share_link":"https://stackoverflow.com/a/49708079","body_markdown":"It looks like your basic query is running quite fast. If you want to filter at additional steps, you probably have to add additional optional match and with statements to accommodate the filters. Undesired elements should drop out.","link":"https://stackoverflow.com/questions/49687298/find-shortest-path-with-complex-predicate-check-simultaneously-both-node-proper/49708079#49708079","title":"Find shortest path with complex predicate (check simultaneously both node properties and relation property)"}],"owner":{"reputation":336,"user_id":5319625,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/TyhhC.jpg?s=128&g=1","display_name":"Oleg Gritsak","link":"https://stackoverflow.com/users/5319625/oleg-gritsak"},"last_editor":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1523109127,"creation_date":1522998599,"last_edit_date":1523024744,"question_id":49687298,"share_link":"https://stackoverflow.com/q/49687298","body_markdown":"I&#39;ve built a graph with 40 mln nodes and 40 mln relations with Neo4j.\r\nMostly I search for different shortest paths and queries are to be very fast. Right now it usually takes a few milliseconds per query.\r\n\r\nFor speed I encode all parameters in relations property **val**, so ordinary query looks like this:\r\n\r\n    MATCH (one:Obj{oid:&#39;1&#39;})\r\n    with one\r\n    MATCH (two:Obj{oid:&#39;2&#39;}), path=shortestPath((one) -[*0..50]-(two))\r\n    WHERE ALL (x IN RELATIONSHIPS(path) WHERE ((x.val &gt; 50 and x.val&lt;109)  ))\r\n    return path\r\n\r\nBut one filter cannot be done this way, as it should evaluate (on each step) property of starting node, property of relation, property of ending node, for example: \r\n\r\n    Path: n1(==1)-r1(==2)-n2(==1)-r2(==5)-n3(==3)\r\n\r\nOn step1: properties of n1 and n2 equal 1 and relation&#39;s property equals 2, that&#39;s OK, going further\r\n\r\nOn step2: property of n2 equals 1, but property of n3 equals 3, so we stop. If it was 1, we would stop anyway, because relation r2 is not 2, but 5.\r\n\r\nI&#39;ve used RELATIONSHIPS and NODES predicates, but they seem to work separately.\r\n\r\nAlso, I guess this can be done with traversal API, but I&#39;ll have to rewrite a lot of my other code, so it is not desirable.\r\n\r\nAm I missing some fast solution?","link":"https://stackoverflow.com/questions/49687298/find-shortest-path-with-complex-predicate-check-simultaneously-both-node-proper","title":"Find shortest path with complex predicate (check simultaneously both node properties and relation property)"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":0,"creation_date":1522969067,"post_id":49682338,"comment_id":86377143,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j#comment86377143_49682338"},{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":0,"creation_date":1523136252,"post_id":49682338,"comment_id":86437756,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j#comment86437756_49682338"}],"answers":[{"comments":[{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":1,"creation_date":1522977199,"post_id":49683536,"comment_id":86379150,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49683536#comment86379150_49683536"},{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":0,"creation_date":1523046576,"post_id":49683536,"comment_id":86414465,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49683536#comment86414465_49683536"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":1,"creation_date":1523051125,"post_id":49683536,"comment_id":86416325,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49683536#comment86416325_49683536"},{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":0,"creation_date":1523056928,"post_id":49683536,"comment_id":86418088,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49683536#comment86418088_49683536"},{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":0,"creation_date":1523126281,"post_id":49683536,"comment_id":86434907,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49683536#comment86434907_49683536"},{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"edited":false,"score":0,"creation_date":1523134756,"post_id":49683536,"comment_id":86437393,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49683536#comment86437393_49683536"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1523051025,"last_edit_date":1523051025,"creation_date":1522974876,"answer_id":49683536,"question_id":49682338,"share_link":"https://stackoverflow.com/a/49683536","body_markdown":"[UPDATED]\r\n\r\nThere are multiple issues and possible improvements:\r\n\r\n1. The second `MERGE` should be deleted, since it creates orphaned nodes. A relationship type should not be tuned into a `Glycolysis` node, and such nodes would never be connected to any other nodes.\r\n2. The 1st and 3rd `MERGE` clauses must use the same property name (say, `name`) for source and target nodes, or else the same chemical can end up with 2 nodes (with different property keys). This is why you ended up with nodes that did not have all the expected connections. \r\n3. The APOC procedure [apoc.cypher.doIt](https://neo4j-contrib.github.io/neo4j-apoc-procedures/#_running_cypher_fragments) can be used to simplify somewhat the `MERGE` of relationships with dynamic names.\r\n4. The `glycolysis_bioentities.csv` is not needed for this use case.\r\n\r\nWith the above changes, you end up with something like this, which will generate a connected graph that matches your input data:\r\n\r\n    LOAD CSV WITH HEADERS FROM &quot;file:/glycolysis_relations.csv&quot; AS row\r\n    MERGE (s:Glycolysis {name: row.source})\r\n    MERGE (t:Glycolysis {name: row.target})\r\n    WITH s, t, row\r\n    CALL apoc.cypher.doIt(\r\n      &#39;MERGE (s)-[r:&#39; + row.relation + &#39;]-&gt;(t)&#39;,\r\n      {s:s, t:t}) YIELD value\r\n    RETURN 1;\r\n\r\n","link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49683536#49683536","title":"Creating a metabolic pathway in Neo4j"},{"comments":[{"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":1,"creation_date":1523109614,"post_id":49684460,"comment_id":86429590,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49684460#comment86429590_49684460"},{"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"reply_to_user":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":0,"creation_date":1523113331,"post_id":49684460,"comment_id":86430812,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49684460#comment86430812_49684460"},{"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":0,"creation_date":1523221384,"post_id":49684460,"comment_id":86458913,"link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49684460#comment86458913_49684460"}],"tags":[],"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"last_editor":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523557759,"last_edit_date":1523557759,"creation_date":1522982698,"answer_id":49684460,"question_id":49682338,"share_link":"https://stackoverflow.com/a/49684460","body_markdown":"@cybersam&#39;s answer is excellent, providing the most elegant solution (once again: thank you!) -- please upvote that accepted answer.\r\n\r\nSince this question/answer/topic is likely to be of interest to others, I wanted to mention that my code (based on this SO thread, https://stackoverflow.com/questions/29312417/how-to-specify-relationship-type-in-csv, and modified per the hints provided by @cybersam) now works, and show the result:\r\n\r\n**Solution 1 (my original post, updated):**\r\n\r\n    LOAD CSV WITH HEADERS FROM &quot;file:/glycolysis_relations.csv&quot; AS row\r\n    MERGE (s:Glycolysis {name:row.source})\r\n    MERGE (t:Glycolysis {name:row.target})\r\n    FOREACH (x in case row.relation when &quot;substrate_of&quot; then [1] else [] end |\r\n      MERGE (s)-[r:substrate_of]-&gt;(t)\r\n    )\r\n    FOREACH (x in case row.relation when &quot;yields&quot; then [1] else [] end |\r\n      MERGE (s)-[r:yields]-&gt;(t)\r\n      );\r\n\r\n**Solution 2 (cybersam&#39;s, updated):**\r\n\r\n    LOAD CSV WITH HEADERS FROM &quot;file:/glycolysis_relations.csv&quot; AS row\r\n    MERGE (s:Metabolism:Glycolysis {name: row.source})\r\n    MERGE (t:Metabolism:Glycolysis {name: row.target})\r\n    WITH s, t, row\r\n      // &quot;Bug&quot; -- additional duplicate relations with each iteration of this statement/script:\r\n      // CALL apoc.create.relationship(s, row.relation, {}, t) YIELD rel\r\n      // Solution: \r\n      // https://github.com/neo4j-contrib/neo4j-apoc-procedures/issues/271\r\n      // https://stackoverflow.com/questions/47808421/neo4j-load-csv-to-create-dynamic-relationship-types\r\n      CALL apoc.merge.relationship(s, row.relation, {}, {}, t) YIELD rel\r\n    RETURN COUNT(*);\r\n\r\nBoth solutions generate the identical graph, below. :-D\r\n\r\n[![neo4j_glycolytc_pathway][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0AAW2.png","link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j/49684460#49684460","title":"Creating a metabolic pathway in Neo4j"}],"owner":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"last_editor":{"reputation":765,"user_id":1904943,"user_type":"registered","profile_image":"https://i.stack.imgur.com/T15Ql.jpg?s=128&g=1","display_name":"Victoria Stuart","link":"https://stackoverflow.com/users/1904943/victoria-stuart"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":2,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":49683536,"answer_count":2,"score":5,"last_activity_date":1523557759,"creation_date":1522966392,"last_edit_date":1523029964,"question_id":49682338,"share_link":"https://stackoverflow.com/q/49682338","body_markdown":"I am attempting to create the glycolytic pathway shown in the image at the bottom of this question, in Neo4j, using these data:\r\n\r\n*glycolysis_bioentities.csv*\r\n\r\n    name\r\n    α-D-glucose\r\n    glucose 6-phosphate\r\n    fructose 6-phosphate\r\n    &quot;fructose 1,6-bisphosphate&quot;\r\n    dihydroxyacetone phosphate\r\n    D-glyceraldehyde 3-phosphate\r\n    &quot;1,3-bisphosphoglycerate&quot;\r\n    3-phosphoglycerate\r\n    2-phosphoglycerate\r\n    phosphoenolpyruvate\r\n    pyruvate\r\n    hexokinase\r\n    glucose-6-phosphatase\r\n    phosphoglucose isomerase\r\n    phosphofructokinase\r\n    &quot;fructose-bisphosphate aldolase, class I&quot;\r\n    triosephosphate isomerase (TIM)\r\n    glyceraldehyde-3-phosphate dehydrogenase\r\n    phosphoglycerate kinase\r\n    phosphoglycerate mutase\r\n    enolase\r\n    pyruvate kinase\r\n\r\n*glycolysis_relations.csv*\r\n\r\n    source,relation,target\r\n    α-D-glucose,substrate_of,hexokinase\r\n    hexokinase,yields,glucose 6-phosphate\r\n    glucose 6-phosphate,substrate_of,glucose-6-phosphatase\r\n    glucose-6-phosphatase,yields,α-D-glucose\r\n    glucose 6-phosphate,substrate_of,phosphoglucose isomerase\r\n    phosphoglucose isomerase,yields,fructose 6-phosphate\r\n    fructose 6-phosphate,substrate_of,phosphofructokinase\r\n    phosphofructokinase,yields,&quot;fructose 1,6-bisphosphate&quot;\r\n    &quot;fructose 1,6-bisphosphate&quot;,substrate_of,&quot;fructose-bisphosphate aldolase, class I&quot;\r\n    &quot;fructose-bisphosphate aldolase, class I&quot;,yields,D-glyceraldehyde 3-phosphate\r\n    D-glyceraldehyde 3-phosphate,substrate_of,glyceraldehyde-3-phosphate dehydrogenase\r\n    D-glyceraldehyde 3-phosphate,substrate_of,triosephosphate isomerase (TIM)\r\n    triosephosphate isomerase (TIM),yields,dihydroxyacetone phosphate\r\n    glyceraldehyde-3-phosphate dehydrogenase,yields,&quot;1,3-bisphosphoglycerate&quot;\r\n    &quot;1,3-bisphosphoglycerate&quot;,substrate_of,phosphoglycerate kinase\r\n    phosphoglycerate kinase,yields,3-phosphoglycerate\r\n    3-phosphoglycerate,substrate_of,phosphoglycerate mutase\r\n    phosphoglycerate mutase,yields,2-phosphoglycerate\r\n    2-phosphoglycerate,substrate_of,enolase\r\n    enolase,yields,phosphoenolpyruvate\r\n    phosphoenolpyruvate,substrate_of,pyruvate kinase\r\n    pyruvate kinase,yields,pyruvate\r\n\r\n\r\nThis is what I have, thus far,\r\n\r\n[![enter image description here][1]][1]\r\n\r\n... using this cypher code (passed to `Cycli` or `cypher-shell`):\r\n\r\n    LOAD CSV WITH HEADERS FROM &quot;file:/glycolysis_relations.csv&quot; AS row\r\n    MERGE (s:Glycolysis {source: row.source})\r\n    MERGE (r:Glycolysis {relation: row.relation})\r\n    MERGE (t:Glycolysis {target: row.target})\r\n    FOREACH (x in case row.relation when &quot;substrate_of&quot; then [1] else [] end |\r\n      MERGE (s)-[r:substrate_of]-&gt;(t)\r\n    )\r\n    FOREACH (x in case row.relation when &quot;yields&quot; then [1] else [] end |\r\n      MERGE (s)-[r:yields]-&gt;(t)\r\n      );\r\n\r\nI&#39;d like to create the fully-connected pathway, with captions on all the nodes.  Suggestions? \r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qZfJ7.png\r\n  [2]: https://i.stack.imgur.com/IuNUO.png","link":"https://stackoverflow.com/questions/49682338/creating-a-metabolic-pathway-in-neo4j","title":"Creating a metabolic pathway in Neo4j"},{"tags":["time","neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":10,"user_id":8876630,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/c597363c02585366f349b64e2e25eba7?s=128&d=identicon&r=PG&f=1","display_name":"Ganesh Chippada","link":"https://stackoverflow.com/users/8876630/ganesh-chippada"},"edited":false,"score":0,"creation_date":1522989104,"post_id":49682150,"comment_id":86381952,"link":"https://stackoverflow.com/questions/49681876/match-the-closest-possible-node-in-neo4j/49682150#comment86381952_49682150"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1522965410,"creation_date":1522965410,"answer_id":49682150,"question_id":49681876,"share_link":"https://stackoverflow.com/a/49682150","body_markdown":"If you want to always round up the time:\r\n\r\n    MATCH (startMinute:Minute {epoch:\r\n      (apoc.date.parse(&#39;2018-04-12T16:32&#39;, &#39;ms&#39;,&quot;yyyy-MM-dd&#39;T&#39;HH:mm&quot;) + 29999)/300000*300000})\r\n    RETURN startMinute;\r\n\r\nOr, if you want to round to nearest:\r\n\r\n    MATCH (startMinute:Minute {epoch:\r\n      (apoc.date.parse(&#39;2018-04-12T16:32&#39;, &#39;ms&#39;,&quot;yyyy-MM-dd&#39;T&#39;HH:mm&quot;) + 150000)/300000*300000})\r\n    RETURN startMinute;","link":"https://stackoverflow.com/questions/49681876/match-the-closest-possible-node-in-neo4j/49682150#49682150","title":"Match the closest possible node in neo4j"}],"owner":{"reputation":10,"user_id":8876630,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/c597363c02585366f349b64e2e25eba7?s=128&d=identicon&r=PG&f=1","display_name":"Ganesh Chippada","link":"https://stackoverflow.com/users/8876630/ganesh-chippada"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49682150,"answer_count":1,"score":0,"last_activity_date":1522965410,"creation_date":1522964039,"question_id":49681876,"share_link":"https://stackoverflow.com/q/49681876","body_markdown":"I have a time tree which is granulated to 5 min intervals. I have no problem while trying to match the exact minute . But in few cases, i might be searching for a minute which is not exactly matching the node. For ex. if i want to match 10:05 i can. But if the input is 10.03 i get no result. I have epoch times added to the minute node. I wanted to return the closest minute node available for the given input (if its 10.03 then return 10.05). how do i achieve this? \r\n\r\n    MATCH (startMinute:Minute {epoch:apoc.date.parse(&#39;2018-04-12T16:33&#39;, &#39;ms&#39;,&quot;yyyy-MM-dd&#39;T&#39;HH:mm&quot;)}) return startMinute\r\n\r\n\r\nMy Model is\r\n[here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nuCYY.png\r\n\r\n\r\n    \r\n","link":"https://stackoverflow.com/questions/49681876/match-the-closest-possible-node-in-neo4j","title":"Match the closest possible node in neo4j"},{"tags":["docker","neo4j"],"owner":{"reputation":1,"user_id":9603208,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/58529fb0565d57e578c8b6d31590c057?s=128&d=identicon&r=PG&f=1","display_name":"Wyzzy","link":"https://stackoverflow.com/users/9603208/wyzzy"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522951577,"creation_date":1522951577,"question_id":49678774,"share_link":"https://stackoverflow.com/q/49678774","body_markdown":"I&#39;m using docker-compose to create a neo4j service from the official image with the following Dockerfile :\r\n\r\n    FROM neo4j:3.3.4\r\n    \r\n    ADD zz-docker/neo4j/neo4j-init.sh /scripts/\r\n    \r\n    EXPOSE 7474\r\n    EXPOSE 7687\r\n\r\nand docker-compose.yml\r\n\r\n    neo4j:\r\n       environment:\r\n         - EXTENSION_SCRIPT=/scripts/neo4j-init.sh\r\n       build:\r\n         context: ../\r\n         dockerfile: zz-docker/neo4j/Dockerfile\r\n       image: zz-neo4j\r\n       container_name: zz-neo4j-01\r\n       ports:\r\n         - 7474:7474\r\n         - 7687:7687\r\n       networks:\r\n         - zz-net\r\n       volumes:\r\n         - ../neo4j-data:/data\r\n         - ../neo4j-logs:/logs\r\n\r\n    networks:\r\n      zz-net:\r\n        driver: bridge\r\n\r\nThe extension script is being used to pre-load a database dump on container start up, based on the post [create-neo4j-database-from-backup-inside-neo4j-docker][1] as follows:\r\n\r\n    #!/bin/bash\r\n    set -euo pipefail\r\n    IFS=$&#39;\\n\\t&#39;\r\n    \r\n    # do not run init script at each container start but only at the first start\r\n    if [ ! -f /var/lib/neo4j/data/neo4j-import-done.flag ]; then\r\n        echo &quot;Importing neo4j-init.dump ...&quot;\r\n        /var/lib/neo4j/bin/neo4j-admin load --from=/var/lib/neo4j/data/neo4j-init.dump --database=graph.db --force=true\r\n        touch /var/lib/neo4j/data/neo4j-import-done.flag\r\n        echo &quot;Import complete&quot;\r\n    else\r\n        echo &quot;There is no neo4j-init.dump file or the neo4j import has already run.&quot;\r\n    fi\r\n\r\nHowever after the import is complete the container fails to start reporting an error: \r\n\r\n    /docker-entrypoint.sh: line 218: exec su-exec neo4j: command not found\r\n\r\nWithout the EXTENSION_SCRIPT defined, the container starts-up without a problem (though the script for import isn&#39;t run).\r\n\r\nAny suggestions gratefully received!\r\n\r\n  [1]: https://stackoverflow.com/questions/45166636/create-neo4j-databse-from-backup-inside-neo4j-docker","link":"https://stackoverflow.com/questions/49678774/neo4j-docker-container-not-starting-after-running-extension-script","title":"Neo4J Docker container not starting after running EXTENSION_SCRIPT"},{"tags":["neo4j","neo4jclient"],"answers":[{"tags":[],"owner":{"reputation":6443,"user_id":2954199,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=128&d=identicon&r=PG","display_name":"William Lyon","link":"https://stackoverflow.com/users/2954199/william-lyon"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1522949287,"creation_date":1522949287,"answer_id":49678183,"question_id":49677865,"share_link":"https://stackoverflow.com/a/49678183","body_markdown":"This query will delete duplicate `:FILHO` relationships between `Person` nodes:\r\n\r\n    MATCH (p1:Person)-[r:FILHO]-&gt;(p2:Person)\r\n    WITH p1, p2, COLLECT(r) as rels\r\n    FOREACH(r IN tail(rels) | DELETE r)\r\n\r\nFirst, it matches on all `FILHO` relationships and `Person` nodes. \r\nThen aggregates the relationships for each pair of `Person` nodes into the `rels` collection.\r\nThen iterates through the tail of each `rels` collection (all relationships, but the first) and deletes them.","link":"https://stackoverflow.com/questions/49677865/neo4j-how-to-drop-a-duplicated-edge/49678183#49678183","title":"Neo4j How to drop a duplicated EDGE?"},{"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523110069,"creation_date":1523110069,"answer_id":49708223,"question_id":49677865,"share_link":"https://stackoverflow.com/a/49708223","body_markdown":"It may be better to consider how to avoid creating dupicate edges. Consider using merge rather than create.","link":"https://stackoverflow.com/questions/49677865/neo4j-how-to-drop-a-duplicated-edge/49708223#49708223","title":"Neo4j How to drop a duplicated EDGE?"}],"owner":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"last_editor":{"reputation":6062,"user_id":194717,"user_type":"registered","accept_rate":36,"profile_image":"https://i.stack.imgur.com/iqPjY.jpg?s=128&g=1","display_name":"Tony","link":"https://stackoverflow.com/users/194717/tony"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49678183,"answer_count":2,"score":0,"last_activity_date":1523110069,"creation_date":1522948075,"last_edit_date":1522949845,"question_id":49677865,"share_link":"https://stackoverflow.com/q/49677865","body_markdown":"I am learning Cypher / Neo4j, using C# &lt;br&gt;\r\nI created this the EDGE 3 times.\r\n\r\n      client.Cypher\r\n                   .Match(&quot;(user1:Person)&quot;, &quot;(user2:Person)&quot;)\r\n                   .Where((Person user1) =&gt; user1.name == &quot;Tony&quot;)\r\n                   .AndWhere((Person user2) =&gt; user2.name == &quot;Maria Esther&quot;)\r\n                   //.Create(&quot;(user1)-[:PAI]-&gt;(user2)&quot;)\r\n                   .Create(&quot;(user2)-[:FILHO {DataDeNascimento: &#39;2006&#39;}]-&gt;(user1)&quot;)\r\n                   .ExecuteWithoutResults();\r\n\r\nHow to drop the 2 other **:FILHO** (duplicated edges)?\r\n\r\n[![My Graph][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NKm4e.png","link":"https://stackoverflow.com/questions/49677865/neo4j-how-to-drop-a-duplicated-edge","title":"Neo4j How to drop a duplicated EDGE?"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"edited":false,"score":0,"creation_date":1523030759,"post_id":49676952,"comment_id":86406570,"link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance#comment86406570_49676952"}],"answers":[{"comments":[{"owner":{"reputation":38,"user_id":6084568,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b8a581e0c4756f9f0068f5aca25fe61f?s=128&d=identicon&r=PG&f=1","display_name":"Anshul Gupta","link":"https://stackoverflow.com/users/6084568/anshul-gupta"},"edited":false,"score":0,"creation_date":1522946231,"post_id":49677033,"comment_id":86365986,"link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance/49677033#comment86365986_49677033"},{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"reply_to_user":{"reputation":38,"user_id":6084568,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b8a581e0c4756f9f0068f5aca25fe61f?s=128&d=identicon&r=PG&f=1","display_name":"Anshul Gupta","link":"https://stackoverflow.com/users/6084568/anshul-gupta"},"edited":false,"score":1,"creation_date":1522946583,"post_id":49677033,"comment_id":86366187,"link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance/49677033#comment86366187_49677033"},{"owner":{"reputation":3168,"user_id":6893866,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/aefa0df51c67447c39a26252720cea2e?s=128&d=identicon&r=PG&f=1","display_name":"Tezra","link":"https://stackoverflow.com/users/6893866/tezra"},"edited":false,"score":1,"creation_date":1522947621,"post_id":49677033,"comment_id":86366825,"link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance/49677033#comment86366825_49677033"},{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"reply_to_user":{"reputation":3168,"user_id":6893866,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/aefa0df51c67447c39a26252720cea2e?s=128&d=identicon&r=PG&f=1","display_name":"Tezra","link":"https://stackoverflow.com/users/6893866/tezra"},"edited":false,"score":0,"creation_date":1522947756,"post_id":49677033,"comment_id":86366890,"link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance/49677033#comment86366890_49677033"},{"owner":{"reputation":3168,"user_id":6893866,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/aefa0df51c67447c39a26252720cea2e?s=128&d=identicon&r=PG&f=1","display_name":"Tezra","link":"https://stackoverflow.com/users/6893866/tezra"},"edited":false,"score":1,"creation_date":1522947793,"post_id":49677033,"comment_id":86366914,"link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance/49677033#comment86366914_49677033"},{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"reply_to_user":{"reputation":3168,"user_id":6893866,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/aefa0df51c67447c39a26252720cea2e?s=128&d=identicon&r=PG&f=1","display_name":"Tezra","link":"https://stackoverflow.com/users/6893866/tezra"},"edited":false,"score":0,"creation_date":1522948218,"post_id":49677033,"comment_id":86367169,"link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance/49677033#comment86367169_49677033"}],"tags":[],"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"last_editor":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522947860,"last_edit_date":1522947860,"creation_date":1522944987,"answer_id":49677033,"question_id":49676952,"share_link":"https://stackoverflow.com/a/49677033","body_markdown":"The node &quot;names&quot; are actually variables. You can assign a node (or a relationship) to a variable to handle this node in the rest of the Cypher query. The [Neo4j docs][1] says that:\r\n\r\n&gt; When you reference parts of a pattern or a query, you do so by naming\r\n&gt; them. The names you give the different parts are called variables.\r\n\r\nFor example, you can create a node and return it using a variable: \r\n\r\n    CREATE (node:player {name: &quot;Roger&quot;, YOB: 1985, POB: &quot;Switzerland&quot;})\r\n    RETURN node\r\n\r\nbut if you are not referencing the node in the rest of the query has no necessity to assign it to a variable, in this case your Cypher example is fine.\r\n\r\nAlso, if you don&#39;t add a variable name, that the Cypher planner will automatically assign a unique variable name to the items you didn&#39;t. So the only repercussion for not using a variable name, is that you can&#39;t make explicit references to that item (Thanks to [@Tezra][2]).\r\n\r\n\r\n  [1]: https://neo4j.com/docs/developer-manual/current/cypher/syntax/variables/\r\n  [2]: https://stackoverflow.com/users/6893866/tezra","link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance/49677033#49677033","title":"Neo4j node name significance"}],"owner":{"reputation":38,"user_id":6084568,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b8a581e0c4756f9f0068f5aca25fe61f?s=128&d=identicon&r=PG&f=1","display_name":"Anshul Gupta","link":"https://stackoverflow.com/users/6084568/anshul-gupta"},"last_editor":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1522947860,"creation_date":1522944725,"last_edit_date":1522944828,"question_id":49676952,"share_link":"https://stackoverflow.com/q/49676952","body_markdown":"What is the significance of node name in Neo4j. What are the repercussions of making nodes without node name. Like the query\r\n\r\n    CREATE (:player {name: &quot;Roger&quot;, YOB: 1985, POB: &quot;Switzerland&quot;})\r\n\r\nhas no node name?\r\n","link":"https://stackoverflow.com/questions/49676952/neo4j-node-name-significance","title":"Neo4j node name significance"},{"tags":["python","neo4j","graph-databases","py2neo"],"comments":[{"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"edited":false,"score":0,"creation_date":1523110287,"post_id":49673971,"comment_id":86429812,"link":"https://stackoverflow.com/questions/49673971/selecting-all-connected-nodes-to-a-given-node-and-listing-relationships-in-py2ne#comment86429812_49673971"}],"owner":{"reputation":109,"user_id":5380494,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/3ff8002c217735c18473f1c727ca9095?s=128&d=identicon&r=PG&f=1","display_name":"harshvardhan","link":"https://stackoverflow.com/users/5380494/harshvardhan"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522935979,"creation_date":1522935979,"question_id":49673971,"share_link":"https://stackoverflow.com/q/49673971","body_markdown":"I have recently started working on `py2neo` for `neo4j` database, and **avoiding** using `cypher` queries.\r\n\r\nI am looking forward to know how to select all the nodes connected to a given node and select the relationships between this given node and connected nodes. Since documentation on this is not sufficient, someone who has worked on it may help.\r\n\r\nI know that we can select a node using \r\n\r\n    node = selector.select(&quot;nodetype&quot;,key=value)\r\n\r\nwhere \r\n\r\n    selector = NodeSelector(graph)\r\n\r\nand this will list all the nodes which are of type &quot;nodetype&quot; and have the key-value property pair. Can we use this selector to select nodes connected to a given node and list the relationships between the given node and connected nodes? Or is there any method other than `selector` available?\r\n\r\n","link":"https://stackoverflow.com/questions/49673971/selecting-all-connected-nodes-to-a-given-node-and-listing-relationships-in-py2ne","title":"Selecting all connected nodes to a given node and listing relationships in py2neo"},{"tags":["neo4j","data-modeling","graph-databases"],"comments":[{"owner":{"reputation":6399,"user_id":2699288,"user_type":"registered","accept_rate":99,"profile_image":"https://www.gravatar.com/avatar/c8b883ffc677bf99f650d779af4e6946?s=128&d=identicon&r=PG","display_name":"Fabio Lamanna","link":"https://stackoverflow.com/users/2699288/fabio-lamanna"},"edited":false,"score":0,"creation_date":1522923842,"post_id":49669899,"comment_id":86349906,"link":"https://stackoverflow.com/questions/49669899/connecting-to-neo4j-browser-through-firefox#comment86349906_49669899"},{"owner":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"reply_to_user":{"reputation":6399,"user_id":2699288,"user_type":"registered","accept_rate":99,"profile_image":"https://www.gravatar.com/avatar/c8b883ffc677bf99f650d779af4e6946?s=128&d=identicon&r=PG","display_name":"Fabio Lamanna","link":"https://stackoverflow.com/users/2699288/fabio-lamanna"},"edited":false,"score":0,"creation_date":1522923965,"post_id":49669899,"comment_id":86349985,"link":"https://stackoverflow.com/questions/49669899/connecting-to-neo4j-browser-through-firefox#comment86349985_49669899"},{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"edited":false,"score":3,"creation_date":1522931654,"post_id":49669899,"comment_id":86355407,"link":"https://stackoverflow.com/questions/49669899/connecting-to-neo4j-browser-through-firefox#comment86355407_49669899"},{"owner":{"reputation":1269,"user_id":2273184,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/436f1f7f992d84c1fd39012a7438562c?s=128&d=identicon&r=PG&f=1","display_name":"Theox","link":"https://stackoverflow.com/users/2273184/theox"},"edited":false,"score":0,"creation_date":1522940505,"post_id":49669899,"comment_id":86362154,"link":"https://stackoverflow.com/questions/49669899/connecting-to-neo4j-browser-through-firefox#comment86362154_49669899"}],"owner":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"comment_count":4,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522923550,"creation_date":1522923550,"question_id":49669899,"share_link":"https://stackoverflow.com/q/49669899","body_markdown":"I can easily connect to Neo4j enterprise edition browser with Google chrome with this URL : http://localhost:7474/browser/\r\nbut when I want to connect to the browser using Firefox , i get this error\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/02frz.png \r\nin the password box  I type &#39;Neo4j&#39;","link":"https://stackoverflow.com/questions/49669899/connecting-to-neo4j-browser-through-firefox","title":"connecting to Neo4j browser through Firefox"},{"tags":["python","neo4j","multiple-instances"],"comments":[{"owner":{"reputation":13362,"user_id":472495,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4rtxd.png?s=128&g=1","display_name":"halfer","link":"https://stackoverflow.com/users/472495/halfer"},"edited":false,"score":0,"creation_date":1522921026,"post_id":49668559,"comment_id":86347903,"link":"https://stackoverflow.com/questions/49668559/multiple-instances-of-neo4j#comment86347903_49668559"},{"owner":{"reputation":13362,"user_id":472495,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4rtxd.png?s=128&g=1","display_name":"halfer","link":"https://stackoverflow.com/users/472495/halfer"},"edited":false,"score":0,"creation_date":1522921035,"post_id":49668559,"comment_id":86347910,"link":"https://stackoverflow.com/questions/49668559/multiple-instances-of-neo4j#comment86347910_49668559"},{"owner":{"reputation":49,"user_id":8087057,"user_type":"registered","profile_image":"https://i.stack.imgur.com/MlAc9.png?s=128&g=1","display_name":"Jack Daniels","link":"https://stackoverflow.com/users/8087057/jack-daniels"},"reply_to_user":{"reputation":13362,"user_id":472495,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4rtxd.png?s=128&g=1","display_name":"halfer","link":"https://stackoverflow.com/users/472495/halfer"},"edited":false,"score":0,"creation_date":1522921301,"post_id":49668559,"comment_id":86348123,"link":"https://stackoverflow.com/questions/49668559/multiple-instances-of-neo4j#comment86348123_49668559"}],"owner":{"reputation":49,"user_id":8087057,"user_type":"registered","profile_image":"https://i.stack.imgur.com/MlAc9.png?s=128&g=1","display_name":"Jack Daniels","link":"https://stackoverflow.com/users/8087057/jack-daniels"},"last_editor":{"reputation":13362,"user_id":472495,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4rtxd.png?s=128&g=1","display_name":"halfer","link":"https://stackoverflow.com/users/472495/halfer"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1522927602,"answer_count":0,"score":-1,"last_activity_date":1522920847,"creation_date":1522919776,"last_edit_date":1522920847,"question_id":49668559,"share_link":"https://stackoverflow.com/q/49668559","body_markdown":"I&#39;ve a work-flow set up on neo4j as backend for a single user. Now I want it for multiple users, say whenever a new user log-in, he gets a new instance of neo4j or when an existing user log-in, he gets all of his projects listing.\r\n\r\nThe problem here is to make a separate instance of neo4j is a manual process, I want to automate that. Can you please suggest something or anything in this problem (how can I create a new neo4j instance everytime a user logs in).\r\n\r\nI know it&#39;s a vague question, I just need some advice.","link":"https://stackoverflow.com/questions/49668559/multiple-instances-of-neo4j","closed_reason":"too broad","title":"Multiple Instances of neo4j"},{"tags":["neo4j","gremlin","tinkerpop3","gremlin-server"],"answers":[{"comments":[{"owner":{"reputation":13,"user_id":8148397,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9181017bb78d20852205d9e1497a2eb5?s=128&d=identicon&r=PG&f=1","display_name":"Pavankumar B","link":"https://stackoverflow.com/users/8148397/pavankumar-b"},"edited":false,"score":0,"creation_date":1522935125,"post_id":49670517,"comment_id":86357999,"link":"https://stackoverflow.com/questions/49664586/how-to-configure-mulitiple-properties-for-a-vertex-in-tinkerpop-gremlin-server-w/49670517#comment86357999_49670517"}],"tags":[],"owner":{"reputation":18305,"user_id":1831717,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fd9d045ca36173a4db8c870cd8ab7eb6?s=128&d=identicon&r=PG","display_name":"stephen mallette","link":"https://stackoverflow.com/users/1831717/stephen-mallette"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522925327,"creation_date":1522925327,"answer_id":49670517,"question_id":49664586,"share_link":"https://stackoverflow.com/a/49670517","body_markdown":"Two things...first, `gremlin.tinkergraph.defaultVertexPropertyCardinality=list` is not a &quot;neo4j&quot; configuration option. Second, I don&#39;t think that you are calling `property()` right. It should be more like the example in the link you provided:\r\n\r\n    gremlin&gt; g.addV().property(&#39;name&#39;,&#39;michael&#39;).property(&#39;name&#39;,&#39;michael hunger&#39;).property(&#39;name&#39;,&#39;mhunger&#39;)\r\n    ==&gt;v[0]\r\n\r\nThus in your case you would do:\r\n\r\n    gremlin&gt; g.addV(&#39;person&#39;).property(set,&#39;name&#39;,&#39;Stephen&#39;).property(set,&#39;name&#39;,&#39;Stephen&#39;).property(set,&#39;name&#39;,&#39;steve&#39;).iterate()\r\n    gremlin&gt; g.V().properties(&#39;name&#39;)\r\n    ==&gt;vp[name-&gt;Stephen]\r\n    ==&gt;vp[name-&gt;steve]","link":"https://stackoverflow.com/questions/49664586/how-to-configure-mulitiple-properties-for-a-vertex-in-tinkerpop-gremlin-server-w/49670517#49670517","title":"How to configure mulitiple properties for a vertex in tinkerpop gremlin server with neo4j db"}],"owner":{"reputation":13,"user_id":8148397,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9181017bb78d20852205d9e1497a2eb5?s=128&d=identicon&r=PG&f=1","display_name":"Pavankumar B","link":"https://stackoverflow.com/users/8148397/pavankumar-b"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1522925327,"creation_date":1522905242,"question_id":49664586,"share_link":"https://stackoverflow.com/q/49664586","body_markdown":"I am using tinkerpop&#39;s gremlin server with neo4j db.\r\nHow to set the vertex property cardinality to set or list?\r\n\r\n    java.lang.UnsupportedOperationException: Multiple properties on a vertex is not supported \r\n    at org.apache.tinkerpop.gremlin.structure.VertexProperty$Exceptions.multiPropertiesNotSupported(VertexProperty.java:99) \r\n    at org.apache.tinkerpop.gremlin.neo4j.structure.trait.NoMultiNoMetaNeo4jTrait.setVertexProperty(NoMultiNoMetaNeo4jTrait.java:101) \r\n    at org.apache.tinkerpop.gremlin.neo4j.structure.Neo4jVertex.property(Neo4jVertex.java:85) \r\n    at org.apache.tinkerpop.gremlin.process.traversal.step.sideEffect.AddPropertyStep.sideEffect(AddPropertyStep.java:121) \r\n    at org.apache.tinkerpop.gremlin.process.traversal.step.sideEffect.SideEffectStep.processNextStart(SideEffectStep.java:39) \r\n    at org.apache.tinkerpop.gremlin.process.traversal.step.util.AbstractStep.hasNext(AbstractStep.java:143) \r\n    at org.apache.tinkerpop.gremlin.process.traversal.util.DefaultTraversal.hasNext(DefaultTraversal.java:192) \r\n    at org.apache.tinkerpop.gremlin.server.op.AbstractOpProcessor.handleIterator(AbstractOpProcessor.java:89) \r\n    at org.apache.tinkerpop.gremlin.server.op.AbstractEvalOpProcessor.lambda$evalOpInternal$5(AbstractEvalOpProcessor.java:252) \r\n    at org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.lambda$eval$0(GremlinExecutor.java:273) \r\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) \r\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) \r\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) \r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) \r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) \r\n    at java.lang.Thread.run(Thread.java:745)\r\n\r\nI found neo4j graph config over here, [neo4j graph multi/meta properties][1]\r\nI have tried setting these following properties in neo4j.properties. The last three ones.\r\n\r\n    gremlin.graph=org.apache.tinkerpop.gremlin.neo4j.structure.Neo4jGraph \r\n    gremlin.neo4j.directory=/var/lib/neo4j/data/databases/graph.db \r\n    gremlin.neo4j.conf.node_auto_indexing=true \r\n    gremlin.neo4j.conf.relationship_auto_indexing=true \r\n    gremlin.neo4j.conf.allow_store_upgrade=true \r\n    gremlin.neo4j.conf.multiProperties=true \r\n    gremlin.neo4j.conf.metaProperties=true \r\n    gremlin.tinkergraph.defaultVertexPropertyCardinality=list\r\n\r\nSo, this happens when I do a query like this\r\n\r\n    g.V().addV(&#39;Stephen&#39;).property(set, &#39;1&#39;,&#39;2&#39;)\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/apache/tinkerpop/blob/master/docs/src/reference/implementations-neo4j.asciidoc#vertex-properties","link":"https://stackoverflow.com/questions/49664586/how-to-configure-mulitiple-properties-for-a-vertex-in-tinkerpop-gremlin-server-w","title":"How to configure mulitiple properties for a vertex in tinkerpop gremlin server with neo4j db"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522899134,"creation_date":1522899134,"answer_id":49663711,"question_id":49663376,"share_link":"https://stackoverflow.com/a/49663711","body_markdown":"You could do something like this whereby you look for any item in the list of nicknames on the node that might exist in the list of nicknames you are checking against.\r\n \r\n    MATCH (p:Person)\r\n    WHERE p.name IN [&#39;mike&#39;, &#39;rob&#39;, &#39;nick&#39;] \r\n    OR ANY( nn IN p.nickname WHERE nn IN [&#39;mike&#39;, &#39;rob&#39;, &#39;nick&#39;])\r\n    RETURN p","link":"https://stackoverflow.com/questions/49663376/cypher-query-for-searching-through-a-list/49663711#49663711","title":"Cypher Query for searching through a list"},{"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522961226,"creation_date":1522961226,"answer_id":49681243,"question_id":49663376,"share_link":"https://stackoverflow.com/a/49681243","body_markdown":"The APOC function [apoc.coll.intersection](https://neo4j-contrib.github.io/neo4j-apoc-procedures/#_collection_functions) can be helpful:\r\n\r\n    MATCH (p:Person)\r\n    WHERE\r\n      p.name IN [&#39;mike&#39;, &#39;rob&#39;, &#39;nick&#39;] OR\r\n      SIZE(apoc.coll.intersection(p.nickname, [&#39;mike&#39;, &#39;rob&#39;, &#39;nick&#39;])) &gt; 0\r\n    RETURN p","link":"https://stackoverflow.com/questions/49663376/cypher-query-for-searching-through-a-list/49681243#49681243","title":"Cypher Query for searching through a list"}],"owner":{"reputation":1863,"user_id":3766231,"user_type":"registered","accept_rate":95,"profile_image":"https://graph.facebook.com/100002501998627/picture?type=large","display_name":"iam.Carrot","link":"https://stackoverflow.com/users/3766231/iam-carrot"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1522961226,"creation_date":1522896679,"last_edit_date":1522899175,"question_id":49663376,"share_link":"https://stackoverflow.com/q/49663376","body_markdown":"Hi I am working with `neo4j` and I have the below schema:\r\n\r\n    &quot;person&quot;: \r\n    {\r\n        &quot;name&quot;: &quot;Robert Mathews&quot;,\r\n        &quot;nicknames&quot;: [&quot;rob&quot;, &quot;bert&quot;, &quot;Mathew&quot;]\r\n    }\r\n\r\nI am searching for a few people who&#39;s name or nickname is `[&#39;mike&#39;, &#39;rob&#39;, &#39;nick&#39;]`\r\nI am aware of how to search for a property through a list: \r\n\r\n    MATCH (p:Person) \r\n    WHERE p.name IN [&#39;mike&#39;, &#39;rob&#39;, &#39;nick&#39;] \r\n    OR p.nickname IN [&#39;mike&#39;, &#39;rob&#39;, &#39;nick&#39;] \r\n    RETURN p\r\n\r\nBut now the problem lies the `p.name` and `p.nickname` is no longer a `string` type it&#39;s an `array` type.\r\n\r\nCan anyone point me in the right direction to match input array with the person array and get the best match?\r\n","link":"https://stackoverflow.com/questions/49663376/cypher-query-for-searching-through-a-list","title":"Cypher Query for searching through a list"},{"tags":["java","neo4j"],"answers":[{"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522892097,"creation_date":1522892097,"answer_id":49662854,"question_id":49662559,"share_link":"https://stackoverflow.com/a/49662854","body_markdown":"[Transaction.success](https://neo4j.com/docs/java-reference/current/javadocs/org/neo4j/graphdb/Transaction.html#success--) only *marks* a transaction as successful. The transaction is not actually committed until [Transaction.close()](https://neo4j.com/docs/java-reference/current/javadocs/org/neo4j/graphdb/Transaction.html#close--) is called.\r\n\r\nThe [Transaction](https://neo4j.com/docs/java-reference/current/javadocs/org/neo4j/graphdb/Transaction.html) JavaDocs states the following:\r\n&gt; Here&#39;s the idiomatic use of programmatic transactions in Neo4j\r\n&gt; starting from java 7:\r\n&gt; \r\n&gt;     try ( Transaction tx = graphDb.beginTx() )  {\r\n&gt;         // operations on the graph\r\n&gt;         // ...\r\n&gt; \r\n&gt;         tx.success();\r\n&gt;     }\r\n\r\nThat idiom uses a [try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) statement to ensure that `tx.close()` will be called automatically when the statement is exited (even if due to an exception). Your transactional code should follow suit.\r\n\r\nFor example:\r\n\r\n    try (Transaction tx = db.beginTx()) {\r\n        Node node = db.findNode(label, key, value);\r\n        node.setProperty(&quot;k&quot;, 11);\r\n        tx.success();\r\n    } ","link":"https://stackoverflow.com/questions/49662559/how-to-set-the-attribute-of-a-node-in-java-for-neo4j-node/49662854#49662854","title":"how to set the attribute of a node in java for Neo4j Node"}],"owner":{"reputation":11,"user_id":9371585,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/46499ae650e46aa89298a31886bf335e?s=128&d=identicon&r=PG&f=1","display_name":"neo4jcoder","link":"https://stackoverflow.com/users/9371585/neo4jcoder"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1522892097,"creation_date":1522889605,"question_id":49662559,"share_link":"https://stackoverflow.com/q/49662559","body_markdown":"I am trying to set a property for a node in Neo4j using java api.\r\nCurrently i am doing it as below :\r\n\r\n    tx.begin();\r\n    Node node = db.findNode(label,key,value);\r\n    node.setProperty(&quot;k&quot;,11);\r\n    tx.success();\r\n\r\n\r\nHow ever when i start the process once again, and try to retrieve this key or see, for the value in that particular node, i cannot see the key being present. How to proceed from this?\r\n\r\n","link":"https://stackoverflow.com/questions/49662559/how-to-set-the-attribute-of-a-node-in-java-for-neo4j-node","title":"how to set the attribute of a node in java for Neo4j Node"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522881505,"post_id":49661363,"comment_id":86332765,"link":"https://stackoverflow.com/questions/49661064/would-it-be-performant-for-this-query/49661363#comment86332765_49661363"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":1,"creation_date":1522883932,"post_id":49661363,"comment_id":86333595,"link":"https://stackoverflow.com/questions/49661064/would-it-be-performant-for-this-query/49661363#comment86333595_49661363"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1522880741,"creation_date":1522880741,"answer_id":49661363,"question_id":49661064,"share_link":"https://stackoverflow.com/a/49661363","body_markdown":"Traversing a relationship in either direction is equally efficient.\r\n\r\nSo, switching the direction of the relationship will not make a difference.","link":"https://stackoverflow.com/questions/49661064/would-it-be-performant-for-this-query/49661363#49661363","title":"Would it be performant for this query?"}],"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49661363,"answer_count":1,"score":0,"last_activity_date":1522880741,"creation_date":1522879007,"last_edit_date":1522880521,"question_id":49661064,"share_link":"https://stackoverflow.com/q/49661064","body_markdown":"    MATCH (b:Brand {brandname:&#39;Apple&#39;})&lt;-[r1]-(s:Product {type:&#39;Phone&#39;})-[r2]-&gt; (o:Attributes)\r\n    WHERE any(key in keys(o) WHERE key CONTAINS &#39;ROM&#39;)\r\n    RETURN s, b, o\r\n\r\nI have both &#39;brandname&#39; and &#39;type&#39; indexes on Brand and Product. If in the graph there are many less brands than products, would it be faster for this query if I have also a relationship from Brand to Product, so that I can switch the direction of the query:\r\n\r\n    MATCH (b:Brand {brandname:&#39;Apple&#39;})-[r1]-&gt;(s:Product {type:&#39;Phone&#39;})-[r2]-&gt; (o:Attributes)\r\n    WHERE any(key in keys(o) WHERE key CONTAINS &#39;ROM&#39;)\r\n    RETURN s, b, o","link":"https://stackoverflow.com/questions/49661064/would-it-be-performant-for-this-query","title":"Would it be performant for this query?"},{"tags":["graph","neo4j","gremlin"],"answers":[{"tags":[],"owner":{"reputation":18305,"user_id":1831717,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fd9d045ca36173a4db8c870cd8ab7eb6?s=128&d=identicon&r=PG","display_name":"stephen mallette","link":"https://stackoverflow.com/users/1831717/stephen-mallette"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1522929647,"creation_date":1522929647,"answer_id":49671880,"question_id":49657240,"share_link":"https://stackoverflow.com/a/49671880","body_markdown":"When asking questions about Gremlin it is always helpful to include a script that creates your sample graph - for example:\r\n\r\n    g.addV(&#39;person&#39;).property(&#39;name&#39;,&#39;dave&#39;).as(&#39;d&#39;).\r\n      addV(&#39;person&#39;).property(&#39;name&#39;,&#39;rick&#39;).as(&#39;r&#39;).\r\n      addV(&#39;person&#39;).property(&#39;name&#39;,&#39;mavis&#39;).as(&#39;m&#39;).\r\n      addV(&#39;person&#39;).property(&#39;name&#39;,&#39;larry&#39;).as(&#39;l&#39;).\r\n      addV(&#39;course&#39;).property(&#39;name&#39;,&#39;english&#39;).as(&#39;e&#39;).\r\n      addV(&#39;course&#39;).property(&#39;name&#39;,&#39;history&#39;).as(&#39;h&#39;).\r\n      addV(&#39;grade&#39;).property(&#39;name&#39;,&#39;b&#39;).as(&#39;b&#39;).\r\n      addE(&#39;studies&#39;).from(&#39;d&#39;).to(&#39;e&#39;).\r\n      addE(&#39;studies&#39;).from(&#39;r&#39;).to(&#39;e&#39;).\r\n      addE(&#39;studies&#39;).from(&#39;m&#39;).to(&#39;h&#39;).\r\n      addE(&#39;studies&#39;).from(&#39;d&#39;).to(&#39;h&#39;).\r\n      addE(&#39;studies&#39;).from(&#39;r&#39;).to(&#39;h&#39;).\r\n      addE(&#39;isIn&#39;).from(&#39;l&#39;).to(&#39;b&#39;).\r\n      addE(&#39;isIn&#39;).from(&#39;d&#39;).to(&#39;b&#39;).iterate()\r\n\r\nHere&#39;s a fairly direct way to get your answer:\r\n\r\n    gremlin&gt; g.V().has(&#39;person&#39;,&#39;name&#39;,&#39;dave&#39;).as(&#39;d&#39;).\r\n    ......1&gt;   out(&#39;studies&#39;,&#39;isIn&#39;).\r\n    ......2&gt;   in(&#39;studies&#39;,&#39;isIn&#39;).\r\n    ......3&gt;   where(neq(&#39;d&#39;)).\r\n    ......4&gt;   dedup().\r\n    ......5&gt;   values(&#39;name&#39;)\r\n    ==&gt;mavis\r\n    ==&gt;rick\r\n    ==&gt;larry\r\n\r\nFirst you find &quot;dave&quot;, label that step as &quot;d&quot; so that you can reference its contents later, then traverse `out()` over the edges you want to match on and then back `in()` on those same edges. At this point, you&#39;re back at &quot;person&quot; vertices who are in the same &quot;grades&quot; and &quot;courses&quot; as &quot;dave&quot;, but you want to exclude &quot;dave&quot; vertices from the output so you use that `where()` step. You might have duplicates if a &quot;person&quot; shares more than one &quot;course&quot; or &quot;grade&quot; with &quot;dave&quot; so you must `dedup()`. \r\n\r\nThat&#39;s the basic algorithm, but you can get more advanced. Maybe you want to sort those &quot;matches&quot; by the number of things that each &quot;person&quot; has in common with &quot;dave&quot;:\r\n\r\n    gremlin&gt; g.V().has(&#39;person&#39;,&#39;name&#39;,&#39;dave&#39;).as(&#39;d&#39;).\r\n    ......1&gt;   out(&#39;studies&#39;,&#39;isIn&#39;).\r\n    ......2&gt;   in(&#39;studies&#39;,&#39;isIn&#39;).\r\n    ......3&gt;   where(neq(&#39;d&#39;)).\r\n    ......4&gt;   groupCount().\r\n    ......5&gt;     by(&#39;name&#39;).\r\n    ......6&gt;   order(local).\r\n    ......7&gt;     by(values, decr)\r\n    ==&gt;[rick:2,mavis:1,larry:1]\r\n\r\n&quot;rick&quot; has two &quot;matches&quot; (i.e. shares &quot;english&quot; and &quot;history&quot; classes) with &quot;dave&quot; and thus has the highest ranking. Note that the use of `local` in the `order()` step is important in that it means to sort within the current traverser (i.e. the `Map` of name/count) - without that designation the sort would be applied to the objects in the traversal stream itself. \r\n","link":"https://stackoverflow.com/questions/49657240/gremlin-find-vertices-with-similar-relationships/49671880#49671880","title":"Gremlin, find vertices with similar relationships"}],"owner":{"reputation":103,"user_id":5703092,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0YuUi.jpg?s=128&g=1","display_name":"DBAWaffle","link":"https://stackoverflow.com/users/5703092/dbawaffle"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49671880,"answer_count":1,"score":0,"last_activity_date":1522929647,"creation_date":1522863702,"question_id":49657240,"share_link":"https://stackoverflow.com/q/49657240","body_markdown":"I&#39;m after getting some gremlin together which would, for a given vertex, find other vertices which share the same or similar relationship. \r\n\r\nSo for example, imagine a graph of Persons and these Persons have relationships to other entities like subjects and grade. Lets say I select a Person, lets call them Dave. He is linked to English and History and is a grade B. \r\n\r\n    Dave -STUDIES-&gt; English\r\n    Dave -STUDIES-&gt; History \r\n    Dave -IS_IN -&gt; B\r\n\r\nHow would find other Persons who shared these relationships using Gremlin?\r\n\r\nI&#39;ve got as far as \r\n\r\n    g.V(&#39;Dave&#39;).out()\r\n\r\nFind everything Dave is related to \r\n\r\nHow can I use this to find other Persons who share some or all of the same relationships as Dave?\r\n\r\n(i&#39;ve done this in neo4j and its quite straight forward\r\n\r\n    match ((p1:Person{name:&#39;Dave&#39;})-[r]-&gt;(n)),((p2:Person)-[s]-&gt;(n)) \r\n    return distinct p1.name,p2.name, count(p2.name)\r\n    order by count(p2.name) desc\r\n) \r\n\r\nthanks ! ","link":"https://stackoverflow.com/questions/49657240/gremlin-find-vertices-with-similar-relationships","title":"Gremlin, find vertices with similar relationships"},{"tags":["neo4j","cypher","graph-databases"],"comments":[{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"edited":false,"score":1,"creation_date":1522861499,"post_id":49656621,"comment_id":86322275,"link":"https://stackoverflow.com/questions/49656621/error-loading-csv-file-into-neo4j-enterprise-edition-illegal-character-in-opaqu#comment86322275_49656621"},{"owner":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"reply_to_user":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"edited":false,"score":0,"creation_date":1522861608,"post_id":49656621,"comment_id":86322329,"link":"https://stackoverflow.com/questions/49656621/error-loading-csv-file-into-neo4j-enterprise-edition-illegal-character-in-opaqu#comment86322329_49656621"}],"answers":[{"comments":[{"owner":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"edited":false,"score":0,"creation_date":1522862139,"post_id":49656717,"comment_id":86322628,"link":"https://stackoverflow.com/questions/49656621/error-loading-csv-file-into-neo4j-enterprise-edition-illegal-character-in-opaqu/49656717#comment86322628_49656717"},{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"reply_to_user":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"edited":false,"score":1,"creation_date":1522862505,"post_id":49656717,"comment_id":86322798,"link":"https://stackoverflow.com/questions/49656621/error-loading-csv-file-into-neo4j-enterprise-edition-illegal-character-in-opaqu/49656717#comment86322798_49656717"}],"tags":[],"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"last_editor":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522862490,"last_edit_date":1522862490,"creation_date":1522861818,"answer_id":49656717,"question_id":49656621,"share_link":"https://stackoverflow.com/a/49656717","body_markdown":" 1. Copy your CSV file to Neo4j Import Directory. Take a look in [Neo4j file locations docs][1]. For windows desktop installations this directory is `%APPDATA%\\Neo4j Community Edition\\import`.\r\n   \r\n 2. Change your import path to `&#39;file:///abc.csv&#39;`\r\n\r\n 3. Try again.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/current/configuration/file-locations/","link":"https://stackoverflow.com/questions/49656621/error-loading-csv-file-into-neo4j-enterprise-edition-illegal-character-in-opaqu/49656717#49656717","title":"Error loading CSV file into Neo4j enterprise edition :Illegal character in opaque part"}],"owner":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"last_editor":{"reputation":60,"user_id":9509011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/10c2d31d987d2c82c798998f39e06bca?s=128&d=identicon&r=PG&f=1","display_name":"PTTT","link":"https://stackoverflow.com/users/9509011/pttt"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49656717,"answer_count":1,"score":0,"last_activity_date":1522862490,"creation_date":1522861435,"last_edit_date":1522861589,"question_id":49656621,"share_link":"https://stackoverflow.com/q/49656621","body_markdown":"I&#39;m trying to load a CSV file into Neo4j Enterprise edition and I think I&#39;m considering all the rules but I don&#39;t understand what is the error related to\r\nthis is the error :[![enter image description here][1]][1]\r\n\r\n\r\nthis is my csv file . I have entered my data in excel and then saved it as a CSV file :[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/twQN6.png\r\n  [2]: https://i.stack.imgur.com/oH5rZ.png","link":"https://stackoverflow.com/questions/49656621/error-loading-csv-file-into-neo4j-enterprise-edition-illegal-character-in-opaqu","title":"Error loading CSV file into Neo4j enterprise edition :Illegal character in opaque part"},{"tags":["windows","neo4j"],"comments":[{"owner":{"reputation":721,"user_id":3601660,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/9dfe9498ed911a8b1c7e386e14f98ea9?s=128&d=identicon&r=PG&f=1","display_name":"c z","link":"https://stackoverflow.com/users/3601660/c-z"},"edited":false,"score":2,"creation_date":1522867685,"post_id":49652401,"comment_id":86325799,"link":"https://stackoverflow.com/questions/49652401/uninstall-neo4j-in-windows#comment86325799_49652401"},{"owner":{"reputation":6,"user_id":9573488,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/--QeZWvcc0gM/AAAAAAAAAAI/AAAAAAAABVQ/cgDlZRy7yKA/photo.jpg?sz=128","display_name":"Mamatha Desireddy","link":"https://stackoverflow.com/users/9573488/mamatha-desireddy"},"reply_to_user":{"reputation":721,"user_id":3601660,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/9dfe9498ed911a8b1c7e386e14f98ea9?s=128&d=identicon&r=PG&f=1","display_name":"c z","link":"https://stackoverflow.com/users/3601660/c-z"},"edited":false,"score":0,"creation_date":1522909812,"post_id":49652401,"comment_id":86340806,"link":"https://stackoverflow.com/questions/49652401/uninstall-neo4j-in-windows#comment86340806_49652401"},{"owner":{"reputation":6,"user_id":9573488,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/--QeZWvcc0gM/AAAAAAAAAAI/AAAAAAAABVQ/cgDlZRy7yKA/photo.jpg?sz=128","display_name":"Mamatha Desireddy","link":"https://stackoverflow.com/users/9573488/mamatha-desireddy"},"reply_to_user":{"reputation":721,"user_id":3601660,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/9dfe9498ed911a8b1c7e386e14f98ea9?s=128&d=identicon&r=PG&f=1","display_name":"c z","link":"https://stackoverflow.com/users/3601660/c-z"},"edited":false,"score":0,"creation_date":1522909908,"post_id":49652401,"comment_id":86340856,"link":"https://stackoverflow.com/questions/49652401/uninstall-neo4j-in-windows#comment86340856_49652401"}],"owner":{"reputation":6,"user_id":9573488,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/--QeZWvcc0gM/AAAAAAAAAAI/AAAAAAAABVQ/cgDlZRy7yKA/photo.jpg?sz=128","display_name":"Mamatha Desireddy","link":"https://stackoverflow.com/users/9573488/mamatha-desireddy"},"last_editor":{"reputation":3549,"user_id":5007059,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/477099189c307a35bfb73097b19af9fe?s=128&d=identicon&r=PG&f=1","display_name":"ndmeiri","link":"https://stackoverflow.com/users/5007059/ndmeiri"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522871949,"creation_date":1522848792,"last_edit_date":1522871949,"question_id":49652401,"share_link":"https://stackoverflow.com/q/49652401","body_markdown":"I am trying to reinstall the Neo4j 1.0.19 on Windows. But, when I reinstall it, it is installing with previous instance. It is because of process related to Neo4j is running and also killed the process, cleaned everything. Can anyone help me with this in uninstalling Neo4j properly?\r\n","link":"https://stackoverflow.com/questions/49652401/uninstall-neo4j-in-windows","title":"Uninstall neo4j in windows"},{"tags":["neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522870138,"creation_date":1522870138,"answer_id":49658970,"question_id":49651557,"share_link":"https://stackoverflow.com/a/49658970","body_markdown":"Your query is doing a lot more work than it needs to.\r\n\r\nThe first `WITH` clause is not needed at all, since its generated `eUsers` and `eDate` variables are never used. And the second `WITH` clause does not need to generate the unused `e2Date` variable.\r\n\r\nIn addition, you could first add an index for `:EventType(eventName)` to speed up the processing:\r\n\r\n    CREATE INDEX ON :EventType(eventName);\r\n\r\nWith these changes, your query&#39;s profile could be simpler and the processing would be faster.\r\n\r\nHere is an updated query (that should use the index to quickly find the `EventType` node at one end of the path, to kick off the query):\r\n\r\n    MATCH (:EventType {eventName:&#39;viewStart-home&#39;})&lt;--(:EventNode)\r\n      &lt;--(:EventType{eventName:&#39;viewStart-payment&#39;})&lt;--(event2:EventNode)\r\n      &lt;--(:EventType{eventName:&#39;viewStart-screen1&#39;})\r\n    RETURN distinct event2.deviceId as e2Users\r\n    LIMIT 200000;\r\n\r\nHere is an alternate query that uses 2 `USING INDEX` hints to tell the planner to quickly find the `:EventType` nodes at *both* ends of the path to kick off the query. This might be even faster than the first query:\r\n\r\n    MATCH (a:EventType {eventName:&#39;viewStart-home&#39;})&lt;--(:EventNode)\r\n      &lt;--(:EventType{eventName:&#39;viewStart-payment&#39;})&lt;--(event2:EventNode)\r\n      &lt;--(b:EventType{eventName:&#39;viewStart-screen1&#39;})\r\n    USING INDEX a:EventType(eventName)\r\n    USING INDEX b:EventType(eventName)\r\n    RETURN distinct event2.deviceId as e2Users\r\n    LIMIT 200000;\r\n\r\nTry profiling them both on your DB, and pick the best one or keep tweaking further.","link":"https://stackoverflow.com/questions/49651557/neo4j-query-optimization-for-cartesian-product/49658970#49658970","title":"Neo4j Query Optimization for Cartesian Product"}],"owner":{"reputation":61,"user_id":1083525,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/2b0fa5230ba1cde309e0587b699fcd55?s=128&d=identicon&r=PG","display_name":"talhaocakci","link":"https://stackoverflow.com/users/1083525/talhaocakci"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1522870321,"creation_date":1522846357,"last_edit_date":1522870321,"question_id":49651557,"share_link":"https://stackoverflow.com/q/49651557","body_markdown":"I am trying to implement a user-journey analytics solution. Simply analyze on which screens, which users leave the application. \r\nFor this , I have modeled the data like this:\r\n[![blue circles are events (a single activity that contains user and device data). green circles are event types (activity types such as the name of the screen)][1]][1]\r\nI modeled single activity since I want to index some attributes. Relation attributes can not be indexed in Neo4j.\r\n\r\nWith this model, I am trying to write a query that follows three successive event types with below query:\r\n\r\n    MATCH (eventType1:EventType {eventName:&#39;viewStart-home&#39;})&lt;--(event:EventNode)\r\n    &lt;--(eventType2:EventType{eventName:&#39;viewStart-payment&#39;})  \r\n    \r\n    WITH distinct event.deviceId as eUsers, event.clientCreationDate as eDate\r\n    \r\n    MATCH((eventType2)&lt;--(event2:EventNode)\r\n    &lt;--(eventType3:EventType{eventName:&#39;viewStart-screen1&#39;}))\r\n    \r\n    WITH distinct event2.deviceId as e2Users, event2.clientCreationDate as e2Date\r\n    RETURN e2Users limit 200000\r\n\r\nAnd the execution plan is below:\r\n\r\n[![last NodeByLabelScan ruins everything][2]][2]\r\n\r\nI could not figure the reason of this process out. Can you help me?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QweW6.png\r\n  [2]: https://i.stack.imgur.com/0bRXa.png","link":"https://stackoverflow.com/questions/49651557/neo4j-query-optimization-for-cartesian-product","title":"Neo4j Query Optimization for Cartesian Product"},{"tags":["neo4j","pyspark","rdd","py2neo"],"owner":{"reputation":30,"user_id":8939734,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f09f5f4f25998ae53e27a2d7d2ae5c5c?s=128&d=identicon&r=PG&f=1","display_name":"EDUCATED_SHARK_666","link":"https://stackoverflow.com/users/8939734/educated-shark-666"},"last_editor":{"reputation":30,"user_id":8939734,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f09f5f4f25998ae53e27a2d7d2ae5c5c?s=128&d=identicon&r=PG&f=1","display_name":"EDUCATED_SHARK_666","link":"https://stackoverflow.com/users/8939734/educated-shark-666"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522845646,"creation_date":1522843237,"last_edit_date":1522845646,"question_id":49650462,"share_link":"https://stackoverflow.com/q/49650462","body_markdown":"i&#39;ve been trying this code with py2neo 3 to insert my rdd into neo4j. It  works fine with 10000 rows but when it comes to million rows, i got a 429 code because i make too many request. \r\n\r\n    def nodes(rows):\r\n      graph = Graph(password=&#39;admin&#39;)\r\n      tx = graph.begin()\r\n      for row in rows:\r\n        query = Node(&quot;item&quot;, event_id=row[0], text=row[19])\r\n        tx.create(query)\r\n      tx.commit()\r\n        \r\n    infos.foreachPartition(nodes)\r\nWhat would be the best strategy to insert this huge rdd into neo4j .\r\nExport in csv ? Transtype to df and partioning even more the matrix . Or change spark langage into Scala  and use the neo4j-Spark connector. Maybe there is a solution i don&#39;t see to insert batch of rows.","link":"https://stackoverflow.com/questions/49650462/neo4j-batch-insert-from-pyspark-429-error","title":"Neo4j batch insert from pyspark 429 error"},{"tags":["neo4j"],"comments":[{"owner":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1522844085,"post_id":49644214,"comment_id":86309536,"link":"https://stackoverflow.com/questions/49644214/database-failed-to-create-error-could-not-change-password#comment86309536_49644214"},{"owner":{"reputation":6,"user_id":9573488,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/--QeZWvcc0gM/AAAAAAAAAAI/AAAAAAAABVQ/cgDlZRy7yKA/photo.jpg?sz=128","display_name":"Mamatha Desireddy","link":"https://stackoverflow.com/users/9573488/mamatha-desireddy"},"reply_to_user":{"reputation":2834,"user_id":2286415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbRoS.png?s=128&g=1","display_name":"logisima","link":"https://stackoverflow.com/users/2286415/logisima"},"edited":false,"score":0,"creation_date":1522851690,"post_id":49644214,"comment_id":86315490,"link":"https://stackoverflow.com/questions/49644214/database-failed-to-create-error-could-not-change-password#comment86315490_49644214"}],"owner":{"reputation":6,"user_id":9573488,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/--QeZWvcc0gM/AAAAAAAAAAI/AAAAAAAABVQ/cgDlZRy7yKA/photo.jpg?sz=128","display_name":"Mamatha Desireddy","link":"https://stackoverflow.com/users/9573488/mamatha-desireddy"},"last_editor":{"reputation":3549,"user_id":5007059,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/477099189c307a35bfb73097b19af9fe?s=128&d=identicon&r=PG&f=1","display_name":"ndmeiri","link":"https://stackoverflow.com/users/5007059/ndmeiri"},"comment_count":2,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522904770,"creation_date":1522823286,"last_edit_date":1522904770,"question_id":49644214,"share_link":"https://stackoverflow.com/q/49644214","body_markdown":"I am trying to create a database in Neo4j Desktop-1.0.19. When I click on create local graph button, it is asking me to give database name and set password for it. But, when I click the `Create` button, it is failing and throwing below error. Can anyone help me on this?\r\n\r\n&gt; Database failed to create: Error: Could not change password\r\n","link":"https://stackoverflow.com/questions/49644214/database-failed-to-create-error-could-not-change-password","title":"Database failed to create: Error: Could not change password"},{"tags":["maven","spring-boot","neo4j","spring-data","spring-boot-test"],"answers":[{"tags":[],"owner":{"reputation":44,"user_id":2283260,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/EQ6Mg.jpg?s=128&g=1","display_name":"Marian","link":"https://stackoverflow.com/users/2283260/marian"},"last_editor":{"reputation":44,"user_id":2283260,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/EQ6Mg.jpg?s=128&g=1","display_name":"Marian","link":"https://stackoverflow.com/users/2283260/marian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1522904629,"last_edit_date":1522904629,"creation_date":1522875621,"answer_id":49660348,"question_id":49640532,"share_link":"https://stackoverflow.com/a/49660348","body_markdown":"I have found a solution to my problem. It seems as if the BOLT driver is used as default for testing as well - which is confusing given the Spring Data Neo4j (SDN) documentation. Finally, the `pom.xml` of the GitHub project [movies-java-spring-data-neo4j](https://github.com/neo4j-examples/movies-java-spring-data-neo4j) helped me. I added the following test dependency to my `pom.xml`:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.neo4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;neo4j-ogm-embedded-driver&lt;/artifactId&gt;\r\n        &lt;version&gt;${neo4j-ogm.version}&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI kept the `test/resources/application.yml` but **removed** the line:\r\n\r\n    spring.data.neo4j.uri: file:///neo4j.db\r\n\r\nNow, the test context starts with the embedded driver, and creates a temporary database file like `file:/C:/Users/Me/AppData/Local/Temp/neo4j.db6943517458205762238/`, which is awesome. I can get a clean database instance for every test method.\r\n\r\nI hope this answer will help others, who have the same problem. I&#39;m happy to provide more details if necessary.","link":"https://stackoverflow.com/questions/49640532/testing-neo4j-with-spring-boot-and-embedded-driver/49660348#49660348","title":"Testing Neo4j with Spring Boot and embedded driver"}],"owner":{"reputation":44,"user_id":2283260,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/EQ6Mg.jpg?s=128&g=1","display_name":"Marian","link":"https://stackoverflow.com/users/2283260/marian"},"last_editor":{"reputation":44,"user_id":2283260,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/EQ6Mg.jpg?s=128&g=1","display_name":"Marian","link":"https://stackoverflow.com/users/2283260/marian"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49660348,"answer_count":1,"score":0,"last_activity_date":1522904925,"creation_date":1522798179,"last_edit_date":1522904925,"question_id":49640532,"share_link":"https://stackoverflow.com/q/49640532","body_markdown":"# Problem\r\nI build an application using a Neo4j database. I like to test some custom Cypher queries using Spring Boot&#39;s `@DataNeo4jTest` annotation (see also [Spring Boot Test - Neo4j](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-neo4j-test)), but I run in either one of the following problems:\r\n\r\n* The test tries to connect to a Neo4j instance using the BOLT driver.\r\n* The test fails to load the embedded driver.\r\n\r\n# Details\r\nMy dependencies are managed with Maven following the [Spring Data Neo4j Reference Documentation](https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#_using_boot). Section 10.3.1 of the SDN documentation explains:\r\n\r\n&gt; By default, SDN will use the BOLT driver to connect to Neo4j and you don’t need to declare it as a separate dependency in your pom. If you want to use the embedded or HTTP drivers in your production application, you must add the following dependencies as well. (This dependency on the embedded driver is not required if you only want to use the embedded driver for testing. See the section on [Testing](https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#reference.getting_started.dependencies.testing) below for more information).\r\n\r\nTherefore, the relevant parts of my `pom.xml` are:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns:xsi=...&gt;\r\n        ...\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n\r\n        &lt;properties&gt;\r\n            ...\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-neo4j&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.neo4j.test&lt;/groupId&gt;\r\n                &lt;artifactId&gt;neo4j-harness&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.4&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        ...\r\n    &lt;/project&gt;\r\n\r\nMy `main/resources/application.yml` is:\r\n\r\n    spring:\r\n        data:\r\n            neo4j:\r\n                uri: bolt://localhost\r\n                username: &lt;username&gt;\r\n                password: &lt;password&gt;\r\n\r\nMy `test/resources/application.yml` is:\r\n\r\n    spring.data.neo4j.uri: file:///neo4j.db\r\n\r\n_Without_ the `test/resources/application.yml` I get the following exception, which I assume is caused by using the BOLT driver:\r\n\r\n    org.springframework.transaction.CannotCreateTransactionException: Could not open Neo4j Session for transaction;\r\n        nested exception is org.neo4j.driver.v1.exceptions.AuthenticationException: The client is unauthorized due to authentication failure.\r\n\r\n_With_ the `test/resources/application.yml` I get the following exception:\r\n\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;neo4jAuditionBeanFactoryPostProcessor&#39;: Unsatisfied dependency expressed through constructor parameter 0;\r\n        nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/data/neo4j/Neo4jDataAutoConfiguration.class]: Bean instantiation via factory method failed;\r\n        nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.neo4j.ogm.session.SessionFactory]: Factory method &#39;sessionFactory&#39; threw exception;\r\n        nested exception is org.neo4j.ogm.exception.core.ConfigurationException: Could not load driver class org.neo4j.ogm.drivers.embedded.driver.EmbeddedDriver\r\n\r\n# Questions\r\n* Are there any dependencies missing?\r\n* Is the configuration wrong?\r\n* Does anyone have a link to a working example using the Spring Boot annotation `@DataNeo4jTest`?\r\n\r\nAny suggestion is welcome.","link":"https://stackoverflow.com/questions/49640532/testing-neo4j-with-spring-boot-and-embedded-driver","title":"Testing Neo4j with Spring Boot and embedded driver"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":8,"user_id":9593618,"user_type":"registered","profile_image":"https://graph.facebook.com/10154174569823002/picture?type=large","display_name":"Amulya Aankul","link":"https://stackoverflow.com/users/9593618/amulya-aankul"},"edited":false,"score":0,"creation_date":1522796384,"post_id":49640021,"comment_id":86288209,"link":"https://stackoverflow.com/questions/49639902/neo4j-loading-to-memory-in-batches/49640021#comment86288209_49640021"}],"tags":[],"owner":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522800023,"last_edit_date":1522800023,"creation_date":1522794625,"answer_id":49640021,"question_id":49639902,"share_link":"https://stackoverflow.com/a/49640021","body_markdown":"You could rewrite your query to look for the first 10k transactions that do not have a `HAS_TRANS` relationship from an `Account` labeled node.\r\n\r\n    MATCH (tx:Transaction)\r\n    WHERE NOT (:Account)-[:HAS_TRANS]-&gt;(tx)\r\n    WITH tx\r\n    LIMIT 10000\r\n    MATCH (a:Account)\r\n    WHERE tx.tx_id = a.tx_id\r\n    CREATE (a)-[:HAS_TRANS]-&gt;(tx)\r\n\r\nMake sure you have indexes on Transaction(tx_id) and Account(tx_id).\r\n\r\nProbably the best way to iterate over the batches in cypher until you are done is to use `apoc.periodic.iterate`.\r\n\r\nYou can experiment with something like this.\r\n\r\n    CALL apoc.periodic.iterate(\r\n      &quot;MATCH (tx:Transaction)\r\n       WHERE NOT (:Account)-[:HAS_TRANS]-&gt;(tx)\r\n       WITH tx\r\n       MATCH (a:Account)\r\n       WHERE tx.tx_id = a.tx_id\r\n       RETURN tx, a&quot;,\r\n      &quot;CREATE (a)-[:HAS_TRANS]-&gt;(tx)&quot;,\r\n      {batchSize:10000, parallel:true}\r\n    )\r\n\r\nThe other approach would be to write a little script and call the cypher multiple times.\r\n\r\n","link":"https://stackoverflow.com/questions/49639902/neo4j-loading-to-memory-in-batches/49640021#49640021","title":"Neo4j : Loading to memory in batches"}],"owner":{"reputation":8,"user_id":9593618,"user_type":"registered","profile_image":"https://graph.facebook.com/10154174569823002/picture?type=large","display_name":"Amulya Aankul","link":"https://stackoverflow.com/users/9593618/amulya-aankul"},"last_editor":{"reputation":7354,"user_id":4187346,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uSe1J.png?s=128&g=1","display_name":"Dave Bennett","link":"https://stackoverflow.com/users/4187346/dave-bennett"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49640021,"answer_count":1,"score":1,"last_activity_date":1522800023,"creation_date":1522793659,"last_edit_date":1522795909,"question_id":49639902,"share_link":"https://stackoverflow.com/q/49639902","body_markdown":"I have a large transaction node (3 million rows) and very little memory (8GB of RAM). I have already created the transaction node using Periodic Commit and now I want to create relationship between account node and transaction node.\r\n\r\nThis is what I am using :\r\n\r\n    MATCH (tx:Transaction),(a:Account)\r\n    WHERE tx.tx_id = a.tx_id\r\n    CREATE (a)-[:HAS_TRANS]-&gt;(tx)\r\n\r\nHowever, it runs out of memory because it first loads the entire transaction data into memory before creating relationship. \r\n\r\nIdeally, I want to load just a 10000 records in memory, create relationship, clean the memory and then create relationship for the next 10000 records.\r\n\r\nI am aware that we can create the relationship while creating the transaction table on periodic commit. However, I am curious if there is any other solution.\r\n","link":"https://stackoverflow.com/questions/49639902/neo4j-loading-to-memory-in-batches","title":"Neo4j : Loading to memory in batches"},{"tags":["csv","neo4j","cypher","graph-databases"],"comments":[{"owner":{"reputation":25104,"user_id":243245,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG","display_name":"Rup","link":"https://stackoverflow.com/users/243245/rup"},"edited":false,"score":1,"creation_date":1522764646,"post_id":49632183,"comment_id":86271482,"link":"https://stackoverflow.com/questions/49632183/how-to-show-the-relationship-in-neo4j#comment86271482_49632183"},{"owner":{"reputation":13,"user_id":9591440,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0069e8011f20fb4a0c9bb6298b6d8e7a?s=128&d=identicon&r=PG&f=1","display_name":"Erik11","link":"https://stackoverflow.com/users/9591440/erik11"},"reply_to_user":{"reputation":25104,"user_id":243245,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG","display_name":"Rup","link":"https://stackoverflow.com/users/243245/rup"},"edited":false,"score":0,"creation_date":1522764826,"post_id":49632183,"comment_id":86271607,"link":"https://stackoverflow.com/questions/49632183/how-to-show-the-relationship-in-neo4j#comment86271607_49632183"},{"owner":{"reputation":25104,"user_id":243245,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG","display_name":"Rup","link":"https://stackoverflow.com/users/243245/rup"},"edited":false,"score":0,"creation_date":1522765037,"post_id":49632183,"comment_id":86271767,"link":"https://stackoverflow.com/questions/49632183/how-to-show-the-relationship-in-neo4j#comment86271767_49632183"}],"answers":[{"comments":[{"owner":{"reputation":13,"user_id":9591440,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0069e8011f20fb4a0c9bb6298b6d8e7a?s=128&d=identicon&r=PG&f=1","display_name":"Erik11","link":"https://stackoverflow.com/users/9591440/erik11"},"edited":false,"score":1,"creation_date":1522992082,"post_id":49634646,"comment_id":86382797,"link":"https://stackoverflow.com/questions/49632183/how-to-show-the-relationship-in-neo4j/49634646#comment86382797_49634646"}],"tags":[],"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1522771925,"creation_date":1522771925,"answer_id":49634646,"question_id":49632183,"share_link":"https://stackoverflow.com/a/49634646","body_markdown":"First, save your CSV file into Neo4j import directory (take a look in [Neo4j files location docs][1]). After, use Neo4j [LOAD CSV][2] statement to import your data. The script I used to reproduce your desired output is as follow:\r\n\r\n    // Load the csv file\r\n    load csv from &quot;file:///friends.csv&quot; as line\r\n    // calculate the indexes from the second column to the last\r\n    with line, range(1, size(line) - 1) as indexes\r\n    // merge (create or assign) the node from first column (0,1,2,3,10)\r\n    merge(a:Node{id:line[0]})\r\n    // pass &#39;a&#39;, &#39;indexes&#39; and &#39;line&#39; to the next context\r\n    with a, indexes, line\r\n    // unwind the indexes into single index per row\r\n    unwind indexes as index\r\n    // merge (create or assign) the node from other columns\r\n    merge(b:Node{id:line[index]})\r\n    // merge the relationship between a and b\r\n    merge(a)-[:FRIEND_OF]-&gt;(b)\r\n\r\nThe output considering your sample CSV file will be:\r\n\r\n[![Output][3]][3]\r\n\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/current/configuration/file-locations/#file-locations\r\n  [2]: https://neo4j.com/developer/guide-import-csv/\r\n  [3]: https://i.stack.imgur.com/FNnoh.png","link":"https://stackoverflow.com/questions/49632183/how-to-show-the-relationship-in-neo4j/49634646#49634646","title":"How to show the relationship in neo4j"}],"owner":{"reputation":13,"user_id":9591440,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0069e8011f20fb4a0c9bb6298b6d8e7a?s=128&d=identicon&r=PG&f=1","display_name":"Erik11","link":"https://stackoverflow.com/users/9591440/erik11"},"last_editor":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":1,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49634646,"answer_count":1,"score":2,"last_activity_date":1522771925,"creation_date":1522764441,"last_edit_date":1522770443,"question_id":49632183,"share_link":"https://stackoverflow.com/q/49632183","body_markdown":"&gt;I&#39;ve attached the sample input comma separated value file and a hand drawn image showing my expected output down below.\r\n&gt;\r\n    \r\n    Problem Description:\r\n    --------------------\r\n    \r\nI have a CSV file containing a list of nodes where each line denotes a relationship of node at line[0] with every other list of nodes line[2],line[2],line[3].....line[4500] in that line\r\n    \r\nEx. Sample Input File:\r\n    \r\n    0,1,2,3 (line 1)  \r\n    1,2 (line 2)    \r\n    2,4 (line 3)  \r\n    3,7,19 (line 4)  \r\n    10,4,5,11 (line 5)\r\n    \r\n    \r\nPlease note (line 1),(line 2) etc. is not present in actual CSV file. Here I&#39;ve named them just for sake of explanation.\r\n    \r\n    for line 1 (Let &#39;line&#39;) node at \r\n    line[0] i.e. &quot;0&quot; has a directed &quot;friends&quot; relationship with \r\n    nodes at line[2] i.e &quot;1&quot; \r\n    nodes at line[4], i,e.&quot;2&quot;\r\n    nodes at line[6], i,e.&quot;3&quot;\r\n    \r\n    similarly again for line 2 (Let &#39;line&#39;) node at \r\n    line[0] i.e. &quot;1&quot; has a directed &quot;friends&quot; relationship with \r\n    nodes at line[2] i.e &quot;2&quot; \r\n    \r\n    similarly again for line 3(Let &#39;line&#39;)  node at \r\n    line[0] i.e. &quot;2&quot; has a directed &quot;friends&quot; relationship with \r\n    nodes at line[2] i.e &quot;4&quot; \r\n    \r\n    \r\n    similarly again for line 4(Let &#39;line&#39;)  node at \r\n    line[0] i.e. &quot;3&quot; has a directed &quot;friends&quot; relationship with \r\n    nodes at line[2] i.e &quot;7&quot; \r\n    nodes at line[4], i,e.&quot;19&quot;\r\n    \r\n    and so on....\r\n    \r\nwhat i am trying to do is I want to show a graph in Neo4j depicting the suggested friend relationship among each nodes.\r\n    \r\nwhat I cannot figure out is how to iterate the whole __csv__ file as well as capture the relationship among each nodes on each line of __csv__ file.\r\n    \r\nPlease Note:[I have attached the expected hand drawn output of a sample input file.]\r\n    \r\n    \r\n&gt;[Link to Comma separated value file containing the friends][1]\r\n    \r\n&gt;[Link to Image][11]\r\n    \r\n     \r\n[1]: https://raw.githubusercontent.com/saurabhkumar1903/neo4j/master/alterFile/sampletestoutput1.csv\r\n[11]: https://i.imgur.com/x6CYdfU.jpg","link":"https://stackoverflow.com/questions/49632183/how-to-show-the-relationship-in-neo4j","title":"How to show the relationship in neo4j"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":4,"creation_date":1522776099,"post_id":49630790,"comment_id":86279044,"link":"https://stackoverflow.com/questions/49630790/i-am-trying-to-run-this-cypher-query-but-multiple-optional-match-takes-too-much#comment86279044_49630790"},{"owner":{"reputation":721,"user_id":3601660,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/9dfe9498ed911a8b1c7e386e14f98ea9?s=128&d=identicon&r=PG&f=1","display_name":"c z","link":"https://stackoverflow.com/users/3601660/c-z"},"edited":false,"score":0,"creation_date":1522867981,"post_id":49630790,"comment_id":86325967,"link":"https://stackoverflow.com/questions/49630790/i-am-trying-to-run-this-cypher-query-but-multiple-optional-match-takes-too-much#comment86325967_49630790"}],"owner":{"reputation":6,"user_id":6568276,"user_type":"registered","profile_image":"https://graph.facebook.com/1037021039708657/picture?type=large","display_name":"Rudresh Kumar Chaudhary","link":"https://stackoverflow.com/users/6568276/rudresh-kumar-chaudhary"},"last_editor":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":2,"delete_vote_count":0,"close_vote_count":3,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":6,"up_vote_count":1,"answer_count":0,"score":-5,"last_activity_date":1522775876,"creation_date":1522760514,"last_edit_date":1522775876,"question_id":49630790,"share_link":"https://stackoverflow.com/q/49630790","body_markdown":"    MATCH (m:Merchant)-[:HAVING_CATEGORY]-&gt;(c:Category) \r\n    WHERE m.status IN [1,2] \r\n    WITH m, c \r\n    OPTIONAL MATCH (m)-[:HAVING_STORE]-&gt;(s:Store) \r\n    WITH m,c,s \r\n    OPTIONAL MATCH (s)-[:HAVING_COUPON]-&gt;(d:Coupon) \r\n    WITH m,c,s, d \r\n    OPTIONAL MATCH (u:User)-[rd:REDEEMED]-&gt;(d) \r\n    WITH m, c, s, d, rd, u \r\n    OPTIONAL MATCH (d)&lt;-[f:HAVE_FAVORITE]-(fu:User)  \r\n    OPTIONAL MATCH (v:Activity {activity:1, coupon_id:d.id}) \r\n    OPTIONAL MATCH (rmp:Redeemption {merchant_id:m.id}) \r\n    WITH m, c, s, d, rd, u, fu, v, rmp \r\n    RETURN DISTINCT id(m) as id, m.id as merchant_id, m.name as name,  \r\n    m.email as email, m.contact as contact, m.created_date as created, \r\n    m.status as status, m.address as address, c.name as category_name, \r\n    count(DISTINCT s) as store, count(DISTINCT d) as deal, \r\n    m.subcategory_items as venue_type, m.price_range as price_range, \r\n    m.classification as classification, count(DISTINCT rd) as redeemed_deal, \r\n    count(DISTINCT u) as total_user, count(DISTINCT fu) as favorite, \r\n    count(DISTINCT v.user_id) as views, sum(rmp.total_amount) as performance \r\n    ORDER BY created DESC \r\n    SKIP 0 LIMIT 10","link":"https://stackoverflow.com/questions/49630790/i-am-trying-to-run-this-cypher-query-but-multiple-optional-match-takes-too-much","title":"I am trying to run this cypher query but multiple optional match takes too much time"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":171,"user_id":6226370,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/ZUC6p.jpg?s=128&g=1","display_name":"Sergio La Rosa","link":"https://stackoverflow.com/users/6226370/sergio-la-rosa"},"edited":false,"score":0,"creation_date":1523094158,"post_id":49630426,"comment_id":86425232,"link":"https://stackoverflow.com/questions/49630426/optimizations-for-merging-graph-with-million-nodes-and-csv-with-million-rows#comment86425232_49630426"}],"owner":{"reputation":5782,"user_id":1317018,"user_type":"registered","accept_rate":59,"profile_image":"https://i.stack.imgur.com/qnq3y.png?s=128&g=1","display_name":"Mahesha999","link":"https://stackoverflow.com/users/1317018/mahesha999"},"last_editor":{"reputation":5782,"user_id":1317018,"user_type":"registered","accept_rate":59,"profile_image":"https://i.stack.imgur.com/qnq3y.png?s=128&g=1","display_name":"Mahesha999","link":"https://stackoverflow.com/users/1317018/mahesha999"},"comment_count":1,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522760630,"creation_date":1522759463,"last_edit_date":1522760630,"question_id":49630426,"share_link":"https://stackoverflow.com/q/49630426","body_markdown":"Consider I have graph with following nodes and relationships:\r\n\r\n    (:GPE)-[:contains]-&gt;(:PE)-[:has]-&gt;(:E)\r\n\r\nwith following attributes:\r\n\r\n    GPE: joinProp1, outProp1, randomProps\r\n    PE : joinProp2, outProp2, randomProps\r\n    E  : joinProp3, outProp3, randomProps\r\n\r\nNow consider I have csv of following format:\r\n\r\n    joinCol1, joinCol2, joinCol3, outCol1, outCol2, outCol3, randomProps\r\n\r\nNow consider I have million rows in this csv file. Also I have million instances of each of `(:GPE),(:PE),(:E)` in graph. I want to merge the graph and csv into new csv. For that I want to map / equate   \r\n\r\n - joinCol1 with joinProp1\r\n - joinCol2 with joinProp2\r\n - joinCol3 with joinProp3\r\n\r\nsomething like this (pseudo cypher) for each row in csv:\r\n\r\n    MATCH (gpe:GPE {joinProp1:joinCol1})-[:contains]-&gt;(pe:PE {joinProp2:joinCol2})-[:has]-&gt;(e:E {joinProp3:joinCol3}) RETURN gpe.outProp1, pe.outProp2, e.outProp3\r\n\r\nSo the output csv format would be:\r\n\r\n    joinCol1, joinCol2, joinCol3, outCol1, outCol2, outCol3, outProp1, outProp2, outProp3\r\n\r\nWhat is rough minimum execution time estimates (minutes or hours) in which I can complete this task if I create indices on all `joinProp`s and use parameterized cypher (considering I am implementing this simple logic with java api). I just want to know what are rough estimates. We have similar (possibly un-optimized) task implemented and it takes several hours to do this. The challenge is to bring down that execution time. What all things I can do to optimize and bring down execution time to some minutes? Any quick optimization points / links? Will using some approach other than java api provide performance improvements?\r\n ","link":"https://stackoverflow.com/questions/49630426/optimizations-for-merging-graph-with-million-nodes-and-csv-with-million-rows","title":"Optimizations for merging graph with million nodes and csv with million rows"},{"tags":["sql","ubuntu","neo4j","graph-databases"],"answers":[{"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522775654,"creation_date":1522775654,"answer_id":49635727,"question_id":49629943,"share_link":"https://stackoverflow.com/a/49635727","body_markdown":"A creation of 300000 relationships at a time can be a costly operation, mostly in terms of heap usage, as you&#39;re performing this in a single transaction. \r\n\r\nA better approach would be to batch this insertion (usually 10k per transaction is a sweet spot). [APOC Procedures][1] is the go-to solution for this, in particular `apoc.periodic.iterate()`.\r\n\r\n    CALL apoc.periodic.iterate(\r\n     &#39;MATCH (p:students),(c:results)\r\n      WHERE p.id = c.student_id\r\n      RETURN p, c&#39;,\r\n     &#39;CREATE (c)-[:scored]-&gt;(p)&#39;,\r\n     {iterateList:true, parallel:false}) YIELD batches, total, errorMessages\r\n    RETURN batches, total, errorMessages\r\n\r\nThe other big thing to check is that you have indexes (or unique constraints) on both :students(id) and :results(student_id) so your lookups are fast, otherwise periodic iterate will hang, as this would become a high cost operation.\r\n\r\nRun an EXPLAIN on your original query and make sure it&#39;s first using a NodeByLabelScan for one of those nodes, and then a NodeByIndexSeek to find other.\r\n\r\n\r\n  [1]: https://neo4j-contrib.github.io/neo4j-apoc-procedures/index32.html#_apoc_periodic_iterate","link":"https://stackoverflow.com/questions/49629943/serviceunavailable-in-neo4j-while-creating-a-relationship-between-nodes/49635727#49635727","title":"ServiceUnavailable in Neo4j while creating a relationship between nodes"}],"owner":{"reputation":127,"user_id":3441834,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/b66f643161355a61a2f0a57aaefe7a7d?s=128&d=identicon&r=PG&f=1","display_name":"Coder 477","link":"https://stackoverflow.com/users/3441834/coder-477"},"last_editor":{"reputation":5085,"user_id":7879193,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-bVdcN0nQCio/AAAAAAAAAAI/AAAAAAAACfs/jPa4Dr_Nzbk/photo.jpg?sz=128","display_name":"Stanislav Kralin","link":"https://stackoverflow.com/users/7879193/stanislav-kralin"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1522775654,"creation_date":1522757957,"last_edit_date":1522768371,"question_id":49629943,"share_link":"https://stackoverflow.com/q/49629943","body_markdown":"I have newly started with Neo4j and trying to create relationships for huge data.\r\n\r\nI have already added few relationships and now while trying to create a relationship the following error is seen.\r\n\r\n&gt; ServiceUnavailable WebSocket connection failure. Due to security\r\n&gt; constraints in your web browser, the reason for the failure is not\r\n&gt; available to this Neo4j Driver. Please use your browsers development\r\n&gt; console to determine the root cause of the failure. Common reasons\r\n&gt; include the database being unavailable, using the wrong connection URL\r\n&gt; or temporary network problems. If you have enabled encryption, ensure\r\n&gt; your browser is configured to trust the certificate Neo4j is\r\n&gt; configured to use. WebSocket `readyState` is: 3\r\n\r\nThis is the query I am trying to run\r\n\r\n    MATCH (p:students),(c:results)\r\n    WHERE p.id = c.student_id\r\n    create (c)-[:scored]-&gt;(p)\r\n\r\nstudents and exams have around 300000 nodes each.\r\n\r\nThis is happening only while creating a relationship. \r\nBut it didn&#39;t happen when I ran a return query for the same match\r\n\r\n    MATCH (p:students),(c:results)\r\n    WHERE p.id = c.student_id\r\n    return c.student_id\r\n\r\nI tried checking logs but couldn&#39;t find any solution. Can someone help me understand what the error indicates and how to resolve if anyone encountered a similar issue.\r\n\r\n Note: I am running this on Ubuntu machine with remote host.","link":"https://stackoverflow.com/questions/49629943/serviceunavailable-in-neo4j-while-creating-a-relationship-between-nodes","title":"ServiceUnavailable in Neo4j while creating a relationship between nodes"},{"tags":["neo4j","character-encoding","graphql"],"comments":[{"owner":{"reputation":34790,"user_id":728812,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f522bc835d745f319a9567d63f5c0cc9?s=128&d=identicon&r=PG","display_name":"Michael Hunger","link":"https://stackoverflow.com/users/728812/michael-hunger"},"edited":false,"score":0,"creation_date":1522791787,"post_id":49628499,"comment_id":86286789,"link":"https://stackoverflow.com/questions/49628499/graphql-plugin-for-neo4j-returns-data-in-iso-8859-1-encoding#comment86286789_49628499"},{"owner":{"reputation":8,"user_id":1817830,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/156090a711963ec2822c62517aad4477?s=128&d=identicon&r=PG","display_name":"alderaan","link":"https://stackoverflow.com/users/1817830/alderaan"},"reply_to_user":{"reputation":34790,"user_id":728812,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f522bc835d745f319a9567d63f5c0cc9?s=128&d=identicon&r=PG","display_name":"Michael Hunger","link":"https://stackoverflow.com/users/728812/michael-hunger"},"edited":false,"score":0,"creation_date":1522856900,"post_id":49628499,"comment_id":86319560,"link":"https://stackoverflow.com/questions/49628499/graphql-plugin-for-neo4j-returns-data-in-iso-8859-1-encoding#comment86319560_49628499"},{"owner":{"reputation":8,"user_id":1817830,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/156090a711963ec2822c62517aad4477?s=128&d=identicon&r=PG","display_name":"alderaan","link":"https://stackoverflow.com/users/1817830/alderaan"},"reply_to_user":{"reputation":34790,"user_id":728812,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f522bc835d745f319a9567d63f5c0cc9?s=128&d=identicon&r=PG","display_name":"Michael Hunger","link":"https://stackoverflow.com/users/728812/michael-hunger"},"edited":false,"score":0,"creation_date":1522918147,"post_id":49628499,"comment_id":86345873,"link":"https://stackoverflow.com/questions/49628499/graphql-plugin-for-neo4j-returns-data-in-iso-8859-1-encoding#comment86345873_49628499"}],"owner":{"reputation":8,"user_id":1817830,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/156090a711963ec2822c62517aad4477?s=128&d=identicon&r=PG","display_name":"alderaan","link":"https://stackoverflow.com/users/1817830/alderaan"},"last_editor":{"reputation":8,"user_id":1817830,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/156090a711963ec2822c62517aad4477?s=128&d=identicon&r=PG","display_name":"alderaan","link":"https://stackoverflow.com/users/1817830/alderaan"},"comment_count":3,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1522918168,"creation_date":1522753514,"last_edit_date":1522918168,"question_id":49628499,"share_link":"https://stackoverflow.com/q/49628499","body_markdown":"We have installed the GraphQl plugin (neo4j-graphql-3.3.0.0.jar) for Neo4j ddbb (3.3.3 community edition). When we query data using the GraphQl endpoint in Neo4j server we get the response encoded with iso-8859-1 (probably it is saved with the same encoding) instead of UTF-8. \r\n\r\nNot sure if it is a misconfiguration in Neo4j server or in the GraphQl plugin, where can I find the relevant configuration settings regarding encoding?\r\n\r\nThanks in advance.","link":"https://stackoverflow.com/questions/49628499/graphql-plugin-for-neo4j-returns-data-in-iso-8859-1-encoding","title":"Graphql plugin for Neo4j returns data in iso-8859-1 encoding"},{"tags":["graph","neo4j","cypher"],"answers":[{"tags":[],"owner":{"reputation":25,"user_id":9555005,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c263cb551b8be6c57259fea00d94d038?s=128&d=identicon&r=PG&f=1","display_name":"Scofflaw","link":"https://stackoverflow.com/users/9555005/scofflaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522788752,"creation_date":1522788752,"answer_id":49638978,"question_id":49627657,"share_link":"https://stackoverflow.com/a/49638978","body_markdown":"Neo4j itself isn&#39;t for generating visualizations of graphs; it&#39;s for storing and retrieving data in a graph. As such, the visualization options are limited. In the desktop client you can click and drag nodes returned by a query to lock them in whatever location you want.\r\n\r\nThere is separate software for graph visualizations, but I haven&#39;t used any of it so I can&#39;t make a recommendation.","link":"https://stackoverflow.com/questions/49627657/change-node-position-of-the-graph-using-neo4j/49638978#49638978","title":"Change node position of the graph using Neo4j"}],"owner":{"reputation":22,"user_id":9502075,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"jahan","link":"https://stackoverflow.com/users/9502075/jahan"},"last_editor":{"reputation":22,"user_id":9502075,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"jahan","link":"https://stackoverflow.com/users/9502075/jahan"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1522993263,"creation_date":1522750908,"last_edit_date":1522993263,"question_id":49627657,"share_link":"https://stackoverflow.com/q/49627657","body_markdown":"I am using the Neo4j Desktop Version 1.0.18 (1.0.18.81). I want to create a graph where the &quot;source&quot; node&#39;s position will be in upper side and the &quot;target&quot; node&#39;s position will be in the lower side. I have already created several graph using Neo4j where the nodes position of the graph generated randomly.I have attached my graph where the source and target node&#39;s position created automatically.Is there any way to do this in Neo4j?Please help.[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ERbQG.png","link":"https://stackoverflow.com/questions/49627657/change-node-position-of-the-graph-using-neo4j","title":"Change node position of the graph using Neo4j"},{"tags":["neo4j","relationship","graph-databases"],"comments":[{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":2,"creation_date":1522747646,"post_id":49625522,"comment_id":86260049,"link":"https://stackoverflow.com/questions/49625522/how-to-model-relationships-between-sets-of-nodes#comment86260049_49625522"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1522776354,"post_id":49625522,"comment_id":86279188,"link":"https://stackoverflow.com/questions/49625522/how-to-model-relationships-between-sets-of-nodes#comment86279188_49625522"}],"answers":[{"comments":[{"owner":{"reputation":8061,"user_id":781965,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/d2c8ce5d54bdc1e0a078155acfff7597?s=128&d=identicon&r=PG","display_name":"Jeff","link":"https://stackoverflow.com/users/781965/jeff"},"edited":false,"score":0,"creation_date":1523152196,"post_id":49629187,"comment_id":86440622,"link":"https://stackoverflow.com/questions/49625522/how-to-model-relationships-between-sets-of-nodes/49629187#comment86440622_49629187"}],"tags":[],"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522755717,"creation_date":1522755717,"answer_id":49629187,"question_id":49625522,"share_link":"https://stackoverflow.com/a/49629187","body_markdown":"Well, in the fist case, I think you can make a `:REQUIREMENT` relationship between &quot;MATH201&quot; and &quot;MATH101&quot;.\r\n\r\nIn the second case you can make a `:REQUIREMENT` relationship between &quot;Bachelor of Computer Science&quot; node and an intermediate node to group all science papers, as in the image below. Also, you can put some extra properties in the relationship to what type of requirement the course has:\r\n\r\n[![Sample data model][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Arm8z.png","link":"https://stackoverflow.com/questions/49625522/how-to-model-relationships-between-sets-of-nodes/49629187#49629187","title":"How to model relationships between sets of nodes"}],"owner":{"reputation":8061,"user_id":781965,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/d2c8ce5d54bdc1e0a078155acfff7597?s=128&d=identicon&r=PG","display_name":"Jeff","link":"https://stackoverflow.com/users/781965/jeff"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49629187,"answer_count":1,"score":2,"last_activity_date":1522755717,"creation_date":1522744215,"question_id":49625522,"share_link":"https://stackoverflow.com/q/49625522","body_markdown":"I am currently looking at modelling tertiary courses and other such entities (MATH101, BIOL360, BSc etc.), and one of the options we&#39;re looking at is graph databases. I am not familiar with graph databases, other than in theory.\r\n\r\nOne of the things I am trying to model is requirements, for example &quot;MATH201 requires the student previously completed MATH101&quot;. That one seems easy - I can create a vertex between the two. Others are more complicated: &quot;Bachelor of Computer Science requires 40 points at 200 level or higher in science papers&quot;.\r\n\r\nWhat I&#39;d like to do here is name a bunch of sets, *a la* [Neo4J Labels](https://neo4j.com/docs/developer-manual/current/introduction/graphdb-concepts/#graphdb-neo4j-labels), then create a relationship from one of the nodes to the *set* of nodes described in the labels, but I can&#39;t see a way to do this. Is this something that&#39;s possible in graph databasing engines, or am I basically running down [an XY path](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem), and should be doing something else entirely?\r\n\r\nI&#39;ve tagged Neo4J because I&#39;m leaning towards it as (from what I can tell) it&#39;s the most widely known/used graph dbms, but I&#39;m open to solutions in other databases too (in fact, if it&#39;s possible in the very new SQL Server offering, that would probably be ideal as other infrastructure is on that).","link":"https://stackoverflow.com/questions/49625522/how-to-model-relationships-between-sets-of-nodes","title":"How to model relationships between sets of nodes"},{"tags":["sql","neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":11,"user_id":9589622,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Meghal","link":"https://stackoverflow.com/users/9589622/meghal"},"edited":false,"score":0,"creation_date":1522768905,"post_id":49626516,"comment_id":86274729,"link":"https://stackoverflow.com/questions/49625207/neo4j-cypher-query-to-filter-duplicate-from-hpalm-test-run-data/49626516#comment86274729_49626516"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"reply_to_user":{"reputation":11,"user_id":9589622,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Meghal","link":"https://stackoverflow.com/users/9589622/meghal"},"edited":false,"score":0,"creation_date":1522774944,"post_id":49626516,"comment_id":86278379,"link":"https://stackoverflow.com/questions/49625207/neo4j-cypher-query-to-filter-duplicate-from-hpalm-test-run-data/49626516#comment86278379_49626516"}],"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522747413,"creation_date":1522747413,"answer_id":49626516,"question_id":49625207,"share_link":"https://stackoverflow.com/a/49626516","body_markdown":"In Neo4j, when using aggregation functions (such as collect(), count(), and sum()), the non-aggregation variables in your WITH clause become the implicit grouping key. So in this case, you need to have the test id as the non-aggregation variable, and collect the rest.\r\n\r\nTo make sure your collection is in the right order, you&#39;ll need to sort before the collection, and then when it&#39;s collected just get the head of the collection.\r\n\r\nThe WITH clause is the key here, as it is a place where you can change what variables are in scope and perform aggregation, and then follow it up with additional operations.\r\n\r\n    MATCH (a:HP) \r\n    WHERE a.project=&#39;CHP&#39; and a.type=&#39;test-instance&#39; and a.`cycle-id` =&#39;11743&#39; \r\n    WITH a.`test-id` as testId, a\r\n    ORDER BY a.`exec-date` DESC, a.`last-modified` DESC\r\n    WITH testId, head(collect(a)) as a\r\n    ORDER BY a.id\r\n    RETURN a.id as id, testId, a.`exec-date` as `exec-date`, \r\n           a.`last-modified` as `last-modified`, a.status as status, \r\n           a.name as name, a.owner as owner\r\n\r\nAs for your summary query, we&#39;ll take a similar approach to ensure we only have the latest `a` node per exec-date and last-modified, and only then will we get the counts per status:\r\n\r\n    MATCH (a:HP)\r\n    WHERE  a.project=&#39;CHP&#39;  and a.type=&#39;test-instance&#39; and a.`cycle-id`=&#39;11743&#39;\r\n    WITH a.`test-id` as testId, a\r\n    ORDER BY a.`exec-date` DESC, a.`last-modified` DESC\r\n    WITH testId, head(collect(a)) as a\r\n    RETURN a.status as status, count(a) as cnt, a.`cycle-id` as `cycle-id`\r\n    ORDER BY status\r\n\r\nNow, all this said, your data model doesn&#39;t look very graphy to me. You may want to make sure this is a good fit for what you want to do, as graph databases excel when there is connected data, but relational databases tend to outperform them when it comes to these kinds of queries, where there are no relationship traversals or interesting graphical connections to evaluate.","link":"https://stackoverflow.com/questions/49625207/neo4j-cypher-query-to-filter-duplicate-from-hpalm-test-run-data/49626516#49626516","title":"Neo4j cypher query to filter duplicate from HPALM test run data"}],"owner":{"reputation":11,"user_id":9589622,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Meghal","link":"https://stackoverflow.com/users/9589622/meghal"},"last_editor":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1522747413,"creation_date":1522742957,"last_edit_date":1522745927,"question_id":49625207,"share_link":"https://stackoverflow.com/q/49625207","body_markdown":"I am pulling Test instance data from HPALM into Neo4j &amp; then trying to create dashboard graphs in grafana using Neo4j Cypher queries. With every test run a new row is created in Neo4j with the same &quot;test-id&quot;. So if I ran a test &amp; it failed yesterday &amp; that same test passed today then there are 2 entries/rows created for same test-id with different status=Passed/Failed &amp; different Date/Time last modified. To create a summary I need query which will filter out duplicate test-id entries such that the most recent (distinct) last run data is shown along with the test status so total test count matches that shown in HPALM. Below is the query which is showing multiple rows with same id but different test status on different date / time of test run. I need query to sort datewise &amp; then eliminate/filter 1st &amp; 3rd row from result because it is old test run entry. I only want latest run entries which are row 2 &amp; 4.\r\nrow 1 &amp; 2 have duplicate &quot;test-id&quot;=&#39;72534&#39; which needs to be made distinct.\r\n\r\n    MATCH (a:HP) \r\n    WHERE a.project=&#39;CHP&#39; and a.type=&#39;test-instance&#39; and a.`cycle-id` =&#39;11743&#39; \r\n    RETURN distinct a.id, a.`test-id`, a.`exec-date`, a.`last-modified`, \r\n           a.status, a.name, a.owner \r\n    ORDER BY a.id\r\n    \r\n    ╒═════╤═══════════╤═════════════╤═══════════════════╤════════╤══════╤═══════╕\r\n    │a.id │a.`test-id`│a.`exec-date`│a.`last-modified`  │a.status│a.name│a.owner│\r\n    ╞═════╪═══════════╪═════════════╪═══════════════════╪════════╪══════╪═══════╡\r\n    │44079│72534      │2018-03-09   │2018-03-09 07:42:30│Failed  │(null)│g942477│\r\n    ├─────┼───────────┼─────────────┼───────────────────┼────────┼──────┼───────┤\r\n    │44079│72534      │2018-03-20   │2018-03-20 13:01:31│Passed  │(null)│g942477│\r\n    ├─────┼───────────┼─────────────┼───────────────────┼────────┼──────┼───────┤\r\n    │44080│72533      │2018-03-07   │2018-03-07 11:12:54│Failed  │(null)│g942477│\r\n    ├─────┼───────────┼─────────────┼───────────────────┼────────┼──────┼───────┤\r\n    │44080│72533      │2018-03-21   │2018-03-21 10:42:11│Passed  │(null)│g942477│\r\n    ├─────┼───────────┼─────────────┼───────────────────┼────────┼──────┼───────┤\r\n    │44081│72532      │2018-03-05   │2018-03-05 11:51:28│Passed  │(null)│g942477│\r\n    ├─────┼───────────┼─────────────┼───────────────────┼────────┼──────┼───────┤\r\n    │44082│72526      │2018-03-05   │2018-03-05 11:56:54│Failed  │(null)│g942477│\r\n\r\nThe last-modified column is of type &quot;String&quot; &amp; I also need help on how to sort the entries datewise before filtering duplicates. \r\n\r\nCurrently because of duplicate entries the summary response shows higher than expected counts of number of tests &#39;Failed&#39; ,&#39;no run&#39; &amp; &#39;Not completed&#39; states as a result of below query: I also need help with updated query which gives correct summary count. (after filtering duplicates) \r\n\r\n    MATCH (a:HP)\r\n    WHERE  a.project=&#39;CHP&#39;  and a.type=&#39;test-instance&#39; and a.`cycle-id`=&#39;11743&#39;\r\n    RETURN  a.status , count(*) as cnt ,a.`cycle-id`\r\n    ORDER BY a.status\r\n    \r\n    ╒═════════════╤═══╤════════════╕\r\n    │a.status     │cnt│a.`cycle-id`│\r\n    ╞═════════════╪═══╪════════════╡\r\n    │Failed       │4  │11743       │\r\n    ├─────────────┼───┼────────────┤\r\n    │No Run       │2  │11743       │\r\n    ├─────────────┼───┼────────────┤\r\n    │Not Completed│5  │11743       │\r\n    ├─────────────┼───┼────────────┤\r\n    │Passed       │31 │11743       │\r\n    └─────────────┴───┴────────────┘\r\n\r\nNeed sample query in to understand How to use a &quot;Group By&quot; &amp; &quot;Having&quot; clause in neo4j in my case above.\r\n\r\nI also need to know sample query for [DateCreated-Today(date-time)]. How to add subtract dates in String type fields?\r\n\r\nI am using Neo4j Version:3.0.6 Let me know if you need further details.","link":"https://stackoverflow.com/questions/49625207/neo4j-cypher-query-to-filter-duplicate-from-hpalm-test-run-data","title":"Neo4j cypher query to filter duplicate from HPALM test run data"},{"tags":["neo4j","path","cypher","intersection"],"answers":[{"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522743687,"creation_date":1522743687,"answer_id":49625396,"question_id":49625067,"share_link":"https://stackoverflow.com/a/49625396","body_markdown":"The start/end nodes of your 2 `MATCH`es have different `group`s, so they can never find common paths.\r\n\r\nTherefore, when you ask for &quot;paths in common&quot;, I assume you actually want to find the shared **middle nodes** (between the 2 sets of 3-node paths). If so, this query should work:\r\n\r\n    MATCH p1=(g:Node)-[:FOLLOWED_BY *2]-&gt;(g2:Node) \r\n    WHERE g.group=10 AND g2.group=10\r\n    WITH COLLECT(DISTINCT NODES(p1)[1]) AS middle1\r\n    MATCH p2=(g3:Node)-[:FOLLOWED_BY *2]-&gt;(g4:Node) \r\n    WHERE g3.group=15 AND g4.group=15 AND NODES(p2)[1] IN middle1\r\n    RETURN DISTINCT NODES(p2)[1] AS common_middle_node;\r\n\r\n","link":"https://stackoverflow.com/questions/49625067/query-intersection-of-paths-in-neo4j-using-cypher/49625396#49625396","title":"Query intersection of Paths in Neo4j using Cypher"}],"owner":{"reputation":6,"user_id":5695330,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-vtTNq87DTx4/AAAAAAAAAAI/AAAAAAAAAAA/bJtdZeWV50E/photo.jpg?sz=128","display_name":"insalada","link":"https://stackoverflow.com/users/5695330/insalada"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1522743687,"creation_date":1522742415,"question_id":49625067,"share_link":"https://stackoverflow.com/q/49625067","body_markdown":"Having this query working in Cypher (Neo4j):\r\n\r\n    MATCH p=(g:Node)-[:FOLLOWED_BY *2..2]-&gt;(g2:Node) \r\n    WHERE g.group=10 AND g2.group=10 \r\n    RETURN p\r\n\r\nwhich returns all possible paths belonging a specific group (group is just a property to classify nodes), I am struggling to get a query that returns the paths in common between both collection of paths. It would be something like this:\r\n\r\n    MATCH p=(g:Node)-[:FOLLOWED_BY *2..2]-&gt;(g2:Node) \r\n    WHERE g.group=10 AND g2.group=10\r\n    MATCH p=(g3:Node)-[:FOLLOWED_BY *2..2]-&gt;(g4:Node) \r\n    WHERE g3.group=15 AND g4.group=15 \r\n    RETURN INTERSECTION(path1, path2)\r\n\r\nOf course I made that up. The goal is to get all the paths in common between both queries.\r\n","link":"https://stackoverflow.com/questions/49625067/query-intersection-of-paths-in-neo4j-using-cypher","title":"Query intersection of Paths in Neo4j using Cypher"},{"tags":["apache-spark","neo4j","pyspark","rdd"],"answers":[{"comments":[{"owner":{"reputation":30,"user_id":8939734,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f09f5f4f25998ae53e27a2d7d2ae5c5c?s=128&d=identicon&r=PG&f=1","display_name":"EDUCATED_SHARK_666","link":"https://stackoverflow.com/users/8939734/educated-shark-666"},"edited":false,"score":0,"creation_date":1522759972,"post_id":49626297,"comment_id":86267969,"link":"https://stackoverflow.com/questions/49625028/write-pyspark-rdd-or-df-in-neo4j/49626297#comment86267969_49626297"}],"tags":[],"owner":{"reputation":11,"user_id":9590153,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/77cef1e0d4e43284316c51489c8e250d?s=128&d=identicon&r=PG","display_name":"user9590153","link":"https://stackoverflow.com/users/9590153/user9590153"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522746818,"creation_date":1522746818,"answer_id":49626297,"question_id":49625028,"share_link":"https://stackoverflow.com/a/49626297","body_markdown":"A standard pattern to resolve this type of issues is to use `foreachPartition`:\r\n\r\n    def nodes(rows):\r\n        graph = Graph(password=&#39;admin&#39;)\r\n        tx = graph.begin()\r\n        for row in rows:\r\n            query = Node(&quot;item&quot;, event_id=row[0], text=row[19])\r\n            tx.create(query)\r\n        tx.commit()\r\n\r\n    infos.foreachPartition(nodes)\r\n\r\n","link":"https://stackoverflow.com/questions/49625028/write-pyspark-rdd-or-df-in-neo4j/49626297#49626297","title":"write pyspark Rdd or DF in neo4j"}],"owner":{"reputation":30,"user_id":8939734,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f09f5f4f25998ae53e27a2d7d2ae5c5c?s=128&d=identicon&r=PG&f=1","display_name":"EDUCATED_SHARK_666","link":"https://stackoverflow.com/users/8939734/educated-shark-666"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1522746818,"creation_date":1522742283,"question_id":49625028,"share_link":"https://stackoverflow.com/q/49625028","body_markdown":"I&#39;m experiencing some issue with py2neo and spark-driver since i could not insert node inside a foreach loop or map loop .Like the code below for exemple. \r\n\r\n\r\n    from py2neo import authenticate, Graph, cypher, Node\r\n    from pyspark import broadcast\r\n    infos=df.rdd\r\n    \r\n    authenticate(&quot;localhost:7474&quot;, &quot;neo4j&quot;, &quot;admin&quot;)\r\n    graph = Graph(password=&#39;admin&#39;)\r\n    tx = graph.begin()\r\n    \r\n    def node(row):\r\n        query = Node(&quot;item&quot;, event_id=row[0], text=row[19])\r\n        tx.create(query)\r\n        \r\n        \r\n    \r\n    infos.foreach(node)\r\n    tx.commit()\r\n\r\nhere is the end of the stack trace : \r\n\r\n    /usr/local/apache/spark-2.2.1-bin-hadoop2.6/python/pyspark/rdd.py in _wrap_function(sc, func, deserializer, serializer, profiler)\r\n       2386     assert serializer, &quot;serializer should not be empty&quot;\r\n       2387     command = (func, profiler, deserializer, serializer)\r\n    -&gt; 2388     pickled_command, broadcast_vars, env, includes = _prepare_for_python_RDD(sc, command)\r\n       2389     return sc._jvm.PythonFunction(bytearray(pickled_command), env, includes, sc.pythonExec,\r\n       2390                                   sc.pythonVer, broadcast_vars, sc._javaAccumulator)\r\n    \r\n    /usr/local/apache/spark-2.2.1-bin-hadoop2.6/python/pyspark/rdd.py in _prepare_for_python_RDD(sc, command)\r\n       2372     # the serialized command will be compressed by broadcast\r\n       2373     ser = CloudPickleSerializer()\r\n    -&gt; 2374     pickled_command = ser.dumps(command)\r\n       2375     if len(pickled_command) &gt; (1 &lt;&lt; 20):  # 1M\r\n       2376         # The broadcast will have same life cycle as created PythonRDD\r\n    \r\n    /usr/local/apache/spark-2.2.1-bin-hadoop2.6/python/pyspark/serializers.py in dumps(self, obj)\r\n        462 \r\n        463     def dumps(self, obj):\r\n    --&gt; 464         return cloudpickle.dumps(obj, 2)\r\n        465 \r\n        466 \r\n    \r\n    /usr/local/apache/spark-2.2.1-bin-hadoop2.6/python/pyspark/cloudpickle.py in dumps(obj, protocol)\r\n        702 \r\n        703     cp = CloudPickler(file,protocol\r\n\r\nI think i can&#39;t pass the parameter tx inside the loop.\r\nWe try to overpass this issue by instanciating a connection directly inside the loop like the code bellow . It works for small matrix but when i try with a 20 million row one it stop at some point \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    from py2neo import authenticate, Graph, cypher, Node\r\n    infos=df.rdd\r\n    authenticate(&quot;localhost:7474&quot;, &quot;neo4j&quot;, &quot;password&quot;)\r\n    \r\n    \r\n    def node(row):\r\n        graph = Graph(password=&#39;admin&#39;)\r\n        tx = graph.begin()\r\n        query = Node(&quot;item&quot;, event_id=row[0], text=row[19])\r\n        tx.create(query)\r\n        tx.commit()\r\n    \r\n    infos.foreach(node)\r\n\r\n\r\n I made some research about the neo4j-spark connector it seems that you could add the library but there is no example provided and i&#39;m not sure at all that such functionnality are actually provided in python. What would be the best way to solve this problem ?\r\n\r\n","link":"https://stackoverflow.com/questions/49625028/write-pyspark-rdd-or-df-in-neo4j","title":"write pyspark Rdd or DF in neo4j"},{"tags":["neo4j","cypher"],"comments":[{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":1,"creation_date":1522746261,"post_id":49624384,"comment_id":86259222,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language#comment86259222_49624384"},{"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1522784139,"post_id":49624384,"comment_id":86283420,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language#comment86283420_49624384"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":1,"creation_date":1522791507,"post_id":49624384,"comment_id":86286703,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language#comment86286703_49624384"},{"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1522803743,"post_id":49624384,"comment_id":86289993,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language#comment86289993_49624384"},{"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1522810472,"post_id":49624384,"comment_id":86291603,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language#comment86291603_49624384"},{"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"reply_to_user":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"edited":false,"score":0,"creation_date":1522812237,"post_id":49624384,"comment_id":86292046,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language#comment86292046_49624384"}],"answers":[{"comments":[{"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"edited":false,"score":0,"creation_date":1522812235,"post_id":49641436,"comment_id":86292044,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language/49641436#comment86292044_49641436"},{"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"edited":false,"score":0,"creation_date":1522831412,"post_id":49641436,"comment_id":86301000,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language/49641436#comment86301000_49641436"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"edited":false,"score":0,"creation_date":1522872364,"post_id":49641436,"comment_id":86328536,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language/49641436#comment86328536_49641436"},{"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"edited":false,"score":0,"creation_date":1522879556,"post_id":49641436,"comment_id":86332066,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language/49641436#comment86332066_49641436"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"edited":false,"score":0,"creation_date":1522880307,"post_id":49641436,"comment_id":86332330,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language/49641436#comment86332330_49641436"},{"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"edited":false,"score":0,"creation_date":1522981997,"post_id":49641436,"comment_id":86380213,"link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language/49641436#comment86380213_49641436"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522814324,"last_edit_date":1522814324,"creation_date":1522805862,"answer_id":49641436,"question_id":49624384,"share_link":"https://stackoverflow.com/a/49641436","body_markdown":"Let&#39;s say each `Retailer` node contains a `productNames` list, and each `Product` node has a `name`. For example:\r\n\r\n    CREATE (:Retailer {name: &#39;Prestige Liquor Store&#39;, productNames: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]})\r\n    CREATE (:Product {name: &#39;b&#39;, price: 12.50}),\r\n           (:Product {name: &#39;c&#39;, price: 99.95});\r\n\r\nThen this query would ensure that the &quot;Prestige Liquor Store&quot; has a unique `SELLS` relationship to each of the `Product`s it sells (that are in the DB):\r\n\r\n    MATCH (r:Retailer {name: &quot;Prestige Liquor Store&quot;})\r\n    MATCH (p:Product)\r\n    WHERE p.name IN r.productNames\r\n    MERGE (r)-[:SELLS]-&gt;(p);\r\n\r\nAlso, if you create indexes for `:Retailer(name)` and `Product(name)`, that should greatly speed up the above query if there are many retailers and/or products.","link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language/49641436#49641436","title":"How to create a one-many relationship in neo4j using cypher query language"}],"owner":{"reputation":10,"user_id":5368168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95250bc1f29919484108b29e37553a77?s=128&d=identicon&r=PG&f=1","display_name":"bharry29","link":"https://stackoverflow.com/users/5368168/bharry29"},"comment_count":6,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49641436,"answer_count":1,"score":0,"last_activity_date":1522814324,"creation_date":1522739945,"question_id":49624384,"share_link":"https://stackoverflow.com/q/49624384","body_markdown":"I am trying to create relationship between retailers and products sold by the retailers. For example if the store &quot;xyz&quot; sells products item1, item2 and item3, I would like to create a relationship &quot;SELLS_PRODUCTS&quot; between them from store to the product.\r\n\r\n\r\nHere is my sample code: \r\nHere Retailers is the retailers table, and Products is another table which has both the common details like the productname,storename etc which is required for the relationship.\r\n\r\n    MATCH (r:Retailers{Name: &quot;Prestige Liquor Store&quot;})\r\n    WITH r\r\n    MATCH (p:Products)\r\n    WHERE r.ProductproductName = p.ProductName\r\n    CREATE UNIQUE (r)-[:SELLS_PRODUCTS]-&gt;(p)","link":"https://stackoverflow.com/questions/49624384/how-to-create-a-one-many-relationship-in-neo4j-using-cypher-query-language","title":"How to create a one-many relationship in neo4j using cypher query language"},{"tags":["c#",".net","neo4j","gremlin"],"answers":[{"comments":[{"owner":{"reputation":1,"user_id":9589264,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Anoop Thomas C","link":"https://stackoverflow.com/users/9589264/anoop-thomas-c"},"edited":false,"score":0,"creation_date":1522832049,"post_id":49632871,"comment_id":86301411,"link":"https://stackoverflow.com/questions/49622851/dotnetlibary-with-gremlin-query/49632871#comment86301411_49632871"}],"tags":[],"owner":{"reputation":135,"user_id":4414246,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/XKtDl.jpg?s=128&g=1","display_name":"David A Stumpf","link":"https://stackoverflow.com/users/4414246/david-a-stumpf"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522766436,"creation_date":1522766436,"answer_id":49632871,"question_id":49622851,"share_link":"https://stackoverflow.com/a/49632871","body_markdown":"Neo4j.Driver.dll supports connections to the database. It may run Gremlin queries. Also, Neo4j just released a GraphQL plug in, which provides API functionality and may be useful for your project? [https://neo4j.com/blog/graphql-neo4j-graph-database-integration/][1]\r\n\r\n\r\n  [1]: https://neo4j.com/blog/graphql-neo4j-graph-database-integration/","link":"https://stackoverflow.com/questions/49622851/dotnetlibary-with-gremlin-query/49632871#49632871","title":"DotnetLibary with Gremlin query"}],"owner":{"reputation":1,"user_id":9589264,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Anoop Thomas C","link":"https://stackoverflow.com/users/9589264/anoop-thomas-c"},"comment_count":0,"delete_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1522766436,"creation_date":1522733409,"question_id":49622851,"share_link":"https://stackoverflow.com/q/49622851","body_markdown":"Is there any Dotnet library to connect to Neo4J Database using &quot;Gremlin Queries&quot;. I could see Dotnet library &quot;Neo4K.Driver.dll&quot;. \r\nI guess this DLL supports only Cypher queries? Is there anyway I can use &quot;Gremlin Query&quot; using Dotnet library for Neo4J database?","link":"https://stackoverflow.com/questions/49622851/dotnetlibary-with-gremlin-query","title":"DotnetLibary with Gremlin query"},{"tags":["neo4j","database-connection","neo4jclient"],"answers":[{"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522739630,"creation_date":1522739630,"answer_id":49624280,"question_id":49620985,"share_link":"https://stackoverflow.com/a/49624280","body_markdown":"The neo4j Desktop is only really for use during development.\r\n\r\nTo have a neo4j server that runs all the time, you should download an appropriate non-Desktop release [from this page](https://neo4j.com/download/other-releases/#releases), and install it on a machine or environment that is always available. [Chapter 2 of the Operations Manual](https://neo4j.com/docs/operations-manual/3.3/installation/) has installation instructions.","link":"https://stackoverflow.com/questions/49620985/connect-to-neo4j-through-c/49624280#49624280","title":"Connect to Neo4j through C#"}],"owner":{"reputation":1,"user_id":6442358,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1bd9b3f54b444898dbf18f6d9bb7a920?s=128&d=identicon&r=PG&f=1","display_name":"ammy_tammy","link":"https://stackoverflow.com/users/6442358/ammy-tammy"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1522739630,"creation_date":1522719440,"question_id":49620985,"share_link":"https://stackoverflow.com/q/49620985","body_markdown":"I have developed a web application using Asp.net, where I am using Neo4j client to connect to my Neo4j database.\r\n\r\n    static GraphClient client = new GraphClient(new Uri(url), username, password);\r\n    client.Connect();\r\n\r\nHowever this requires me to open the Neo4J desktop app and run the database before I can run my web app.\r\nI wonder if it is possible to run the webapp without opening the Neo4J instance physically. i.e., The webapp should communicate with Neo4J in the background like we normally do with SQL databases.","link":"https://stackoverflow.com/questions/49620985/connect-to-neo4j-through-c","title":"Connect to Neo4j through C#"},{"tags":["neo4j","digital-ocean"],"answers":[{"tags":[],"owner":{"reputation":423,"user_id":3204413,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/39dab087db256754ba1e5040a0ef67c6?s=128&d=identicon&r=PG&f=1","display_name":"nortoon","link":"https://stackoverflow.com/users/3204413/nortoon"},"last_editor":{"reputation":423,"user_id":3204413,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/39dab087db256754ba1e5040a0ef67c6?s=128&d=identicon&r=PG&f=1","display_name":"nortoon","link":"https://stackoverflow.com/users/3204413/nortoon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522781785,"last_edit_date":1522781785,"creation_date":1522781005,"answer_id":49637084,"question_id":49620654,"share_link":"https://stackoverflow.com/a/49637084","body_markdown":"You know, I&#39;ve looked at the code to do stop, and I can&#39;t figure out how it ever worked, at least in 3.X. But then Java isn&#39;t my best language. Could I suggest an alternative? Assuming you installed with the Debian Neo4j package, it includes the proper control files to start under systemd. This is [the recommended way to start neo4j][1]. So to start it, use\r\n\r\n&gt; sudo systemctl start neo4j\r\n\r\nto make sure it restarts after a boot:\r\n&gt; sudo systemctl enable neo4j\r\n\r\nto stop:\r\n&gt; sudo systemctl stop neo4j\r\n\r\nand finally, to make sure it doesn&#39;t restart after a boot,\r\n\r\n&gt; sudo systemctl disable neo4j\r\n\r\nShould work far better than the neo4j start/stop interface, and give you the advantages of systemd, like being able to examine the standard output, query the current status, etc. This also restarts neo4j if it dies for any reason.\r\n\r\n\r\n  [1]: https://neo4j.com/docs/operations-manual/current/installation/linux/systemd/","link":"https://stackoverflow.com/questions/49620654/neo4j-can-be-started-but-it-cant-be-stopped-by-regular-neo4j-stop-command/49637084#49637084","title":"Neo4j can be started, but it can&#39;t be stopped by regular &#39;neo4j stop&#39; command"}],"owner":{"reputation":618,"user_id":3815432,"user_type":"registered","accept_rate":48,"profile_image":"https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1","display_name":"Nikita Vlasenko","link":"https://stackoverflow.com/users/3815432/nikita-vlasenko"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49637084,"answer_count":1,"score":1,"last_activity_date":1522781785,"creation_date":1522716274,"question_id":49620654,"share_link":"https://stackoverflow.com/q/49620654","body_markdown":"I am using `DigitalOcean`s&#39; `Ubuntu 16.04` and I am having trouble understanding of why I can successfully start `Neo4j` by typing `sudo neo4j start`, but I can not stop it by `sudo neo4j stop`: it is always writing for me that `neo4j is not running`. I did `ps aux` command and figured out that `neo4j` is run under the name `java`:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSo, I can restart `neo4j` by doing `kill -15 31905`, and then `sudo neo4j start`. Could anyone explain in detail what is going on here? Why `sudo neo4j stop` is not working?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VOjgS.png","link":"https://stackoverflow.com/questions/49620654/neo4j-can-be-started-but-it-cant-be-stopped-by-regular-neo4j-stop-command","title":"Neo4j can be started, but it can&#39;t be stopped by regular &#39;neo4j stop&#39; command"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":10,"user_id":7814976,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e590e9cb23569ccb76da615a9d10adf7?s=128&d=identicon&r=PG&f=1","display_name":"PraiseTheBaud","link":"https://stackoverflow.com/users/7814976/praisethebaud"},"edited":false,"score":0,"creation_date":1522794952,"post_id":49620967,"comment_id":86287817,"link":"https://stackoverflow.com/questions/49620275/neo4j-cypher-get-neighbours-for-variable-length-path-given-condition-skip-thos/49620967#comment86287817_49620967"},{"owner":{"reputation":10,"user_id":7814976,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e590e9cb23569ccb76da615a9d10adf7?s=128&d=identicon&r=PG&f=1","display_name":"PraiseTheBaud","link":"https://stackoverflow.com/users/7814976/praisethebaud"},"edited":false,"score":0,"creation_date":1522797752,"post_id":49620967,"comment_id":86288583,"link":"https://stackoverflow.com/questions/49620275/neo4j-cypher-get-neighbours-for-variable-length-path-given-condition-skip-thos/49620967#comment86288583_49620967"}],"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1522719280,"creation_date":1522719280,"answer_id":49620967,"question_id":49620275,"share_link":"https://stackoverflow.com/a/49620967","body_markdown":"Assuming each of those currently non-labeled nodes has a label you can use for the query (I&#39;m just going to use :Node here), this should work:\r\n\r\n    // for each node, get its color\r\n    MATCH (n:Node)-[:IS]-&gt;(myColor)\r\n    // find paths to all previous nodes (where the colors match)\r\n    // this includes the starting node, which has distance 0\r\n    MATCH path = (n)-[:PREVIOUS*0..]-&gt;(prev)\r\n    WHERE (prev)-[:IS]-&gt;(myColor)\r\n    // for each node, order its previous nodes by distance\r\n    WITH n, prev\r\n    ORDER BY length(path) ASC\r\n    // grab first three closest (first will always be the node itself)\r\n    WITH n, collect(prev)[..3] as prevs\r\n    RETURN prevs\r\n    ORDER BY size(prevs) DESC\r\n\r\n","link":"https://stackoverflow.com/questions/49620275/neo4j-cypher-get-neighbours-for-variable-length-path-given-condition-skip-thos/49620967#49620967","title":"Neo4j Cypher: Get neighbours for variable length path given condition, skip those that do not meet condition"}],"owner":{"reputation":10,"user_id":7814976,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e590e9cb23569ccb76da615a9d10adf7?s=128&d=identicon&r=PG&f=1","display_name":"PraiseTheBaud","link":"https://stackoverflow.com/users/7814976/praisethebaud"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49620967,"answer_count":1,"score":1,"last_activity_date":1522719280,"creation_date":1522712675,"question_id":49620275,"share_link":"https://stackoverflow.com/q/49620275","body_markdown":"I&#39;m working on a problem, and I&#39;ve abstracted it as such:\r\n\r\n    (a)-[:PREVIOUS]-&gt;(b)-[:PREVIOUS]-&gt;(c)-[:PREVIOUS]-&gt;(d)-[:PREVIOUS]-&gt;(e)-[:PREVIOUS]-&gt;(f)\r\n    (b)-[:IS]-&gt;(:Colour {Name: &#39;Red&#39;})\r\n    (c)-[:IS]-&gt;(:Colour {Name: &#39;Red&#39;})\r\n    (d)-[:IS]-&gt;(:Colour {Name: &#39;Red&#39;})\r\n    (e)-[:IS]-&gt;(:Colour {Name: &#39;Blue&#39;})\r\n    (f)-[:IS]-&gt;(:Colour {Name: &#39;Red&#39;})\r\n\r\nNote,\r\n\r\n    (:Colour {Name: &#39;Red&#39;}) \r\n\r\nis unique and connected to many nodes e.g. \r\n\r\n    (a)-[:IS]-&gt;(:Colour {Name: Red})&lt;-[:IS]-(b) \r\n\r\nbut only \r\n\r\n    (e)-[:IS]-&gt;(:Colour {Name: Blue})\r\n\r\nI&#39;m trying to construct a query where the data is related as shown in the above graph. What I want to do is obtain a node and its 2 previous neighbours. However, there are conditions:\r\n\r\n1. I only want to return neighbours that share the same &quot;IS&quot; property.\r\n2. If there is a neighbour with a different &quot;IS&quot; property, skip it.\r\n3. If a node has less than 2 previous neighbours, then return 1 or 0 neighbours.\r\n\r\nI&#39;ve made attempts at this but can&#39;t produce the below output. The COMPLETE output for the above graph, should look like this:\r\n\r\n    a, b, c\r\n    b, c, d\r\n    c, d, f\r\n    d, f\r\n    e\r\n    f\r\n\r\nNote that for node (c), we get back (d), (f) and skip (e) as it is blue; (d) should have similar behaviour. (e) returns itself only, as it is the only blue node. Does anyone know if there is an easy solution to this?","link":"https://stackoverflow.com/questions/49620275/neo4j-cypher-get-neighbours-for-variable-length-path-given-condition-skip-thos","title":"Neo4j Cypher: Get neighbours for variable length path given condition, skip those that do not meet condition"},{"tags":["neo4j","group-by","cypher"],"comments":[{"owner":{"reputation":9700,"user_id":6835358,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/UYYs5.png?s=128&g=1","display_name":"Bruno Peres","link":"https://stackoverflow.com/users/6835358/bruno-peres"},"edited":false,"score":0,"creation_date":1522716047,"post_id":49620263,"comment_id":86248133,"link":"https://stackoverflow.com/questions/49620263/neo4j-group-by-floating-point-number#comment86248133_49620263"},{"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"edited":false,"score":1,"creation_date":1522757087,"post_id":49620263,"comment_id":86265936,"link":"https://stackoverflow.com/questions/49620263/neo4j-group-by-floating-point-number#comment86265936_49620263"}],"answers":[{"tags":[],"owner":{"reputation":25,"user_id":9555005,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c263cb551b8be6c57259fea00d94d038?s=128&d=identicon&r=PG&f=1","display_name":"Scofflaw","link":"https://stackoverflow.com/users/9555005/scofflaw"},"last_editor":{"reputation":25,"user_id":9555005,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c263cb551b8be6c57259fea00d94d038?s=128&d=identicon&r=PG&f=1","display_name":"Scofflaw","link":"https://stackoverflow.com/users/9555005/scofflaw"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522798030,"last_edit_date":1522798030,"creation_date":1522796855,"answer_id":49640345,"question_id":49620263,"share_link":"https://stackoverflow.com/a/49640345","body_markdown":"You could always run successive queries programmatically by using parameters:\r\n\r\n    MATCH (c:Cell)-[ex:EXPRESSES]-&gt;(g:Gene {geneName:&quot;Ifnar1&quot;})\r\n    WHERE $lower &lt;= ex.expr &lt; $upper\r\n    RETURN COUNT(c)\r\n\r\nThen it&#39;s just a matter of writing a script to generate the *$lower* and *$upper* parameters however you wish.\r\n\r\n&gt;Edit\r\n\r\nAlternatively, if you know the interval boundaries you can do it like this:\r\n\r\n    \r\n    MATCH (c:Cell)-[ex:EXPRESSES]-&gt;(g:Gene {geneName:&quot;Ifnar1&quot;})\r\n    WITH c, (CASE\r\n    WHEN 0&lt;=ex.expr&lt;0.5 THEN 0\r\n    WHEN 0.5&lt;=ex.expr&lt;1 THEN 1\r\n    WHEN 1&lt;=ex.expr&lt;1.5 THEN 2\r\n    WHEN 1.5&lt;=ex.expr&lt;2 THEN 3\r\n    WHEN 2&lt;=ex.expr&lt;2.5 THEN 4 END) AS interval\r\n    RETURN interval, COUNT(c), ORDER BY interval","link":"https://stackoverflow.com/questions/49620263/neo4j-group-by-floating-point-number/49640345#49640345","title":"Neo4j group by floating point number"},{"tags":[],"owner":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"last_editor":{"reputation":14929,"user_id":4989460,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DiLyk.jpg?s=128&g=1","display_name":"stdob--","link":"https://stackoverflow.com/users/4989460/stdob"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522831968,"last_edit_date":1522831968,"creation_date":1522830922,"answer_id":49646343,"question_id":49620263,"share_link":"https://stackoverflow.com/a/49646343","body_markdown":"Suppose that the input parameter is the interval `$step`. And the left border of the first interval is zero. Then for each value of `ex.expr` we can calculate in what interval it is:\r\n\r\n    floor(ex.expr / $step)\r\n\r\nSo we need:\r\n\r\n - walk through all relationships\r\n - calculate in what interval they belong\r\n - count their number for each interval\r\n - detach in order of intervals\r\n - and return the result (and calculate the boundaries of intervals)\r\n\r\nThe concept of the query (`$step` is an input parameter):\r\n\r\n    MATCH (c:Cell)-[ex:EXPRESSES]-&gt;(g:Gene {geneName:&quot;Ifnar1&quot;})\r\n    WITH floor(ex.expr / $step) AS intervalIndex, \r\n         count(c) AS cellCount \r\n         ORDER BY intervalIndex ASC\r\n    RETURN intervalIndex, \r\n           cellCount\r\n\r\nWhat if we not only want to return the interval number, but also its boundaries:\r\n\r\n    MATCH (c:Cell)-[ex:EXPRESSES]-&gt;(g:Gene {geneName:&quot;Ifnar1&quot;})\r\n    WITH floor(ex.expr / $step) AS intervalIndex, \r\n         count(c) AS cellCount \r\n         ORDER BY intervalIndex ASC\r\n    WITH intervalIndex, cellCount,\r\n         $step * intervalIndex AS leftBoundary,\r\n         $step * (intervalIndex + 1) AS rightBoundary\r\n    RETURN intervalIndex, \r\n           [leftBoundary, rightBoundary] AS intervalBoundaries, \r\n           cellCount\r\n\r\nFor some step values, the returned interval values will be inaccurate, for example at step 0.2 and intervalIndex is 2 - `[0.4, 0.6000000000000001]` instead of `[0.4, 0.6]`. So, based on the number of digits in the step after the decimal point, we need to calculate the factor of calculation accuracy, and round up to the required number of digits (based on Mark Needham post http://markhneedham.com/blog/2014/05/25/neo4j-cypher-rounding-a-float-value-to-decimal-places/):\r\n\r\n    WITH toInteger(split(toString($step - floor($step)), &#39;.&#39;)[1]) AS precision\r\n    WITH CASE WHEN precision IS NULL THEN 0 ELSE precision END AS precision\r\n    WITH 10 ^ precision AS factor\r\n\r\n    MATCH (c:Cell)-[ex:EXPRESSES]-&gt;(g:Gene {geneName:&quot;Ifnar1&quot;})\r\n    WITH factor,\r\n         floor(ex.expr / $step) AS intervalIndex, \r\n         count(c) AS cellCount \r\n         ORDER BY intervalIndex ASC\r\n    WITH intervalIndex, cellCount,\r\n         round(factor * $step * intervalIndex) / factor AS leftBoundary,\r\n         round(factor * $step * (intervalIndex + 1)) / factor AS rightBoundary\r\n    RETURN intervalIndex, \r\n           [leftBoundary, rightBoundary] AS intervalBoundaries, \r\n           cellCount","link":"https://stackoverflow.com/questions/49620263/neo4j-group-by-floating-point-number/49646343#49646343","title":"Neo4j group by floating point number"}],"owner":{"reputation":618,"user_id":3815432,"user_type":"registered","accept_rate":48,"profile_image":"https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1","display_name":"Nikita Vlasenko","link":"https://stackoverflow.com/users/3815432/nikita-vlasenko"},"last_editor":{"reputation":618,"user_id":3815432,"user_type":"registered","accept_rate":48,"profile_image":"https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1","display_name":"Nikita Vlasenko","link":"https://stackoverflow.com/users/3815432/nikita-vlasenko"},"comment_count":2,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49646343,"answer_count":2,"score":2,"last_activity_date":1522831968,"creation_date":1522712566,"last_edit_date":1522793044,"question_id":49620263,"share_link":"https://stackoverflow.com/q/49620263","body_markdown":"I have items (cells) with floating point numbers associated with them (gene expression values) and I need `Neo4j` to return me `counts` of the items for the specified range of these floating point numbers. I want to get something like this:\r\n\r\n    cell count: 20\r\n    expression: [0, 0.1)\r\n\r\n    cell count: 25\r\n    expression: [0.1, 0.2)\r\n\r\n    cell count: 10\r\n    expression: [0.2, 0.3)\r\n\r\nHaving the data stored in the database in the following way:\r\n\r\n    (c:Cell)-[ex:EXPRESSES]-&gt;(g.Gene)\r\n    ex.expr - expression value; g.geneName - gene name that is set for this query\r\n\r\nRight now I am stuck with the following query:\r\n\r\n    MATCH (c:Cell)-[ex:EXPRESSES]-&gt;(g:Gene {geneName:&quot;Ifnar1&quot;})\r\n    RETURN ex.expr, count(c) as cellcount\r\n\r\nI need to somehow specify the `range` for each `ex.expr` values individually.\r\n\r\nAny suggestions would be greatly appreciated.\r\n\r\n&gt;Update\r\n\r\nSample dataset:\r\n\r\n    g.geneName = &quot;Ifnar1&quot;\r\n\r\n    c.cellId = 1, ex.expr = 0.05\r\n    c.cellId = 2, ex.expr = 0.07\r\n    c.cellId = 3, ex.expr = 1.50\r\n    c.cellId = 4, ex.expr = 1.21\r\n    c.cellId = 5, ex.expr = 2.11\r\n    c.cellId = 6, ex.expr = 0.85\r\n    c.cellId = 7, ex.expr = 0.96\r\n    c.cellId = 8, ex.expr = 0.15\r\n\r\n    Answer:\r\n    [0, 0.5], 3\r\n    [0.5, 1.0], 2\r\n    [1.0, 1.5], 2\r\n    [1.5, 2.0], 0\r\n    [2.0, 2.5], 1\r\n\r\n&gt;Update: Clarifications\r\n\r\nYes, they are of the same length. I want to be able to specify the interval step, say, 0.02, and generate the intervals with this step then, from 0.02, say up to the max, which is 2.5. I know only that the min is `0`, but I do not know the max beforehand actually. No, for the particular task I am doing it, returning intervals for zero counts is not necessary, but it would still be nice if it can be done in general case. How I want to pass the list of intervals? Something like `range` generation, however, I do not know the max, so the max should somehow be determined on the fly `OR` I can just guess the number, that would work too. I expect the distribution of counts to be of normal distribution, so if the expression is too high, the count will be zero.","link":"https://stackoverflow.com/questions/49620263/neo4j-group-by-floating-point-number","title":"Neo4j group by floating point number"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522977703,"post_id":49620227,"comment_id":86379268,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86379268_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522978955,"post_id":49620227,"comment_id":86379555,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86379555_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522979191,"post_id":49620227,"comment_id":86379606,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86379606_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522981303,"post_id":49620227,"comment_id":86380061,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86380061_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523237701,"post_id":49620227,"comment_id":86462875,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86462875_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523240622,"post_id":49620227,"comment_id":86463369,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86463369_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523296631,"post_id":49620227,"comment_id":86492238,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86492238_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523299159,"post_id":49620227,"comment_id":86493527,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86493527_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523305757,"post_id":49620227,"comment_id":86496912,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86496912_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523307133,"post_id":49620227,"comment_id":86497574,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86497574_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523308210,"post_id":49620227,"comment_id":86498049,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86498049_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523309585,"post_id":49620227,"comment_id":86498628,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86498628_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523312252,"post_id":49620227,"comment_id":86499638,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86499638_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523314110,"post_id":49620227,"comment_id":86500219,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86500219_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523314868,"post_id":49620227,"comment_id":86500439,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86500439_49620227"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523316254,"post_id":49620227,"comment_id":86500929,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86500929_49620227"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1523317442,"post_id":49620227,"comment_id":86501216,"link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#comment86501216_49620227"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":17,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522714817,"last_edit_date":1522714817,"creation_date":1522712319,"answer_id":49620227,"question_id":49620185,"share_link":"https://stackoverflow.com/a/49620227","body_markdown":"An index is associated with a *specify property* of a node label, and currently the Cypher planners are only smart enough to support a subset of the ways in which an indexed property could be specified in a `MATCH/WHERE` pair. You may have received an error message that started something like this:\r\n\r\n&gt; Neo.ClientError.Statement.SyntaxError: Cannot use index hint in this\r\n&gt; context. Index hints are only supported for the following predicates\r\n&gt; in WHERE (either directly or as part of a top-level AND or OR):\r\n&gt; equality comparison, inequality (range) comparison, STARTS WITH, IN\r\n&gt; condition or checking property existence. The comparison cannot be\r\n&gt; performed between two property values. Note that the label and\r\n&gt; property comparison must be specified on a non-optional node ...\r\n\r\nYou can try creating indexes on multiple properties of `Attributes`, and the Cypher planner *might* generate a plan that uses all of them (use the [PROFILE](https://neo4j.com/docs/developer-manual/current/cypher/query-tuning/how-do-i-profile-a-query/) option to check the generated plan).\r\n\r\n*But, if you also have an index on `:Product(type)`, you may want to drop it (since that index could match a lot of nodes and worsen your performance due to the creation of a large cartesian product).*\r\n\r\nFor example, if you had 3 `Attributes` properties (resolution, foo, and bar) and you had indexes on all of them, the Cypher planner *might* generate a plan that uses all 3 indexes on a query that looks like this:\r\n\r\n    MATCH (s:Product {type:&#39;Phone&#39;})--&gt;(o:Attributes)\r\n    WHERE o.resolution = &#39;2000&#39; OR o.foo = 123 OR o.bar = &#39;abc&#39;\r\n    RETURN s, o\r\n    LIMIT 2;\r\n\r\nUnfortunately, you cannot add `USE INDEX` hints to tell the planner to use all your indexes, since another current limitation is that you can only provide a single index hint per variable (such as `o`).","link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query/49620227#49620227","title":"How to use index hint in this query?"}],"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49620227,"answer_count":1,"score":0,"last_activity_date":1522714847,"creation_date":1522712029,"last_edit_date":1522714847,"question_id":49620185,"share_link":"https://stackoverflow.com/q/49620185","body_markdown":"    match (s:Product {type:&#39;Phone&#39;})-[r]-&gt;(o:Attributes)\r\n    USING INDEX o:Attributes(resolution)\r\n    WHERE any(key in keys(o) WHERE key=&#39;resolution&#39; AND o[key] contains &#39;2000&#39;)\r\n    return s, o limit 2\r\n\r\nI have two questions with this query:\r\n\r\n1) It reports an error in this syntax for &#39;USING INDEX o:Attributes(resolution)&#39;, which isn&#39;t allowed.\r\n\r\n2) The reason I am using this &#39;where&#39; clause format is that my key&amp;value will be variables passed through function. The WHERE clause actually looks like this:\r\n \r\n\r\n    WHERE any(key in keys(o) WHERE key=$kgKey AND o[key] = $kgValue)\r\nHopefully, I can the first problem resolved first, and then try to solve the 2nd problem.\r\n\r\nEDIT:\r\nWhat I want to achieve in this query is: find out all phones with a specific &#39;resolution&#39; value, i.e. &#39;resolution=2000&#39;. Since the clause will filter on other similar properties as &#39;resolution&#39; too, i can&#39;t hard code &#39;resolution&#39; in the query. \r\n\r\nAnd to allow for partial match, I use o[key] CONTAINS &#39;2000&#39;, instead of =.\r\n","link":"https://stackoverflow.com/questions/49620185/how-to-use-index-hint-in-this-query","title":"How to use index hint in this query?"},{"tags":["neo4j","cypher"],"answers":[{"comments":[{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522707015,"post_id":49619438,"comment_id":86245981,"link":"https://stackoverflow.com/questions/49619362/how-to-speed-up-this-cypher-query/49619438#comment86245981_49619438"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522707380,"post_id":49619438,"comment_id":86246091,"link":"https://stackoverflow.com/questions/49619362/how-to-speed-up-this-cypher-query/49619438#comment86246091_49619438"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522707851,"post_id":49619438,"comment_id":86246231,"link":"https://stackoverflow.com/questions/49619362/how-to-speed-up-this-cypher-query/49619438#comment86246231_49619438"},{"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522707983,"post_id":49619438,"comment_id":86246269,"link":"https://stackoverflow.com/questions/49619362/how-to-speed-up-this-cypher-query/49619438#comment86246269_49619438"},{"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"reply_to_user":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"edited":false,"score":0,"creation_date":1522708910,"post_id":49619438,"comment_id":86246542,"link":"https://stackoverflow.com/questions/49619362/how-to-speed-up-this-cypher-query/49619438#comment86246542_49619438"}],"tags":[],"owner":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"last_editor":{"reputation":33819,"user_id":974731,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG","display_name":"cybersam","link":"https://stackoverflow.com/users/974731/cybersam"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522707365,"last_edit_date":1522707365,"creation_date":1522706701,"answer_id":49619438,"question_id":49619362,"share_link":"https://stackoverflow.com/a/49619438","body_markdown":"Make sure you have created an [index](https://neo4j.com/docs/developer-manual/3.3/cypher/schema/index/#schema-index-create-a-single-property-index) on `:Product(type)`, like this:\r\n\r\n    CREATE INDEX ON :Product(type);\r\n\r\nThat index will speed up the lookup of all `Product` nodes with a specified `type` value.\r\n\r\nOr, if there are relatively few `Attributes` nodes with any given  `Resolution` value, you could add an index on `:Attributes(Resolution)` instead, and provide a hint to use that index \r\n (if you also have an index on `:Product(type)`):\r\n\r\n    MATCH (s:Product {type:&#39;Phone&#39;})--&gt;(o:Attributes {Resolution:&#39;2000&#39;})\r\n    USING INDEX o:Attributes(Resolution)\r\n    RETURN s, o\r\n    LIMIT 2\r\n","link":"https://stackoverflow.com/questions/49619362/how-to-speed-up-this-cypher-query/49619438#49619438","title":"How to speed up this cypher query?"}],"owner":{"reputation":2517,"user_id":697911,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1","display_name":"user697911","link":"https://stackoverflow.com/users/697911/user697911"},"comment_count":0,"delete_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49619438,"answer_count":1,"score":0,"last_activity_date":1522707365,"creation_date":1522706281,"question_id":49619362,"share_link":"https://stackoverflow.com/q/49619362","body_markdown":"    match (s:Product {type:&#39;Phone&#39;})-[r]-&gt;(o:Attributes {Resolution:&#39;2000&#39;}) return s, o limit 2\r\n\r\nThis query takes 15832 ms and times out in my application. My application has a time limit on the time spent on each query. Is there a way to speed up this process? The reason for being slow is because the &quot;Product&quot; node has lots of instances. ","link":"https://stackoverflow.com/questions/49619362/how-to-speed-up-this-cypher-query","title":"How to speed up this cypher query?"},{"tags":["neo4j","cytoscape","pairwise"],"answers":[{"comments":[{"owner":{"reputation":1,"user_id":3050520,"user_type":"registered","profile_image":"https://graph.facebook.com/1319581534/picture?type=large","display_name":"user3050520","link":"https://stackoverflow.com/users/3050520/user3050520"},"edited":false,"score":0,"creation_date":1522792789,"post_id":49618246,"comment_id":86287134,"link":"https://stackoverflow.com/questions/49618091/pairwise-table-into-a-nodes-and-edges-table-for-import-into-neo4j-or-cytoscape/49618246#comment86287134_49618246"}],"tags":[],"owner":{"reputation":13582,"user_id":92359,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG","display_name":"InverseFalcon","link":"https://stackoverflow.com/users/92359/inversefalcon"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522700431,"creation_date":1522700431,"answer_id":49618246,"question_id":49618091,"share_link":"https://stackoverflow.com/a/49618246","body_markdown":"Speaking just for loading into Neo4j:\r\n\r\nI&#39;m assuming the CSV has three columns, something like `name1,name2,correlation`?\r\n\r\nYou can just [load from a CSV][1] into Neo4j, no transformation necessary. This works best when nodes are loaded first, and relationships loaded separately.\r\n\r\nSo that would require two runs through the CSV.\r\n\r\nThe first run will be for doing a MERGE of all your nodes. You&#39;ll want an index on the label/property combination so the MERGE is fast.\r\n\r\nAssuming for the moment that you&#39;re working with :Person nodes, you&#39;d want an index on :Person(name) and your load would look something like this:\r\n\r\n    USING PERIODIC COMMIT\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///path/to/csv/relative/to/import/directory&#39; as line\r\n    MERGE (:Person{name:line.name1})\r\n\r\nNow that all the nodes are imported, the second run will create the relationships:\r\n\r\n    USING PERIODIC COMMIT\r\n    LOAD CSV WITH HEADERS FROM &#39;file:///path/to/csv/relative/to/import/directory&#39; as line\r\n    MATCH (p1:Person{name:line.name1}), (p2:Person{name:line.name2})\r\n    MERGE (p1)-[:CORRELATION{value:toInteger(line.correlation)}]-(p2)\r\n\r\n\r\n  [1]: https://neo4j.com/docs/developer-manual/current/cypher/clauses/load-csv/","link":"https://stackoverflow.com/questions/49618091/pairwise-table-into-a-nodes-and-edges-table-for-import-into-neo4j-or-cytoscape/49618246#49618246","title":"Pairwise table into a Nodes and edges table for import into NEO4J or Cytoscape"},{"tags":[],"owner":{"reputation":216,"user_id":4799667,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-jvbsSvJpBuo/AAAAAAAAAAI/AAAAAAAAAHY/nRn_BR0fh3w/photo.jpg?sz=128","display_name":"Scooter Morris","link":"https://stackoverflow.com/users/4799667/scooter-morris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522945452,"creation_date":1522945452,"answer_id":49677167,"question_id":49618091,"share_link":"https://stackoverflow.com/a/49677167","body_markdown":"For Cytoscape, you can just import the table using File-&gt;Import-&gt;Network-&gt;File...\r\n","link":"https://stackoverflow.com/questions/49618091/pairwise-table-into-a-nodes-and-edges-table-for-import-into-neo4j-or-cytoscape/49677167#49677167","title":"Pairwise table into a Nodes and edges table for import into NEO4J or Cytoscape"}],"owner":{"reputation":1,"user_id":3050520,"user_type":"registered","profile_image":"https://graph.facebook.com/1319581534/picture?type=large","display_name":"user3050520","link":"https://stackoverflow.com/users/3050520/user3050520"},"comment_count":0,"delete_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1522945452,"creation_date":1522699732,"question_id":49618091,"share_link":"https://stackoverflow.com/q/49618091","body_markdown":"How can I transform a CSV pairwise co-publication correlation table (165 names by  the same 165 names w/ correlation values) into a file I can import as a nodes and edges table into either NEO4J or Cytoscape? ","link":"https://stackoverflow.com/questions/49618091/pairwise-table-into-a-nodes-and-edges-table-for-import-into-neo4j-or-cytoscape","title":"Pairwise table into a Nodes and edges table for import into NEO4J or Cytoscape"}],"has_more":true,"quota_max":300,"quota_remaining":292}